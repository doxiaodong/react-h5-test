{"version":3,"sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","../node_modules/react-lazyload/lib/index.js","../node_modules/react-lazyload/lib/utils/event.js","../node_modules/react-lazyload/lib/utils/scrollParent.js","../node_modules/react-lazyload/lib/utils/debounce.js","../node_modules/react-lazyload/lib/utils/throttle.js","../node_modules/better-scroll/dist/better-scroll.esm.js"],"names":["_toConsumableArray","arr","Array","isArray","arrayLikeToArray","iter","Symbol","iterator","Object","from","unsupportedIterableToArray","TypeError","defineProperty","exports","value","forceVisible","forceCheck","lazyload","undefined","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","Constructor","protoProps","staticProps","prototype","_react","require","_react2","_interopRequireDefault","_reactDom2","_propTypes2","_event","_scrollParent2","_debounce2","_throttle2","obj","__esModule","default","_classCallCheck","instance","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","defaultBoundingClientRect","LISTEN_FLAG","listeners","pending","passiveEventSupported","opts","get","window","addEventListener","e","passiveEvent","capture","passive","checkVisible","component","node","findDOMNode","HTMLElement","parent","overflow","ownerDocument","document","documentElement","parentTop","parentLeft","parentHeight","parentWidth","_parent$getBoundingCl","getBoundingClientRect","top","left","height","width","windowInnerHeight","innerHeight","clientHeight","windowInnerWidth","innerWidth","clientWidth","intersectionTop","Math","max","intersectionLeft","intersectionHeight","min","intersectionWidth","_node$getBoundingClie","offsetTop","offsetLeft","offsets","offset","checkOverflowVisible","offsetWidth","offsetHeight","getClientRects","elementHeight","_node$getBoundingClie2","checkNormalVisible","visible","once","push","forceUpdate","unmountIfInvisible","purgePending","forEach","index","indexOf","splice","lazyLoadHandler","listener","delayType","finalLazyLoadHandler","LazyLoad","_Component","this","_this","getPrototypeOf","scrollport","scrollContainer","querySelector","needResetFinalLazyLoadHandler","debounce","off","throttle","getAttribute","listenerCount","setAttribute","_props","scroll","resize","on","removeEventListener","removeAttribute","children","placeholder","createElement","style","className","Component","propTypes","bool","oneOfType","number","string","arrayOf","object","defaultProps","getDisplayName","WrappedComponent","displayName","name","options","arguments","_Component2","LazyLoadDecorated","_this2","el","eventName","callback","attachEvent","event","detachEvent","excludeStaticParent","position","overflowRegex","parentNode","getComputedStyle","overflowX","overflowY","test","func","wait","immediate","timeout","args","context","timestamp","result","later","last","Date","setTimeout","apply","callNow","fn","threshhold","scope","deferTimer","now","clearTimeout","extendStatics","d","b","p","hasOwnProperty","__extends","__","__assign","assign","t","s","n","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","rejected","done","then","__generator","body","f","y","g","_","label","sent","trys","ops","verb","v","op","pop","warn","msg","console","error","inBrowser","ua","navigator","userAgent","toLowerCase","isWeChatDevTools","isAndroid","getNow","performance","timing","navigationStart","extend","rest","_i","source","isUndef","fixInboundValue","x","elementStyle","vendor","transformNames","webkit","Moz","O","ms","standard","prefixStyle","charAt","toUpperCase","substr","getElement","addEvent","type","removeEvent","offsetParent","offsetToBody","rect","pageXOffset","pageYOffset","cssVendor","transform","transition","hasPerspective","hasTouch","hasTransition","transitionTimingFunction","transitionDuration","transitionDelay","transformOrigin","transitionEnd","eventTypeMap","touchstart","touchmove","touchend","mousedown","mousemove","mouseup","getRect","SVGElement","preventDefaultExceptionFn","exceptions","tagExceptionFn","click","eventSource","changedTouches","ev","posSrc","screenX","screenY","clientX","clientY","MouseEvent","bubbles","cancelable","createEvent","initEvent","forwardedTouchEvent","_constructed","dispatchEvent","removeChild","child","hasClass","RegExp","ease","swipe","swipeBounce","bounce","windowCompat","noop","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","interval","cancelAnimationFrame","webkitCancelAnimationFrame","mozCancelAnimationFrame","oCancelAnimationFrame","id","noop$1","val","sharedPropertyDefinition","set","EventEmitter","names","events","eventTypes","registerType","hasType","magic","count","trigger","ret","len","eventsCopy","slice","event_1","destroy","types","keys","map","JSON","stringify","EventRegister","wrapper","addDOMEvents","removeDOMEvents","handleDOMEvents","eventOperation","handleEvent","eventType","some","handler","Options","startX","startY","scrollX","scrollY","freeScroll","directionLockThreshold","eventPassthrough","dblclick","tap","bottom","right","bounceTime","momentum","momentumLimitTime","momentumLimitDistance","swipeTime","swipeBounceTime","deceleration","flickLimitTime","flickLimitDistance","resizePolling","probeType","stopPropagation","preventDefault","preventDefaultException","tagName","tagException","HWCompositing","useTransition","bindToWrapper","disableMouse","disableTouch","autoBlur","merge","process","translateZ","resolveBounce","makeMap","ActionsHandler","hooks","_a","wrapperEvents","targetEvents","shouldRegisterTouch","shouldRegisterMouse","bind","start","move","end","wrapperEventRegister","targetEventRegister","beforeHandler","setInitiated","initiated","_eventType","button","beforeStart","point","touches","pointX","pageX","pointY","pageY","deltaX","deltaY","scrollLeft","scrollTop","pX","pY","translaterMetaData","Translater","content","getComputedPosition","matrix","split","translate","transformStyle","transformFnName","transformFnArgUnit","transformFnArg","beforeTranslate","join","Base","translater","endPoint","setPending","setForceStopped","forceStopped","timer","Transition","_super","startProbe","probe","pos","transitionTime","time","easing","timeFunction","startPoint","easingFn","isSlient","_reflow","stop","beforeForceStop","forceStop","Animation","animate","duration","startTime","destTime","newPoint","startValue","endValue","_b","_c","_d","Behavior","currentPos","startPos","direction","movingDirection","dist","delta","hasScroll","newPos","minScrollPos","maxScrollPos","bounces","momentumInfo","absDist","abs","wrapperSize","destination","current","lowerMargin","upperMargin","distance","speed","momentumData","rate","round","updateDirection","absStartPos","refresh","size","isWrapperStatic","wrapperRect","contentRect","contentSize","relativeOffset","scrollable","updatePosition","getCurrentPos","checkInBoundary","adjustPosition","inBoundary","roundPos","updateStartPos","updateAbsStartPos","resetStartPos","getAbsDist","PassthroughHandlers","DirectionMap","DirectionLockAction","reset","directionLocked","checkMovingDirection","absDistX","absDistY","computeDirectionLock","handleEventPassthrough","adjustDelta","handleMap","ScrollerActions","scrollBehaviorX","scrollBehaviorY","actionsHandler","animater","directionLockAction","enabled","bindActionsHandler","handleStart","handleMove","handleEnd","handleClick","moved","beforeMove","checkMomentum","newX","newY","scrollStart","dispatchScroll","endTime","beforeEnd","scrollEnd","createBehaviorOptions","bsOptions","extraProp","reduce","prev","cur","bubbling","sourceEvent","targetEvent","concat","Scroller","_e","element","animaterOptions","createAnimater","actions","resizeHandler","resizeRegister","transitionEndRegister","init","bindTranslater","bindAnimater","bindActions","togglePointerEvents","updatePositions","resetPosition","beforeScrollStart","touchEnd","checkClick","scrollCancel","checkFlick","flick","meta","swiper","momentumX","momentumY","scrollTo","_dblclick","dblclickTrigged","lastClickTime","delay","resizeTimeout","pointerEvents","isBScrollContainer","wrapperOffset","scrollBy","extraTransform","isSilent","ignoreDisMoveForSamePos","scrollToElement","offsetX","offsetY","targetEle","getOffset","getPos","wrapperPos","scrollBehavior","xInBoundary","yInBoundary","enable","disable","propertiesConfig","sourceKey","BScroll","plugins","use","ctor","pluginName","plugin","pluginsMap","applyOrder","scroller","eventBubbling","handleAutoBlur","innerRefresh","proxy","applyPlugins","sort","a","applyOrderMap","item","activeElement","blur","lastKey","getProperty","temp","setProperty","propertiesProxy","eventRegister","MouseWheel","wheelStart","mouseWheelOpt","mouseWheel","deltaCache","registorEvent","hooksFn","registorHooks","eventRegistor","wheelEndTimer","wheelMoveTimer","hooksName","handlerFn","wheelHandler","wheelStartHandler","getWheelDelta","wheelMove","wheelStopDetactor","mousewheelStart","delayTime","mousewheelEnd","invert","wheelDeltaX","wheelDeltaY","deltaMode","wheelDelta","detail","directionX","directionY","cachedDelta","mousewheelMove","easeTime","getEaseTime","ObserveDOM","stopObserver","stopObserve","MutationObserver","observer","mutations","mutationObserverHandler","startObserve","checkDOMUpdate","shouldNotRefresh","immediateRefresh","deferredRefresh","mutation","observe","attributes","childList","subtree","outsideBoundaries","me","scrollIns","scrollerEl","scrollerRect","oldWidth","oldHeight","newWidth","newHeight","check","disconnect","propertiesProxyConfig","sourcePrefix","PullDown","pulling","pullDownRefresh","_watch","_checkPullDown","threshold","originalMinScrollY","minScrollY","finish","open","config","close","autoPull","propertiesProxyConfig$1","sourcePrefix$1","PullUp","bscroll","watching","pullUpLoad","_checkToEnd","movingDirectionY","maxScrollY","EventHandler","indicator","startEventRegister","_start","endEventRegister","_end","lastPoint","keysMap","pointPos","moveEventRegister","_move","Indicator","keyVals","sizeRatio","maxPos","initialSize","curPos","hooksHandlers","wrapperStyle","elStyle","_getKeysMap","fade","opacity","_listenHooks","interactive","bscrollHooks","translaterHooks","animaterHooks","_listen","updatePosAndSize","setTransitionTime","setTransitionTimingFunction","eventHandler","eventHandlerHooks","startHandler","moveHandler","endHandler","scrollerSize","maxScroll","_setShowBy","_refreshKeyValues","display","_refreshPosAndSizeValue","_refreshPosAndSizeStyle","posKey","sizeKey","newScrollPos","_calScrollDesPos","ScrollBar","indicators","scrollbar","_initIndicators","indicatorOption","scrolls","_createIndicatorElement","appendChild","scrollbarEl","indicatorEl","cssText","PagesPos","slideOpt","slideEl","scrollerIns","wrapperWidth","wrapperHeight","scrollerHeight","scrollerWidth","stepX","stepY","slideEls","querySelectorAll","pages","computePagePosInfoByEl","computePagePosInfo","xLen","yLen","hasInfo","getNearestPage","l","cx","cy","maxScrollPosX","maxScrollPosY","m","maxScrollX","PageInfo","currentPage","pagesPos","checkSlideLoop","changeCurrentPage","newPage","change2safePage","getInitPage","initPageX","loopX","initPageY","loopY","getRealPage","page","fixedPage","realPageLen","pageIndex","unshift","getPageSize","realPage2Page","lastX","lastY","firstX","firstY","realX","realY","nextPage","changedPageNum","prevPage","nearestPage","pageInfo","getLoopStage","needLoop","resetLoopPage","isSameWithCurrent","slideX","slideY","loop","propertiesConfig$1","sourcePrefix$2","Slide","resetLooping","isTouching","slide","willChangeToPage","lazyInitByRefresh","cloneSlideEleForLoop","shouldRefreshByWidth","setSlideWidth","shouldRefreshByHeight","setSlideHeight","shouldRefresh","scrollHooks","scrollerHooks","initSlideState","modifyScrollMetaHandler","amendCurrentPage","setTouchFlag","scrollMoving","listenFlick","flickHandler","slideWrapper","clearSlideWidth","clearSlideHeight","goTo","goToPage","getCurrentPage","triggerThreshold","thresholdX","thresholdY","initThreshold","initPage","slideThreshold","pageSize","firstChild","insertBefore","before","prepend","cloneNode","isScrollToBoundary","changePage","pageWillChangeTo","shouldSetWidthHeight","checkType","checkOption","slideItemWidth","newPageInfo","scrollEasing","posX","posY","getAnimateTime","scrollMeta","changeToPage","propertiesConfig$2","sourcePrefix$3","CONSTANTS","Wheel","wheel","normalizeOptions","tapIntoHooks","wheelTo","selectedIndex","items","adjustTime","findNearestValidWheel","wheelItemClass","validWheel","rotateX","checkWheelAllDisabled","itemHeight","minScrollX","getSelectedIndex","rotate","deg","currentIndex","cacheIndex","wheelDisabledItemClassName","wheelDisabledItemClass","wheelItemsAllDisabled","wheelWrapperClass","propertiesConfig$3","sourcePrefix$4","Zoom","scale","zoomOpt","zoom","lastTransformScale","scaleElement","scaleElementInitSize","initScrollBoundary","zoomStart","zooming","zoomEnd","zoomTo","originX","originY","_zoomTo","firstFinger","secondFinger","startDistance","getFingerDistance","startScale","origin","currentScale","scaleCure","lastScale","getNewPos","resetBoundaries","sqrt","fixInScaleLimit","extendValue","sideName","floor","fixInBound","pow","compatibleFeatures","duplicateClick","parentScroll","childScroll","nestedScroll","scrollsPair","parentScrollX","parentScrollY","childScrollX","childScrollY","oppositeScroll","hasHorizontalScroll","hasVerticalScroll","setupData","hasReachLeft","hasReachRight","hasReachTop","hasReachBottom","checkBeyondBoundary","NestedScroll","singleton","stores","setup","addHooks","appendBScroll","handleContainRelationship","handleCompatible","teardown","removeBScroll","__parentInfo","outerBS","outerBSWrapper","innerBS","innerBSWrapper","j","contains","currentDepths","calculateDepths","depth","pairs","availableBScrolls","pair","filter","bs","childNode","IndexCalculator","tombstoneHeight","lastDirection","lastPos","calculate","list","getDirection","calculateIndex","tombstone","ListItem","data","dom","DataManager","fetchFn","onFetchFinish","loadedNum","fetching","hasMore","update","addEmptyData","checkToFetch","add","fetch","newData","currentEnd","getList","Tombstone","cached","initialed","getSize","isTombstone","classList","getOne","tombstoneStyle","recycle","tombstones","tombstones_1","recycleOne","DomManager","renderFn","unusedDom","timers","collectUnusedDom","createDom","cacheHeight","positionDom","startDelta","endPos","tombstoneEles","getStartPos","timerId","i_1","originPos","removeTombstone","InfinityScroll","infinity","render","createTombstoneFn","createTombstone","indexCalculator","domManager","dataManager","updateDom"],"mappings":"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","file":"static/js/5.cf1ccb9c.chunk.js","sourcesContent":["import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.forceVisible = exports.forceCheck = exports.lazyload = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _reactDom = require('react-dom');\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _event = require('./utils/event');\n\nvar _scrollParent = require('./utils/scrollParent');\n\nvar _scrollParent2 = _interopRequireDefault(_scrollParent);\n\nvar _debounce = require('./utils/debounce');\n\nvar _debounce2 = _interopRequireDefault(_debounce);\n\nvar _throttle = require('./utils/throttle');\n\nvar _throttle2 = _interopRequireDefault(_throttle);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                * react-lazyload\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                */\n\n\nvar defaultBoundingClientRect = { top: 0, right: 0, bottom: 0, left: 0, width: 0, height: 0 };\nvar LISTEN_FLAG = 'data-lazyload-listened';\nvar listeners = [];\nvar pending = [];\n\n// try to handle passive events\nvar passiveEventSupported = false;\ntry {\n  var opts = Object.defineProperty({}, 'passive', {\n    get: function get() {\n      passiveEventSupported = true;\n    }\n  });\n  window.addEventListener('test', null, opts);\n} catch (e) {}\n// if they are supported, setup the optional params\n// IMPORTANT: FALSE doubles as the default CAPTURE value!\nvar passiveEvent = passiveEventSupported ? { capture: false, passive: true } : false;\n\n/**\n * Check if `component` is visible in overflow container `parent`\n * @param  {node} component React component\n * @param  {node} parent    component's scroll parent\n * @return {bool}\n */\nvar checkOverflowVisible = function checkOverflowVisible(component, parent) {\n  var node = _reactDom2.default.findDOMNode(component);\n  // const node = component.ref;\n\n  var parentTop = void 0;\n  var parentLeft = void 0;\n  var parentHeight = void 0;\n  var parentWidth = void 0;\n\n  try {\n    var _parent$getBoundingCl = parent.getBoundingClientRect();\n\n    parentTop = _parent$getBoundingCl.top;\n    parentLeft = _parent$getBoundingCl.left;\n    parentHeight = _parent$getBoundingCl.height;\n    parentWidth = _parent$getBoundingCl.width;\n  } catch (e) {\n    parentTop = defaultBoundingClientRect.top;\n    parentLeft = defaultBoundingClientRect.left;\n    parentHeight = defaultBoundingClientRect.height;\n    parentWidth = defaultBoundingClientRect.width;\n  }\n\n  var windowInnerHeight = window.innerHeight || document.documentElement.clientHeight;\n  var windowInnerWidth = window.innerWidth || document.documentElement.clientWidth;\n\n  // calculate top and height of the intersection of the element's scrollParent and viewport\n  var intersectionTop = Math.max(parentTop, 0); // intersection's top relative to viewport\n  var intersectionLeft = Math.max(parentLeft, 0); // intersection's left relative to viewport\n  var intersectionHeight = Math.min(windowInnerHeight, parentTop + parentHeight) - intersectionTop; // height\n  var intersectionWidth = Math.min(windowInnerWidth, parentLeft + parentWidth) - intersectionLeft; // width\n\n  // check whether the element is visible in the intersection\n  var top = void 0;\n  var left = void 0;\n  var height = void 0;\n  var width = void 0;\n\n  try {\n    var _node$getBoundingClie = node.getBoundingClientRect();\n\n    top = _node$getBoundingClie.top;\n    left = _node$getBoundingClie.left;\n    height = _node$getBoundingClie.height;\n    width = _node$getBoundingClie.width;\n  } catch (e) {\n    top = defaultBoundingClientRect.top;\n    left = defaultBoundingClientRect.left;\n    height = defaultBoundingClientRect.height;\n    width = defaultBoundingClientRect.width;\n  }\n\n  var offsetTop = top - intersectionTop; // element's top relative to intersection\n  var offsetLeft = left - intersectionLeft; // element's left relative to intersection\n\n  var offsets = Array.isArray(component.props.offset) ? component.props.offset : [component.props.offset, component.props.offset]; // Be compatible with previous API\n\n  return offsetTop - offsets[0] <= intersectionHeight && offsetTop + height + offsets[1] >= 0 && offsetLeft - offsets[0] <= intersectionWidth && offsetLeft + width + offsets[1] >= 0;\n};\n\n/**\n * Check if `component` is visible in document\n * @param  {node} component React component\n * @return {bool}\n */\nvar checkNormalVisible = function checkNormalVisible(component) {\n  var node = _reactDom2.default.findDOMNode(component);\n  // const node = component.ref;\n\n  // If this element is hidden by css rules somehow, it's definitely invisible\n  if (!(node.offsetWidth || node.offsetHeight || node.getClientRects().length)) return false;\n\n  var top = void 0;\n  var elementHeight = void 0;\n\n  try {\n    var _node$getBoundingClie2 = node.getBoundingClientRect();\n\n    top = _node$getBoundingClie2.top;\n    elementHeight = _node$getBoundingClie2.height;\n  } catch (e) {\n    top = defaultBoundingClientRect.top;\n    elementHeight = defaultBoundingClientRect.height;\n  }\n\n  var windowInnerHeight = window.innerHeight || document.documentElement.clientHeight;\n\n  var offsets = Array.isArray(component.props.offset) ? component.props.offset : [component.props.offset, component.props.offset]; // Be compatible with previous API\n\n  return top - offsets[0] <= windowInnerHeight && top + elementHeight + offsets[1] >= 0;\n};\n\n/**\n * Detect if element is visible in viewport, if so, set `visible` state to true.\n * If `once` prop is provided true, remove component as listener after checkVisible\n *\n * @param  {React} component   React component that respond to scroll and resize\n */\nvar checkVisible = function checkVisible(component) {\n  var node = _reactDom2.default.findDOMNode(component);\n  // const node = component.ref;\n  if (!(node instanceof HTMLElement)) {\n    return;\n  }\n\n  var parent = (0, _scrollParent2.default)(node);\n  var isOverflow = component.props.overflow && parent !== node.ownerDocument && parent !== document && parent !== document.documentElement;\n  var visible = isOverflow ? checkOverflowVisible(component, parent) : checkNormalVisible(component);\n  if (visible) {\n    // Avoid extra render if previously is visible\n    if (!component.visible) {\n      if (component.props.once) {\n        pending.push(component);\n      }\n\n      component.visible = true;\n      component.forceUpdate();\n    }\n  } else if (!(component.props.once && component.visible)) {\n    component.visible = false;\n    if (component.props.unmountIfInvisible) {\n      component.forceUpdate();\n    }\n  }\n};\n\nvar purgePending = function purgePending() {\n  pending.forEach(function (component) {\n    var index = listeners.indexOf(component);\n    if (index !== -1) {\n      listeners.splice(index, 1);\n    }\n  });\n\n  pending = [];\n};\n\nvar lazyLoadHandler = function lazyLoadHandler() {\n  for (var i = 0; i < listeners.length; ++i) {\n    var listener = listeners[i];\n    checkVisible(listener);\n  }\n  // Remove `once` component in listeners\n  purgePending();\n};\n\n/**\n * Forces the component to display regardless of whether the element is visible in the viewport.\n */\nvar forceVisible = function forceVisible() {\n  for (var i = 0; i < listeners.length; ++i) {\n    var listener = listeners[i];\n    listener.visible = true;\n    listener.forceUpdate();\n  }\n  // Remove `once` component in listeners\n  purgePending();\n};\n\n// Depending on component's props\nvar delayType = void 0;\nvar finalLazyLoadHandler = null;\n\nvar isString = function isString(string) {\n  return typeof string === 'string';\n};\n\nvar LazyLoad = function (_Component) {\n  _inherits(LazyLoad, _Component);\n\n  function LazyLoad(props) {\n    _classCallCheck(this, LazyLoad);\n\n    var _this = _possibleConstructorReturn(this, (LazyLoad.__proto__ || Object.getPrototypeOf(LazyLoad)).call(this, props));\n\n    _this.visible = false;\n    // this.setRef = this.setRef.bind(this);\n    return _this;\n  }\n\n  // setRef(element) {\n  //   if (element) {\n  //     this.ref = element;\n  //   }\n  // }\n\n  _createClass(LazyLoad, [{\n    key: 'componentDidMount',\n    value: function componentDidMount() {\n      // It's unlikely to change delay type on the fly, this is mainly\n      // designed for tests\n      var scrollport = window;\n      var scrollContainer = this.props.scrollContainer;\n\n      if (scrollContainer) {\n        if (isString(scrollContainer)) {\n          scrollport = scrollport.document.querySelector(scrollContainer);\n        }\n      }\n      var needResetFinalLazyLoadHandler = this.props.debounce !== undefined && delayType === 'throttle' || delayType === 'debounce' && this.props.debounce === undefined;\n\n      if (needResetFinalLazyLoadHandler) {\n        (0, _event.off)(scrollport, 'scroll', finalLazyLoadHandler, passiveEvent);\n        (0, _event.off)(window, 'resize', finalLazyLoadHandler, passiveEvent);\n        finalLazyLoadHandler = null;\n      }\n\n      if (!finalLazyLoadHandler) {\n        if (this.props.debounce !== undefined) {\n          finalLazyLoadHandler = (0, _debounce2.default)(lazyLoadHandler, typeof this.props.debounce === 'number' ? this.props.debounce : 300);\n          delayType = 'debounce';\n        } else if (this.props.throttle !== undefined) {\n          finalLazyLoadHandler = (0, _throttle2.default)(lazyLoadHandler, typeof this.props.throttle === 'number' ? this.props.throttle : 300);\n          delayType = 'throttle';\n        } else {\n          finalLazyLoadHandler = lazyLoadHandler;\n        }\n      }\n\n      if (this.props.overflow) {\n        var parent = (0, _scrollParent2.default)(_reactDom2.default.findDOMNode(this));\n        // const parent = scrollParent(this.ref);\n        if (parent && typeof parent.getAttribute === 'function') {\n          var listenerCount = 1 + +parent.getAttribute(LISTEN_FLAG);\n          if (listenerCount === 1) {\n            parent.addEventListener('scroll', finalLazyLoadHandler, passiveEvent);\n          }\n          parent.setAttribute(LISTEN_FLAG, listenerCount);\n        }\n      } else if (listeners.length === 0 || needResetFinalLazyLoadHandler) {\n        var _props = this.props,\n            scroll = _props.scroll,\n            resize = _props.resize;\n\n\n        if (scroll) {\n          (0, _event.on)(scrollport, 'scroll', finalLazyLoadHandler, passiveEvent);\n        }\n\n        if (resize) {\n          (0, _event.on)(window, 'resize', finalLazyLoadHandler, passiveEvent);\n        }\n      }\n\n      listeners.push(this);\n      checkVisible(this);\n    }\n  }, {\n    key: 'shouldComponentUpdate',\n    value: function shouldComponentUpdate() {\n      return this.visible;\n    }\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      if (this.props.overflow) {\n        var parent = (0, _scrollParent2.default)(_reactDom2.default.findDOMNode(this));\n        // const parent = scrollParent(this.ref);\n        if (parent && typeof parent.getAttribute === 'function') {\n          var listenerCount = +parent.getAttribute(LISTEN_FLAG) - 1;\n          if (listenerCount === 0) {\n            parent.removeEventListener('scroll', finalLazyLoadHandler, passiveEvent);\n            parent.removeAttribute(LISTEN_FLAG);\n          } else {\n            parent.setAttribute(LISTEN_FLAG, listenerCount);\n          }\n        }\n      }\n\n      var index = listeners.indexOf(this);\n      if (index !== -1) {\n        listeners.splice(index, 1);\n      }\n\n      if (listeners.length === 0 && typeof window !== 'undefined') {\n        (0, _event.off)(window, 'resize', finalLazyLoadHandler, passiveEvent);\n        (0, _event.off)(window, 'scroll', finalLazyLoadHandler, passiveEvent);\n      }\n    }\n  }, {\n    key: 'render',\n    value: function render() {\n      return this.visible ? this.props.children : this.props.placeholder ? this.props.placeholder : _react2.default.createElement('div', { style: { height: this.props.height }, className: 'lazyload-placeholder' });\n      // <span ref={this.setRef} className=\"lazyload-custom-placeholder\">\n      //   {this.props.placeholder}\n      // </span> :\n      // <div ref={this.setRef} style={{ height: this.props.height }} className=\"lazyload-placeholder\" />;\n    }\n  }]);\n\n  return LazyLoad;\n}(_react.Component);\n\nLazyLoad.propTypes = {\n  once: _propTypes2.default.bool,\n  height: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.string]),\n  offset: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.arrayOf(_propTypes2.default.number)]),\n  overflow: _propTypes2.default.bool,\n  resize: _propTypes2.default.bool,\n  scroll: _propTypes2.default.bool,\n  children: _propTypes2.default.node,\n  throttle: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.bool]),\n  debounce: _propTypes2.default.oneOfType([_propTypes2.default.number, _propTypes2.default.bool]),\n  placeholder: _propTypes2.default.node,\n  scrollContainer: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.object]),\n  unmountIfInvisible: _propTypes2.default.bool\n};\n\nLazyLoad.defaultProps = {\n  once: false,\n  offset: 0,\n  overflow: false,\n  resize: false,\n  scroll: true,\n  unmountIfInvisible: false\n};\n\nvar getDisplayName = function getDisplayName(WrappedComponent) {\n  return WrappedComponent.displayName || WrappedComponent.name || 'Component';\n};\n\nvar decorator = function decorator() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  return function lazyload(WrappedComponent) {\n    return function (_Component2) {\n      _inherits(LazyLoadDecorated, _Component2);\n\n      function LazyLoadDecorated() {\n        _classCallCheck(this, LazyLoadDecorated);\n\n        var _this2 = _possibleConstructorReturn(this, (LazyLoadDecorated.__proto__ || Object.getPrototypeOf(LazyLoadDecorated)).call(this));\n\n        _this2.displayName = 'LazyLoad' + getDisplayName(WrappedComponent);\n        return _this2;\n      }\n\n      _createClass(LazyLoadDecorated, [{\n        key: 'render',\n        value: function render() {\n          return _react2.default.createElement(\n            LazyLoad,\n            options,\n            _react2.default.createElement(WrappedComponent, this.props)\n          );\n        }\n      }]);\n\n      return LazyLoadDecorated;\n    }(_react.Component);\n  };\n};\n\nexports.lazyload = decorator;\nexports.default = LazyLoad;\nexports.forceCheck = lazyLoadHandler;\nexports.forceVisible = forceVisible;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.on = on;\nexports.off = off;\nfunction on(el, eventName, callback, opts) {\n  opts = opts || false;\n  if (el.addEventListener) {\n    el.addEventListener(eventName, callback, opts);\n  } else if (el.attachEvent) {\n    el.attachEvent(\"on\" + eventName, function (e) {\n      callback.call(el, e || window.event);\n    });\n  }\n}\n\nfunction off(el, eventName, callback, opts) {\n  opts = opts || false;\n  if (el.removeEventListener) {\n    el.removeEventListener(eventName, callback, opts);\n  } else if (el.detachEvent) {\n    el.detachEvent(\"on\" + eventName, callback);\n  }\n}","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\n/**\n * @fileOverview Find scroll parent\n */\n\nexports.default = function (node) {\n  if (!(node instanceof HTMLElement)) {\n    return document.documentElement;\n  }\n\n  var excludeStaticParent = node.style.position === 'absolute';\n  var overflowRegex = /(scroll|auto)/;\n  var parent = node;\n\n  while (parent) {\n    if (!parent.parentNode) {\n      return node.ownerDocument || document.documentElement;\n    }\n\n    var style = window.getComputedStyle(parent);\n    var position = style.position;\n    var overflow = style.overflow;\n    var overflowX = style['overflow-x'];\n    var overflowY = style['overflow-y'];\n\n    if (position === 'static' && excludeStaticParent) {\n      parent = parent.parentNode;\n      continue;\n    }\n\n    if (overflowRegex.test(overflow) && overflowRegex.test(overflowX) && overflowRegex.test(overflowY)) {\n      return parent;\n    }\n\n    parent = parent.parentNode;\n  }\n\n  return node.ownerDocument || node.documentElement || document.documentElement;\n};","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = debounce;\nfunction debounce(func, wait, immediate) {\n  var timeout = void 0;\n  var args = void 0;\n  var context = void 0;\n  var timestamp = void 0;\n  var result = void 0;\n\n  var later = function later() {\n    var last = +new Date() - timestamp;\n\n    if (last < wait && last >= 0) {\n      timeout = setTimeout(later, wait - last);\n    } else {\n      timeout = null;\n      if (!immediate) {\n        result = func.apply(context, args);\n        if (!timeout) {\n          context = null;\n          args = null;\n        }\n      }\n    }\n  };\n\n  return function debounced() {\n    context = this;\n    args = arguments;\n    timestamp = +new Date();\n\n    var callNow = immediate && !timeout;\n    if (!timeout) {\n      timeout = setTimeout(later, wait);\n    }\n\n    if (callNow) {\n      result = func.apply(context, args);\n      context = null;\n      args = null;\n    }\n\n    return result;\n  };\n}","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = throttle;\n/*eslint-disable */\nfunction throttle(fn, threshhold, scope) {\n  threshhold || (threshhold = 250);\n  var last, deferTimer;\n  return function () {\n    var context = scope || this;\n\n    var now = +new Date(),\n        args = arguments;\n    if (last && now < last + threshhold) {\n      // hold on to it\n      clearTimeout(deferTimer);\n      deferTimer = setTimeout(function () {\n        last = now;\n        fn.apply(context, args);\n      }, threshhold);\n    } else {\n      last = now;\n      fn.apply(context, args);\n    }\n  };\n}","/*!\n * better-scroll / better-scroll\n * (c) 2016-2020 ustbhuangyi\n * Released under the MIT License.\n */\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nfunction __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\n\nfunction warn(msg) {\r\n    console.error(\"[BScroll warn]: \" + msg);\r\n}\n\n// ssr support\r\nvar inBrowser = typeof window !== 'undefined';\r\nvar ua = inBrowser && navigator.userAgent.toLowerCase();\r\nvar isWeChatDevTools = ua && /wechatdevtools/.test(ua);\r\nvar isAndroid = ua && ua.indexOf('android') > 0;\n\nfunction getNow() {\r\n    return window.performance && window.performance.now && window.performance.timing\r\n        ? window.performance.now() + window.performance.timing.navigationStart\r\n        : +new Date();\r\n}\r\nfunction extend(target) {\r\n    var rest = [];\r\n    for (var _i = 1; _i < arguments.length; _i++) {\r\n        rest[_i - 1] = arguments[_i];\r\n    }\r\n    for (var i = 0; i < rest.length; i++) {\r\n        var source = rest[i];\r\n        for (var key in source) {\r\n            target[key] = source[key];\r\n        }\r\n    }\r\n    return target;\r\n}\r\nfunction isUndef(v) {\r\n    return v === undefined || v === null;\r\n}\r\nfunction isPlainObject(v) {\r\n    return typeof v === 'object' && v !== null;\r\n}\r\nfunction getDistance(x, y) {\r\n    return Math.sqrt(x * x + y * y);\r\n}\r\nfunction fixInboundValue(x, min, max) {\r\n    if (x < min) {\r\n        return min;\r\n    }\r\n    if (x > max) {\r\n        return max;\r\n    }\r\n    return x;\r\n}\n\nvar elementStyle = (inBrowser &&\r\n    document.createElement('div').style);\r\nvar vendor = (function () {\r\n    if (!inBrowser) {\r\n        return false;\r\n    }\r\n    var transformNames = {\r\n        webkit: 'webkitTransform',\r\n        Moz: 'MozTransform',\r\n        O: 'OTransform',\r\n        ms: 'msTransform',\r\n        standard: 'transform'\r\n    };\r\n    for (var key in transformNames) {\r\n        if (elementStyle[transformNames[key]] !== undefined) {\r\n            return key;\r\n        }\r\n    }\r\n    return false;\r\n})();\r\nfunction prefixStyle(style) {\r\n    if (vendor === false) {\r\n        return style;\r\n    }\r\n    if (vendor === 'standard') {\r\n        if (style === 'transitionEnd') {\r\n            return 'transitionend';\r\n        }\r\n        return style;\r\n    }\r\n    return vendor + style.charAt(0).toUpperCase() + style.substr(1);\r\n}\r\nfunction getElement(el) {\r\n    return (typeof el === 'string'\r\n        ? document.querySelector(el)\r\n        : el);\r\n}\r\nfunction addEvent(el, type, fn, capture) {\r\n    el.addEventListener(type, fn, {\r\n        passive: false,\r\n        capture: !!capture\r\n    });\r\n}\r\nfunction removeEvent(el, type, fn, capture) {\r\n    el.removeEventListener(type, fn, {\r\n        capture: !!capture\r\n    });\r\n}\r\nfunction offset(el) {\r\n    var left = 0;\r\n    var top = 0;\r\n    while (el) {\r\n        left -= el.offsetLeft;\r\n        top -= el.offsetTop;\r\n        el = el.offsetParent;\r\n    }\r\n    return {\r\n        left: left,\r\n        top: top\r\n    };\r\n}\r\nfunction offsetToBody(el) {\r\n    var rect = el.getBoundingClientRect();\r\n    return {\r\n        left: -(rect.left + window.pageXOffset),\r\n        top: -(rect.top + window.pageYOffset)\r\n    };\r\n}\r\nvar cssVendor = vendor && vendor !== 'standard' ? '-' + vendor.toLowerCase() + '-' : '';\r\nvar transform = prefixStyle('transform');\r\nvar transition = prefixStyle('transition');\r\nvar hasPerspective = inBrowser && prefixStyle('perspective') in elementStyle;\r\n// fix issue #361\r\nvar hasTouch = inBrowser && ('ontouchstart' in window || isWeChatDevTools);\r\nvar hasTransition = inBrowser && transition in elementStyle;\r\nvar style = {\r\n    transform: transform,\r\n    transition: transition,\r\n    transitionTimingFunction: prefixStyle('transitionTimingFunction'),\r\n    transitionDuration: prefixStyle('transitionDuration'),\r\n    transitionDelay: prefixStyle('transitionDelay'),\r\n    transformOrigin: prefixStyle('transformOrigin'),\r\n    transitionEnd: prefixStyle('transitionEnd')\r\n};\r\nvar eventTypeMap = {\r\n    touchstart: 1,\r\n    touchmove: 1,\r\n    touchend: 1,\r\n    mousedown: 2,\r\n    mousemove: 2,\r\n    mouseup: 2\r\n};\r\nfunction getRect(el) {\r\n    if (el instanceof window.SVGElement) {\r\n        var rect = el.getBoundingClientRect();\r\n        return {\r\n            top: rect.top,\r\n            left: rect.left,\r\n            width: rect.width,\r\n            height: rect.height\r\n        };\r\n    }\r\n    else {\r\n        return {\r\n            top: el.offsetTop,\r\n            left: el.offsetLeft,\r\n            width: el.offsetWidth,\r\n            height: el.offsetHeight\r\n        };\r\n    }\r\n}\r\nfunction preventDefaultExceptionFn(el, exceptions) {\r\n    for (var i in exceptions) {\r\n        if (exceptions[i].test(el[i])) {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\nvar tagExceptionFn = preventDefaultExceptionFn;\r\nfunction tap(e, eventName) {\r\n    var ev = document.createEvent('Event');\r\n    ev.initEvent(eventName, true, true);\r\n    ev.pageX = e.pageX;\r\n    ev.pageY = e.pageY;\r\n    e.target.dispatchEvent(ev);\r\n}\r\nfunction click(e, event) {\r\n    if (event === void 0) { event = 'click'; }\r\n    var eventSource;\r\n    if (e.type === 'mouseup') {\r\n        eventSource = e;\r\n    }\r\n    else if (e.type === 'touchend' || e.type === 'touchcancel') {\r\n        eventSource = e.changedTouches[0];\r\n    }\r\n    var posSrc = {};\r\n    if (eventSource) {\r\n        posSrc.screenX = eventSource.screenX || 0;\r\n        posSrc.screenY = eventSource.screenY || 0;\r\n        posSrc.clientX = eventSource.clientX || 0;\r\n        posSrc.clientY = eventSource.clientY || 0;\r\n    }\r\n    var ev;\r\n    var bubbles = true;\r\n    var cancelable = true;\r\n    if (typeof MouseEvent !== 'undefined') {\r\n        try {\r\n            ev = new MouseEvent(event, extend({\r\n                bubbles: bubbles,\r\n                cancelable: cancelable\r\n            }, posSrc));\r\n        }\r\n        catch (e) {\r\n            createEvent();\r\n        }\r\n    }\r\n    else {\r\n        createEvent();\r\n    }\r\n    function createEvent() {\r\n        ev = document.createEvent('Event');\r\n        ev.initEvent(event, bubbles, cancelable);\r\n        extend(ev, posSrc);\r\n    }\r\n    // forwardedTouchEvent set to true in case of the conflict with fastclick\r\n    ev.forwardedTouchEvent = true;\r\n    ev._constructed = true;\r\n    e.target.dispatchEvent(ev);\r\n}\r\nfunction dblclick(e) {\r\n    click(e, 'dblclick');\r\n}\r\nfunction prepend(el, target) {\r\n    var firstChild = target.firstChild;\r\n    if (firstChild) {\r\n        before(el, firstChild);\r\n    }\r\n    else {\r\n        target.appendChild(el);\r\n    }\r\n}\r\nfunction before(el, target) {\r\n    target.parentNode.insertBefore(el, target);\r\n}\r\nfunction removeChild(el, child) {\r\n    el.removeChild(child);\r\n}\r\nfunction hasClass(el, className) {\r\n    var reg = new RegExp('(^|\\\\s)' + className + '(\\\\s|$)');\r\n    return reg.test(el.className);\r\n}\n\nvar ease = {\r\n    // easeOutQuint\r\n    swipe: {\r\n        style: 'cubic-bezier(0.23, 1, 0.32, 1)',\r\n        fn: function (t) {\r\n            return 1 + --t * t * t * t * t;\r\n        }\r\n    },\r\n    // easeOutQuard\r\n    swipeBounce: {\r\n        style: 'cubic-bezier(0.25, 0.46, 0.45, 0.94)',\r\n        fn: function (t) {\r\n            return t * (2 - t);\r\n        }\r\n    },\r\n    // easeOutQuart\r\n    bounce: {\r\n        style: 'cubic-bezier(0.165, 0.84, 0.44, 1)',\r\n        fn: function (t) {\r\n            return 1 - --t * t * t * t;\r\n        }\r\n    }\r\n};\n\nvar DEFAULT_INTERVAL = 100 / 60;\r\nvar windowCompat = inBrowser && window;\r\nfunction noop() { }\r\nvar requestAnimationFrame = (function () {\r\n    if (!inBrowser) {\r\n        /* istanbul ignore if */\r\n        return noop;\r\n    }\r\n    return (windowCompat.requestAnimationFrame ||\r\n        windowCompat.webkitRequestAnimationFrame ||\r\n        windowCompat.mozRequestAnimationFrame ||\r\n        windowCompat.oRequestAnimationFrame ||\r\n        // if all else fails, use setTimeout\r\n        function (callback) {\r\n            return window.setTimeout(callback, (callback.interval || DEFAULT_INTERVAL) / 2); // make interval as precise as possible.\r\n        });\r\n})();\r\nvar cancelAnimationFrame = (function () {\r\n    if (!inBrowser) {\r\n        /* istanbul ignore if */\r\n        return noop;\r\n    }\r\n    return (windowCompat.cancelAnimationFrame ||\r\n        windowCompat.webkitCancelAnimationFrame ||\r\n        windowCompat.mozCancelAnimationFrame ||\r\n        windowCompat.oCancelAnimationFrame ||\r\n        function (id) {\r\n            window.clearTimeout(id);\r\n        });\r\n})();\n\nvar noop$1 = function (val) { };\r\nvar sharedPropertyDefinition = {\r\n    enumerable: true,\r\n    configurable: true,\r\n    get: noop$1,\r\n    set: noop$1\r\n};\r\nvar getProperty = function (obj, key) {\r\n    var keys = key.split('.');\r\n    for (var i = 0; i < keys.length - 1; i++) {\r\n        obj = obj[keys[i]];\r\n        if (typeof obj !== 'object' || !obj)\r\n            return;\r\n    }\r\n    var lastKey = keys.pop();\r\n    if (typeof obj[lastKey] === 'function') {\r\n        return function () {\r\n            return obj[lastKey].apply(obj, arguments);\r\n        };\r\n    }\r\n    else {\r\n        return obj[lastKey];\r\n    }\r\n};\r\nvar setProperty = function (obj, key, value) {\r\n    var keys = key.split('.');\r\n    var temp;\r\n    for (var i = 0; i < keys.length - 1; i++) {\r\n        temp = keys[i];\r\n        if (!obj[temp])\r\n            obj[temp] = {};\r\n        obj = obj[temp];\r\n    }\r\n    obj[keys.pop()] = value;\r\n};\r\nfunction propertiesProxy(target, sourceKey, key) {\r\n    sharedPropertyDefinition.get = function proxyGetter() {\r\n        return getProperty(this, sourceKey);\r\n    };\r\n    sharedPropertyDefinition.set = function proxySetter(val) {\r\n        setProperty(this, sourceKey, val);\r\n    };\r\n    Object.defineProperty(target, key, sharedPropertyDefinition);\r\n}\n\nvar EventEmitter = /** @class */ (function () {\r\n    function EventEmitter(names) {\r\n        this.events = {};\r\n        this.eventTypes = {};\r\n        this.registerType(names);\r\n    }\r\n    EventEmitter.prototype.on = function (type, fn, context) {\r\n        if (context === void 0) { context = this; }\r\n        this.hasType(type);\r\n        if (!this.events[type]) {\r\n            this.events[type] = [];\r\n        }\r\n        this.events[type].push([fn, context]);\r\n        return this;\r\n    };\r\n    EventEmitter.prototype.once = function (type, fn, context) {\r\n        var _this = this;\r\n        if (context === void 0) { context = this; }\r\n        this.hasType(type);\r\n        var magic = function () {\r\n            var args = [];\r\n            for (var _i = 0; _i < arguments.length; _i++) {\r\n                args[_i] = arguments[_i];\r\n            }\r\n            _this.off(type, magic);\r\n            fn.apply(context, args);\r\n        };\r\n        magic.fn = fn;\r\n        this.on(type, magic);\r\n        return this;\r\n    };\r\n    EventEmitter.prototype.off = function (type, fn) {\r\n        if (!type && !fn) {\r\n            this.events = {};\r\n            return this;\r\n        }\r\n        if (type) {\r\n            this.hasType(type);\r\n            if (!fn) {\r\n                this.events[type] = [];\r\n                return this;\r\n            }\r\n            var events = this.events[type];\r\n            if (!events) {\r\n                return this;\r\n            }\r\n            var count = events.length;\r\n            while (count--) {\r\n                if (events[count][0] === fn ||\r\n                    (events[count][0] && events[count][0].fn === fn)) {\r\n                    events.splice(count, 1);\r\n                }\r\n            }\r\n            return this;\r\n        }\r\n    };\r\n    EventEmitter.prototype.trigger = function (type) {\r\n        var args = [];\r\n        for (var _i = 1; _i < arguments.length; _i++) {\r\n            args[_i - 1] = arguments[_i];\r\n        }\r\n        this.hasType(type);\r\n        var events = this.events[type];\r\n        if (!events) {\r\n            return;\r\n        }\r\n        var len = events.length;\r\n        var eventsCopy = events.slice();\r\n        var ret;\r\n        for (var i = 0; i < len; i++) {\r\n            var event_1 = eventsCopy[i];\r\n            var fn = event_1[0], context = event_1[1];\r\n            if (fn) {\r\n                ret = fn.apply(context, args);\r\n                if (ret === true) {\r\n                    return ret;\r\n                }\r\n            }\r\n        }\r\n    };\r\n    EventEmitter.prototype.registerType = function (names) {\r\n        var _this = this;\r\n        names.forEach(function (type) {\r\n            _this.eventTypes[type] = type;\r\n        });\r\n    };\r\n    EventEmitter.prototype.destroy = function () {\r\n        this.events = {};\r\n        this.eventTypes = {};\r\n    };\r\n    EventEmitter.prototype.hasType = function (type) {\r\n        var types = this.eventTypes;\r\n        var isType = types[type] === type;\r\n        if (!isType) {\r\n            warn(\"EventEmitter has used unknown event type: \\\"\" + type + \"\\\", should be oneof [\" +\r\n                (\"\" + Object.keys(types).map(function (_) { return JSON.stringify(_); })) +\r\n                \"]\");\r\n        }\r\n    };\r\n    return EventEmitter;\r\n}());\r\nvar EventRegister = /** @class */ (function () {\r\n    function EventRegister(wrapper, events) {\r\n        this.wrapper = wrapper;\r\n        this.events = events;\r\n        this.addDOMEvents();\r\n    }\r\n    EventRegister.prototype.destroy = function () {\r\n        this.removeDOMEvents();\r\n        this.events = [];\r\n    };\r\n    EventRegister.prototype.addDOMEvents = function () {\r\n        this.handleDOMEvents(addEvent);\r\n    };\r\n    EventRegister.prototype.removeDOMEvents = function () {\r\n        this.handleDOMEvents(removeEvent);\r\n    };\r\n    EventRegister.prototype.handleDOMEvents = function (eventOperation) {\r\n        var _this = this;\r\n        var wrapper = this.wrapper;\r\n        this.events.forEach(function (event) {\r\n            eventOperation(wrapper, event.name, _this, !!event.capture);\r\n        });\r\n    };\r\n    EventRegister.prototype.handleEvent = function (e) {\r\n        var eventType = e.type;\r\n        this.events.some(function (event) {\r\n            if (event.name === eventType) {\r\n                event.handler(e);\r\n                return true;\r\n            }\r\n            return false;\r\n        });\r\n    };\r\n    return EventRegister;\r\n}());\n\nvar Options = /** @class */ (function () {\r\n    function Options() {\r\n        this.startX = 0;\r\n        this.startY = 0;\r\n        this.scrollX = false;\r\n        this.scrollY = true;\r\n        this.freeScroll = false;\r\n        this.directionLockThreshold = 5;\r\n        this.eventPassthrough = \"\" /* None */;\r\n        this.click = false;\r\n        this.dblclick = false;\r\n        this.tap = '';\r\n        this.bounce = {\r\n            top: true,\r\n            bottom: true,\r\n            left: true,\r\n            right: true\r\n        };\r\n        this.bounceTime = 800;\r\n        this.momentum = true;\r\n        this.momentumLimitTime = 300;\r\n        this.momentumLimitDistance = 15;\r\n        this.swipeTime = 2500;\r\n        this.swipeBounceTime = 500;\r\n        this.deceleration = 0.0015;\r\n        this.flickLimitTime = 200;\r\n        this.flickLimitDistance = 100;\r\n        this.resizePolling = 60;\r\n        this.probeType = 0 /* Default */;\r\n        this.stopPropagation = false;\r\n        this.preventDefault = true;\r\n        this.preventDefaultException = {\r\n            tagName: /^(INPUT|TEXTAREA|BUTTON|SELECT|AUDIO)$/\r\n        };\r\n        this.tagException = {\r\n            tagName: /^TEXTAREA$/\r\n        };\r\n        this.HWCompositing = true;\r\n        this.useTransition = true;\r\n        this.bindToWrapper = false;\r\n        this.disableMouse = hasTouch;\r\n        this.disableTouch = !hasTouch;\r\n        this.autoBlur = true;\r\n    }\r\n    Options.prototype.merge = function (options) {\r\n        if (!options)\r\n            return this;\r\n        for (var key in options) {\r\n            this[key] = options[key];\r\n        }\r\n        return this;\r\n    };\r\n    Options.prototype.process = function () {\r\n        this.translateZ =\r\n            this.HWCompositing && hasPerspective ? ' translateZ(0)' : '';\r\n        this.useTransition = this.useTransition && hasTransition;\r\n        this.preventDefault = !this.eventPassthrough && this.preventDefault;\r\n        this.resolveBounce();\r\n        // If you want eventPassthrough I have to lock one of the axes\r\n        this.scrollX =\r\n            this.eventPassthrough === \"horizontal\" /* Horizontal */\r\n                ? false\r\n                : this.scrollX;\r\n        this.scrollY =\r\n            this.eventPassthrough === \"vertical\" /* Vertical */ ? false : this.scrollY;\r\n        // With eventPassthrough we also need lockDirection mechanism\r\n        this.freeScroll = this.freeScroll && !this.eventPassthrough;\r\n        // force true when freeScroll is true\r\n        this.scrollX = this.freeScroll ? true : this.scrollX;\r\n        this.scrollY = this.freeScroll ? true : this.scrollY;\r\n        this.directionLockThreshold = this.eventPassthrough\r\n            ? 0\r\n            : this.directionLockThreshold;\r\n        return this;\r\n    };\r\n    Options.prototype.resolveBounce = function () {\r\n        var directions = ['top', 'right', 'bottom', 'left'];\r\n        var bounce = this.bounce;\r\n        if (bounce === false || bounce === true) {\r\n            this.bounce = makeMap(directions, bounce);\r\n        }\r\n    };\r\n    return Options;\r\n}());\r\nfunction makeMap(keys, val) {\r\n    if (val === void 0) { val = true; }\r\n    var ret = {};\r\n    keys.forEach(function (key) {\r\n        ret[key] = val;\r\n    });\r\n    return ret;\r\n}\n\nvar ActionsHandler = /** @class */ (function () {\r\n    function ActionsHandler(wrapper, options) {\r\n        this.wrapper = wrapper;\r\n        this.options = options;\r\n        this.hooks = new EventEmitter([\r\n            'beforeStart',\r\n            'start',\r\n            'move',\r\n            'end',\r\n            'click'\r\n        ]);\r\n        this.handleDOMEvents();\r\n    }\r\n    ActionsHandler.prototype.handleDOMEvents = function () {\r\n        var _a = this.options, bindToWrapper = _a.bindToWrapper, disableMouse = _a.disableMouse, disableTouch = _a.disableTouch, click = _a.click;\r\n        var wrapper = this.wrapper;\r\n        var target = bindToWrapper ? wrapper : window;\r\n        var wrapperEvents = [];\r\n        var targetEvents = [];\r\n        var shouldRegisterTouch = hasTouch && !disableTouch;\r\n        var shouldRegisterMouse = !disableMouse;\r\n        if (click) {\r\n            wrapperEvents.push({\r\n                name: 'click',\r\n                handler: this.click.bind(this),\r\n                capture: true\r\n            });\r\n        }\r\n        if (shouldRegisterTouch) {\r\n            wrapperEvents.push({\r\n                name: 'touchstart',\r\n                handler: this.start.bind(this)\r\n            });\r\n            targetEvents.push({\r\n                name: 'touchmove',\r\n                handler: this.move.bind(this)\r\n            }, {\r\n                name: 'touchend',\r\n                handler: this.end.bind(this)\r\n            }, {\r\n                name: 'touchcancel',\r\n                handler: this.end.bind(this)\r\n            });\r\n        }\r\n        if (shouldRegisterMouse) {\r\n            wrapperEvents.push({\r\n                name: 'mousedown',\r\n                handler: this.start.bind(this)\r\n            });\r\n            targetEvents.push({\r\n                name: 'mousemove',\r\n                handler: this.move.bind(this)\r\n            }, {\r\n                name: 'mouseup',\r\n                handler: this.end.bind(this)\r\n            });\r\n        }\r\n        this.wrapperEventRegister = new EventRegister(wrapper, wrapperEvents);\r\n        this.targetEventRegister = new EventRegister(target, targetEvents);\r\n    };\r\n    ActionsHandler.prototype.beforeHandler = function (e, type) {\r\n        var _a = this.options, preventDefault = _a.preventDefault, stopPropagation = _a.stopPropagation, preventDefaultException = _a.preventDefaultException;\r\n        var preventDefaultConditions = {\r\n            start: function () {\r\n                return (preventDefault &&\r\n                    !preventDefaultExceptionFn(e.target, preventDefaultException));\r\n            },\r\n            end: function () {\r\n                return (preventDefault &&\r\n                    !preventDefaultExceptionFn(e.target, preventDefaultException));\r\n            },\r\n            move: function () {\r\n                return preventDefault;\r\n            }\r\n        };\r\n        if (preventDefaultConditions[type]()) {\r\n            e.preventDefault();\r\n        }\r\n        if (stopPropagation) {\r\n            e.stopPropagation();\r\n        }\r\n    };\r\n    ActionsHandler.prototype.setInitiated = function (type) {\r\n        if (type === void 0) { type = 0; }\r\n        this.initiated = type;\r\n    };\r\n    ActionsHandler.prototype.start = function (e) {\r\n        var _eventType = eventTypeMap[e.type];\r\n        if (this.initiated && this.initiated !== _eventType) {\r\n            return;\r\n        }\r\n        this.setInitiated(_eventType);\r\n        // if textarea or other html tags in options.tagException is manipulated\r\n        // do not make bs scroll\r\n        if (tagExceptionFn(e.target, this.options.tagException)) {\r\n            this.setInitiated();\r\n            return;\r\n        }\r\n        // no mouse left button\r\n        if (_eventType === 2 /* Mouse */ && e.button !== 0 /* Left */)\r\n            return;\r\n        if (this.hooks.trigger(this.hooks.eventTypes.beforeStart, e)) {\r\n            return;\r\n        }\r\n        this.beforeHandler(e, 'start');\r\n        var point = (e.touches ? e.touches[0] : e);\r\n        this.pointX = point.pageX;\r\n        this.pointY = point.pageY;\r\n        this.hooks.trigger(this.hooks.eventTypes.start, e);\r\n    };\r\n    ActionsHandler.prototype.move = function (e) {\r\n        if (eventTypeMap[e.type] !== this.initiated) {\r\n            return;\r\n        }\r\n        this.beforeHandler(e, 'move');\r\n        var point = (e.touches ? e.touches[0] : e);\r\n        var deltaX = point.pageX - this.pointX;\r\n        var deltaY = point.pageY - this.pointY;\r\n        this.pointX = point.pageX;\r\n        this.pointY = point.pageY;\r\n        if (this.hooks.trigger(this.hooks.eventTypes.move, {\r\n            deltaX: deltaX,\r\n            deltaY: deltaY,\r\n            e: e\r\n        })) {\r\n            return;\r\n        }\r\n        // auto end when out of wrapper\r\n        var scrollLeft = document.documentElement.scrollLeft ||\r\n            window.pageXOffset ||\r\n            document.body.scrollLeft;\r\n        var scrollTop = document.documentElement.scrollTop ||\r\n            window.pageYOffset ||\r\n            document.body.scrollTop;\r\n        var pX = this.pointX - scrollLeft;\r\n        var pY = this.pointY - scrollTop;\r\n        if (pX >\r\n            document.documentElement.clientWidth -\r\n                this.options.momentumLimitDistance ||\r\n            pX < this.options.momentumLimitDistance ||\r\n            pY < this.options.momentumLimitDistance ||\r\n            pY >\r\n                document.documentElement.clientHeight -\r\n                    this.options.momentumLimitDistance) {\r\n            this.end(e);\r\n        }\r\n    };\r\n    ActionsHandler.prototype.end = function (e) {\r\n        if (eventTypeMap[e.type] !== this.initiated) {\r\n            return;\r\n        }\r\n        this.setInitiated();\r\n        this.beforeHandler(e, 'end');\r\n        this.hooks.trigger(this.hooks.eventTypes.end, e);\r\n    };\r\n    ActionsHandler.prototype.click = function (e) {\r\n        this.hooks.trigger(this.hooks.eventTypes.click, e);\r\n    };\r\n    ActionsHandler.prototype.destroy = function () {\r\n        this.wrapperEventRegister.destroy();\r\n        this.targetEventRegister.destroy();\r\n        this.hooks.destroy();\r\n    };\r\n    return ActionsHandler;\r\n}());\n\nvar translaterMetaData = {\r\n    x: ['translateX', 'px'],\r\n    y: ['translateY', 'px']\r\n};\r\nvar Translater = /** @class */ (function () {\r\n    function Translater(content) {\r\n        this.content = content;\r\n        this.style = content.style;\r\n        this.hooks = new EventEmitter(['beforeTranslate', 'translate']);\r\n    }\r\n    Translater.prototype.getComputedPosition = function () {\r\n        var cssStyle = window.getComputedStyle(this.content, null);\r\n        var matrix = cssStyle[style.transform].split(')')[0].split(', ');\r\n        var x = +(matrix[12] || matrix[4]);\r\n        var y = +(matrix[13] || matrix[5]);\r\n        return {\r\n            x: x,\r\n            y: y\r\n        };\r\n    };\r\n    Translater.prototype.translate = function (point) {\r\n        var transformStyle = [];\r\n        Object.keys(point).forEach(function (key) {\r\n            if (!translaterMetaData[key]) {\r\n                return;\r\n            }\r\n            var transformFnName = translaterMetaData[key][0];\r\n            if (transformFnName) {\r\n                var transformFnArgUnit = translaterMetaData[key][1];\r\n                var transformFnArg = point[key];\r\n                transformStyle.push(transformFnName + \"(\" + transformFnArg + transformFnArgUnit + \")\");\r\n            }\r\n        });\r\n        this.hooks.trigger(this.hooks.eventTypes.beforeTranslate, transformStyle, point);\r\n        this.style[style.transform] = transformStyle.join(' ');\r\n        this.hooks.trigger(this.hooks.eventTypes.translate, point);\r\n    };\r\n    Translater.prototype.destroy = function () {\r\n        this.hooks.destroy();\r\n    };\r\n    return Translater;\r\n}());\n\nvar Base = /** @class */ (function () {\r\n    function Base(content, translater, options) {\r\n        this.content = content;\r\n        this.translater = translater;\r\n        this.options = options;\r\n        this.hooks = new EventEmitter([\r\n            'move',\r\n            'end',\r\n            'beforeForceStop',\r\n            'forceStop',\r\n            'time',\r\n            'timeFunction'\r\n        ]);\r\n        this.style = content.style;\r\n    }\r\n    Base.prototype.translate = function (endPoint) {\r\n        this.translater.translate(endPoint);\r\n    };\r\n    Base.prototype.setPending = function (pending) {\r\n        this.pending = pending;\r\n    };\r\n    Base.prototype.setForceStopped = function (forceStopped) {\r\n        this.forceStopped = forceStopped;\r\n    };\r\n    Base.prototype.destroy = function () {\r\n        this.hooks.destroy();\r\n        cancelAnimationFrame(this.timer);\r\n    };\r\n    return Base;\r\n}());\n\nvar Transition = /** @class */ (function (_super) {\r\n    __extends(Transition, _super);\r\n    function Transition() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Transition.prototype.startProbe = function () {\r\n        var _this = this;\r\n        var probe = function () {\r\n            var pos = _this.translater.getComputedPosition();\r\n            _this.hooks.trigger(_this.hooks.eventTypes.move, pos);\r\n            // excute when transition ends\r\n            if (!_this.pending) {\r\n                _this.hooks.trigger(_this.hooks.eventTypes.end, pos);\r\n                return;\r\n            }\r\n            _this.timer = requestAnimationFrame(probe);\r\n        };\r\n        cancelAnimationFrame(this.timer);\r\n        this.timer = requestAnimationFrame(probe);\r\n    };\r\n    Transition.prototype.transitionTime = function (time) {\r\n        if (time === void 0) { time = 0; }\r\n        this.style[style.transitionDuration] = time + 'ms';\r\n        this.hooks.trigger(this.hooks.eventTypes.time, time);\r\n    };\r\n    Transition.prototype.transitionTimingFunction = function (easing) {\r\n        this.style[style.transitionTimingFunction] = easing;\r\n        this.hooks.trigger(this.hooks.eventTypes.timeFunction, easing);\r\n    };\r\n    Transition.prototype.move = function (startPoint, endPoint, time, easingFn, isSlient) {\r\n        this.setPending(time > 0 && (startPoint.x !== endPoint.x || startPoint.y !== endPoint.y));\r\n        this.transitionTimingFunction(easingFn);\r\n        this.transitionTime(time);\r\n        this.translate(endPoint);\r\n        if (time && this.options.probeType === 3 /* Realtime */) {\r\n            this.startProbe();\r\n        }\r\n        // if we change content's transformY in a tick\r\n        // such as: 0 -> 50px -> 0\r\n        // transitionend will not be triggered\r\n        // so we forceupdate by reflow\r\n        if (!time) {\r\n            this._reflow = this.content.offsetHeight;\r\n        }\r\n        // no need to dispatch move and end when slient\r\n        if (!time && !isSlient) {\r\n            this.hooks.trigger(this.hooks.eventTypes.move, endPoint);\r\n            this.hooks.trigger(this.hooks.eventTypes.end, endPoint);\r\n        }\r\n    };\r\n    Transition.prototype.stop = function () {\r\n        // still in transition\r\n        if (this.pending) {\r\n            this.setPending(false);\r\n            cancelAnimationFrame(this.timer);\r\n            var _a = this.translater.getComputedPosition(), x = _a.x, y = _a.y;\r\n            this.transitionTime();\r\n            this.translate({ x: x, y: y });\r\n            this.setForceStopped(true);\r\n            if (this.hooks.trigger(this.hooks.eventTypes.beforeForceStop, { x: x, y: y })) {\r\n                return;\r\n            }\r\n            this.hooks.trigger(this.hooks.eventTypes.forceStop, { x: x, y: y });\r\n        }\r\n    };\r\n    return Transition;\r\n}(Base));\n\nvar Animation = /** @class */ (function (_super) {\r\n    __extends(Animation, _super);\r\n    function Animation() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    Animation.prototype.move = function (startPoint, endPoint, time, easingFn, isSlient) {\r\n        // time is 0\r\n        if (!time) {\r\n            this.translate(endPoint);\r\n            // if we change content's transformY in a tick\r\n            // such as: 0 -> 50px -> 0\r\n            // transitionend will not be triggered\r\n            // so we forceupdate by reflow\r\n            this._reflow = this.content.offsetHeight;\r\n            // no need to dispatch move and end when slient\r\n            if (isSlient)\r\n                return;\r\n            this.hooks.trigger(this.hooks.eventTypes.move, endPoint);\r\n            this.hooks.trigger(this.hooks.eventTypes.end, endPoint);\r\n            return;\r\n        }\r\n        this.animate(startPoint, endPoint, time, easingFn);\r\n    };\r\n    Animation.prototype.animate = function (startPoint, endPoint, duration, easingFn) {\r\n        var _this = this;\r\n        var startTime = getNow();\r\n        var destTime = startTime + duration;\r\n        var step = function () {\r\n            var now = getNow();\r\n            // js animation end\r\n            if (now >= destTime) {\r\n                _this.translate(endPoint);\r\n                _this.hooks.trigger(_this.hooks.eventTypes.move, endPoint);\r\n                _this.hooks.trigger(_this.hooks.eventTypes.end, endPoint);\r\n                return;\r\n            }\r\n            now = (now - startTime) / duration;\r\n            var easing = easingFn(now);\r\n            var newPoint = {};\r\n            Object.keys(endPoint).forEach(function (key) {\r\n                var startValue = startPoint[key];\r\n                var endValue = endPoint[key];\r\n                newPoint[key] = (endValue - startValue) * easing + startValue;\r\n            });\r\n            _this.translate(newPoint);\r\n            if (_this.pending) {\r\n                _this.timer = requestAnimationFrame(step);\r\n            }\r\n            if (_this.options.probeType === 3 /* Realtime */) {\r\n                _this.hooks.trigger(_this.hooks.eventTypes.move, newPoint);\r\n            }\r\n        };\r\n        this.setPending(true);\r\n        cancelAnimationFrame(this.timer);\r\n        step();\r\n    };\r\n    Animation.prototype.stop = function () {\r\n        // still in requestFrameAnimation\r\n        if (this.pending) {\r\n            this.setPending(false);\r\n            cancelAnimationFrame(this.timer);\r\n            var pos = this.translater.getComputedPosition();\r\n            this.setForceStopped(true);\r\n            if (this.hooks.trigger(this.hooks.eventTypes.beforeForceStop, pos)) {\r\n                return;\r\n            }\r\n            this.hooks.trigger(this.hooks.eventTypes.forceStop, pos);\r\n        }\r\n    };\r\n    return Animation;\r\n}(Base));\n\nfunction createAnimater(element, translater, options) {\r\n    var useTransition = options.useTransition;\r\n    var animaterOptions = {};\r\n    Object.defineProperty(animaterOptions, 'probeType', {\r\n        enumerable: true,\r\n        configurable: false,\r\n        get: function () {\r\n            return options.probeType;\r\n        }\r\n    });\r\n    if (useTransition) {\r\n        return new Transition(element, translater, animaterOptions);\r\n    }\r\n    else {\r\n        return new Animation(element, translater, animaterOptions);\r\n    }\r\n}\n\nvar Behavior = /** @class */ (function () {\r\n    function Behavior(wrapper, options) {\r\n        this.wrapper = wrapper;\r\n        this.options = options;\r\n        this.hooks = new EventEmitter(['momentum', 'end']);\r\n        this.content = this.wrapper.children[0];\r\n        this.currentPos = 0;\r\n        this.startPos = 0;\r\n    }\r\n    Behavior.prototype.start = function () {\r\n        this.direction = 0 /* Default */;\r\n        this.movingDirection = 0 /* Default */;\r\n        this.dist = 0;\r\n    };\r\n    Behavior.prototype.move = function (delta) {\r\n        delta = this.hasScroll ? delta : 0;\r\n        this.movingDirection =\r\n            delta > 0\r\n                ? -1 /* Negative */\r\n                : delta < 0\r\n                    ? 1 /* Positive */\r\n                    : 0 /* Default */;\r\n        var newPos = this.currentPos + delta;\r\n        // Slow down or stop if outside of the boundaries\r\n        if (newPos > this.minScrollPos || newPos < this.maxScrollPos) {\r\n            if ((newPos > this.minScrollPos && this.options.bounces[0]) ||\r\n                (newPos < this.maxScrollPos && this.options.bounces[1])) {\r\n                newPos = this.currentPos + delta / 3;\r\n            }\r\n            else {\r\n                newPos =\r\n                    newPos > this.minScrollPos ? this.minScrollPos : this.maxScrollPos;\r\n            }\r\n        }\r\n        return newPos;\r\n    };\r\n    Behavior.prototype.end = function (duration) {\r\n        var momentumInfo = {\r\n            duration: 0\r\n        };\r\n        var absDist = Math.abs(this.currentPos - this.startPos);\r\n        // start momentum animation if needed\r\n        if (this.options.momentum &&\r\n            duration < this.options.momentumLimitTime &&\r\n            absDist > this.options.momentumLimitDistance) {\r\n            var wrapperSize = (this.direction === -1 /* Negative */ && this.options.bounces[0]) ||\r\n                (this.direction === 1 /* Positive */ && this.options.bounces[1])\r\n                ? this.wrapperSize\r\n                : 0;\r\n            momentumInfo = this.hasScroll\r\n                ? this.momentum(this.currentPos, this.startPos, duration, this.maxScrollPos, this.minScrollPos, wrapperSize, this.options)\r\n                : { destination: this.currentPos, duration: 0 };\r\n        }\r\n        else {\r\n            this.hooks.trigger(this.hooks.eventTypes.end, momentumInfo);\r\n        }\r\n        return momentumInfo;\r\n    };\r\n    Behavior.prototype.momentum = function (current, start, time, lowerMargin, upperMargin, wrapperSize, options) {\r\n        if (options === void 0) { options = this.options; }\r\n        var distance = current - start;\r\n        var speed = Math.abs(distance) / time;\r\n        var deceleration = options.deceleration, swipeBounceTime = options.swipeBounceTime, swipeTime = options.swipeTime;\r\n        var momentumData = {\r\n            destination: current + (speed / deceleration) * (distance < 0 ? -1 : 1),\r\n            duration: swipeTime,\r\n            rate: 15\r\n        };\r\n        this.hooks.trigger(this.hooks.eventTypes.momentum, momentumData, distance);\r\n        if (momentumData.destination < lowerMargin) {\r\n            momentumData.destination = wrapperSize\r\n                ? Math.max(lowerMargin - wrapperSize / 4, lowerMargin - (wrapperSize / momentumData.rate) * speed)\r\n                : lowerMargin;\r\n            momentumData.duration = swipeBounceTime;\r\n        }\r\n        else if (momentumData.destination > upperMargin) {\r\n            momentumData.destination = wrapperSize\r\n                ? Math.min(upperMargin + wrapperSize / 4, upperMargin + (wrapperSize / momentumData.rate) * speed)\r\n                : upperMargin;\r\n            momentumData.duration = swipeBounceTime;\r\n        }\r\n        momentumData.destination = Math.round(momentumData.destination);\r\n        return momentumData;\r\n    };\r\n    Behavior.prototype.updateDirection = function () {\r\n        var absDist = Math.round(this.currentPos) - this.absStartPos;\r\n        this.direction =\r\n            absDist > 0\r\n                ? -1 /* Negative */\r\n                : absDist < 0\r\n                    ? 1 /* Positive */\r\n                    : 0 /* Default */;\r\n    };\r\n    Behavior.prototype.refresh = function () {\r\n        var _a = this.options.rect, size = _a.size, position = _a.position;\r\n        var isWrapperStatic = window.getComputedStyle(this.wrapper, null).position === 'static';\r\n        var wrapperRect = getRect(this.wrapper);\r\n        this.wrapperSize = wrapperRect[size];\r\n        var contentRect = getRect(this.content);\r\n        this.contentSize = contentRect[size];\r\n        this.relativeOffset = contentRect[position];\r\n        if (isWrapperStatic) {\r\n            this.relativeOffset -= wrapperRect[position];\r\n        }\r\n        this.minScrollPos = 0;\r\n        this.maxScrollPos = this.wrapperSize - this.contentSize;\r\n        if (this.maxScrollPos < 0) {\r\n            this.maxScrollPos -= this.relativeOffset;\r\n            this.minScrollPos = -this.relativeOffset;\r\n        }\r\n        this.hasScroll =\r\n            this.options.scrollable && this.maxScrollPos < this.minScrollPos;\r\n        if (!this.hasScroll) {\r\n            this.maxScrollPos = this.minScrollPos;\r\n            this.contentSize = this.wrapperSize;\r\n        }\r\n        this.direction = 0;\r\n    };\r\n    Behavior.prototype.updatePosition = function (pos) {\r\n        this.currentPos = pos;\r\n    };\r\n    Behavior.prototype.getCurrentPos = function () {\r\n        return Math.round(this.currentPos);\r\n    };\r\n    Behavior.prototype.checkInBoundary = function () {\r\n        var position = this.adjustPosition(this.currentPos);\r\n        var inBoundary = position === this.getCurrentPos();\r\n        return {\r\n            position: position,\r\n            inBoundary: inBoundary\r\n        };\r\n    };\r\n    // adjust position when out of boundary\r\n    Behavior.prototype.adjustPosition = function (pos) {\r\n        var roundPos = Math.round(pos);\r\n        if (!this.hasScroll || roundPos > this.minScrollPos) {\r\n            roundPos = this.minScrollPos;\r\n        }\r\n        else if (roundPos < this.maxScrollPos) {\r\n            roundPos = this.maxScrollPos;\r\n        }\r\n        return roundPos;\r\n    };\r\n    Behavior.prototype.updateStartPos = function () {\r\n        this.startPos = this.currentPos;\r\n    };\r\n    Behavior.prototype.updateAbsStartPos = function () {\r\n        this.absStartPos = this.currentPos;\r\n    };\r\n    Behavior.prototype.resetStartPos = function () {\r\n        this.updateStartPos();\r\n        this.updateAbsStartPos();\r\n    };\r\n    Behavior.prototype.getAbsDist = function (delta) {\r\n        this.dist += delta;\r\n        return Math.abs(this.dist);\r\n    };\r\n    Behavior.prototype.destroy = function () {\r\n        this.hooks.destroy();\r\n    };\r\n    return Behavior;\r\n}());\n\nvar _a, _b, _c, _d;\r\nvar PassthroughHandlers = (_a = {},\r\n    _a[\"yes\" /* Yes */] = function (e) {\r\n        return true;\r\n    },\r\n    _a[\"no\" /* No */] = function (e) {\r\n        e.preventDefault();\r\n        return false;\r\n    },\r\n    _a);\r\nvar DirectionMap = (_b = {},\r\n    _b[\"horizontal\" /* Horizontal */] = (_c = {},\r\n        _c[\"yes\" /* Yes */] = \"horizontal\" /* Horizontal */,\r\n        _c[\"no\" /* No */] = \"vertical\" /* Vertical */,\r\n        _c),\r\n    _b[\"vertical\" /* Vertical */] = (_d = {},\r\n        _d[\"yes\" /* Yes */] = \"vertical\" /* Vertical */,\r\n        _d[\"no\" /* No */] = \"horizontal\" /* Horizontal */,\r\n        _d),\r\n    _b);\r\nvar DirectionLockAction = /** @class */ (function () {\r\n    function DirectionLockAction(directionLockThreshold, freeScroll, eventPassthrough) {\r\n        this.directionLockThreshold = directionLockThreshold;\r\n        this.freeScroll = freeScroll;\r\n        this.eventPassthrough = eventPassthrough;\r\n        this.reset();\r\n    }\r\n    DirectionLockAction.prototype.reset = function () {\r\n        this.directionLocked = \"\" /* Default */;\r\n    };\r\n    DirectionLockAction.prototype.checkMovingDirection = function (absDistX, absDistY, e) {\r\n        this.computeDirectionLock(absDistX, absDistY);\r\n        return this.handleEventPassthrough(e);\r\n    };\r\n    DirectionLockAction.prototype.adjustDelta = function (deltaX, deltaY) {\r\n        if (this.directionLocked === \"horizontal\" /* Horizontal */) {\r\n            deltaY = 0;\r\n        }\r\n        else if (this.directionLocked === \"vertical\" /* Vertical */) {\r\n            deltaX = 0;\r\n        }\r\n        return {\r\n            deltaX: deltaX,\r\n            deltaY: deltaY\r\n        };\r\n    };\r\n    DirectionLockAction.prototype.computeDirectionLock = function (absDistX, absDistY) {\r\n        // If you are scrolling in one direction, lock it\r\n        if (this.directionLocked === \"\" /* Default */ && !this.freeScroll) {\r\n            if (absDistX > absDistY + this.directionLockThreshold) {\r\n                this.directionLocked = \"horizontal\" /* Horizontal */; // lock horizontally\r\n            }\r\n            else if (absDistY >= absDistX + this.directionLockThreshold) {\r\n                this.directionLocked = \"vertical\" /* Vertical */; // lock vertically\r\n            }\r\n            else {\r\n                this.directionLocked = \"none\" /* None */; // no lock\r\n            }\r\n        }\r\n    };\r\n    DirectionLockAction.prototype.handleEventPassthrough = function (e) {\r\n        var handleMap = DirectionMap[this.directionLocked];\r\n        if (handleMap) {\r\n            if (this.eventPassthrough === handleMap[\"yes\" /* Yes */]) {\r\n                return PassthroughHandlers[\"yes\" /* Yes */](e);\r\n            }\r\n            else if (this.eventPassthrough === handleMap[\"no\" /* No */]) {\r\n                return PassthroughHandlers[\"no\" /* No */](e);\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    return DirectionLockAction;\r\n}());\n\nvar ScrollerActions = /** @class */ (function () {\r\n    function ScrollerActions(scrollBehaviorX, scrollBehaviorY, actionsHandler, animater, options) {\r\n        this.hooks = new EventEmitter([\r\n            'start',\r\n            'beforeMove',\r\n            'scrollStart',\r\n            'scroll',\r\n            'beforeEnd',\r\n            'end',\r\n            'scrollEnd'\r\n        ]);\r\n        this.scrollBehaviorX = scrollBehaviorX;\r\n        this.scrollBehaviorY = scrollBehaviorY;\r\n        this.actionsHandler = actionsHandler;\r\n        this.animater = animater;\r\n        this.options = options;\r\n        this.directionLockAction = new DirectionLockAction(options.directionLockThreshold, options.freeScroll, options.eventPassthrough);\r\n        this.enabled = true;\r\n        this.bindActionsHandler();\r\n    }\r\n    ScrollerActions.prototype.bindActionsHandler = function () {\r\n        var _this = this;\r\n        // [mouse|touch]start event\r\n        this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.start, function (e) {\r\n            if (!_this.enabled)\r\n                return true;\r\n            return _this.handleStart(e);\r\n        });\r\n        // [mouse|touch]move event\r\n        this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.move, function (_a) {\r\n            var deltaX = _a.deltaX, deltaY = _a.deltaY, e = _a.e;\r\n            if (!_this.enabled)\r\n                return true;\r\n            return _this.handleMove(deltaX, deltaY, e);\r\n        });\r\n        // [mouse|touch]end event\r\n        this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.end, function (e) {\r\n            if (!_this.enabled)\r\n                return true;\r\n            return _this.handleEnd(e);\r\n        });\r\n        // click\r\n        this.actionsHandler.hooks.on(this.actionsHandler.hooks.eventTypes.click, function (e) {\r\n            // handle native click event\r\n            if (_this.enabled && !e._constructed) {\r\n                _this.handleClick(e);\r\n            }\r\n        });\r\n    };\r\n    ScrollerActions.prototype.handleStart = function (e) {\r\n        var timestamp = getNow();\r\n        this.moved = false;\r\n        this.startTime = timestamp;\r\n        this.directionLockAction.reset();\r\n        this.scrollBehaviorX.start();\r\n        this.scrollBehaviorY.start();\r\n        // force stopping last transition or animation\r\n        this.animater.stop();\r\n        this.scrollBehaviorX.resetStartPos();\r\n        this.scrollBehaviorY.resetStartPos();\r\n        this.hooks.trigger(this.hooks.eventTypes.start, e);\r\n    };\r\n    ScrollerActions.prototype.handleMove = function (deltaX, deltaY, e) {\r\n        if (this.hooks.trigger(this.hooks.eventTypes.beforeMove, e)) {\r\n            return;\r\n        }\r\n        var absDistX = this.scrollBehaviorX.getAbsDist(deltaX);\r\n        var absDistY = this.scrollBehaviorY.getAbsDist(deltaY);\r\n        var timestamp = getNow();\r\n        // We need to move at least momentumLimitDistance pixels\r\n        // for the scrolling to initiate\r\n        if (this.checkMomentum(absDistX, absDistY, timestamp)) {\r\n            return true;\r\n        }\r\n        if (this.directionLockAction.checkMovingDirection(absDistX, absDistY, e)) {\r\n            this.actionsHandler.setInitiated();\r\n            return true;\r\n        }\r\n        var delta = this.directionLockAction.adjustDelta(deltaX, deltaY);\r\n        var newX = this.scrollBehaviorX.move(delta.deltaX);\r\n        var newY = this.scrollBehaviorY.move(delta.deltaY);\r\n        if (!this.moved) {\r\n            this.moved = true;\r\n            this.hooks.trigger(this.hooks.eventTypes.scrollStart);\r\n        }\r\n        this.animater.translate({\r\n            x: newX,\r\n            y: newY\r\n        });\r\n        this.dispatchScroll(timestamp);\r\n    };\r\n    ScrollerActions.prototype.dispatchScroll = function (timestamp) {\r\n        // dispatch scroll in interval time\r\n        if (timestamp - this.startTime > this.options.momentumLimitTime) {\r\n            // refresh time and starting position to initiate a momentum\r\n            this.startTime = timestamp;\r\n            this.scrollBehaviorX.updateStartPos();\r\n            this.scrollBehaviorY.updateStartPos();\r\n            if (this.options.probeType === 1 /* Throttle */) {\r\n                this.hooks.trigger(this.hooks.eventTypes.scroll, this.getCurrentPos());\r\n            }\r\n        }\r\n        // dispatch scroll all the time\r\n        if (this.options.probeType > 1 /* Throttle */) {\r\n            this.hooks.trigger(this.hooks.eventTypes.scroll, this.getCurrentPos());\r\n        }\r\n    };\r\n    ScrollerActions.prototype.checkMomentum = function (absDistX, absDistY, timestamp) {\r\n        return (timestamp - this.endTime > this.options.momentumLimitTime &&\r\n            absDistY < this.options.momentumLimitDistance &&\r\n            absDistX < this.options.momentumLimitDistance);\r\n    };\r\n    ScrollerActions.prototype.handleEnd = function (e) {\r\n        if (this.hooks.trigger(this.hooks.eventTypes.beforeEnd, e)) {\r\n            return;\r\n        }\r\n        var currentPos = this.getCurrentPos();\r\n        this.scrollBehaviorX.updateDirection();\r\n        this.scrollBehaviorY.updateDirection();\r\n        if (this.hooks.trigger(this.hooks.eventTypes.end, e, currentPos)) {\r\n            return true;\r\n        }\r\n        this.animater.translate(currentPos);\r\n        this.endTime = getNow();\r\n        var duration = this.endTime - this.startTime;\r\n        this.hooks.trigger(this.hooks.eventTypes.scrollEnd, currentPos, duration);\r\n    };\r\n    ScrollerActions.prototype.handleClick = function (e) {\r\n        if (!preventDefaultExceptionFn(e.target, this.options.preventDefaultException)) {\r\n            e.preventDefault();\r\n            e.stopPropagation();\r\n        }\r\n    };\r\n    ScrollerActions.prototype.getCurrentPos = function () {\r\n        return {\r\n            x: this.scrollBehaviorX.getCurrentPos(),\r\n            y: this.scrollBehaviorY.getCurrentPos()\r\n        };\r\n    };\r\n    ScrollerActions.prototype.refresh = function () {\r\n        this.endTime = 0;\r\n    };\r\n    ScrollerActions.prototype.destroy = function () {\r\n        this.hooks.destroy();\r\n    };\r\n    return ScrollerActions;\r\n}());\n\nfunction createActionsHandlerOptions(bsOptions) {\r\n    var options = [\r\n        'click',\r\n        'bindToWrapper',\r\n        'disableMouse',\r\n        'disableTouch',\r\n        'preventDefault',\r\n        'stopPropagation',\r\n        'tagException',\r\n        'preventDefaultException'\r\n    ].reduce(function (prev, cur) {\r\n        prev[cur] = bsOptions[cur];\r\n        return prev;\r\n    }, {});\r\n    return options;\r\n}\r\nfunction createBehaviorOptions(bsOptions, extraProp, bounces, rect) {\r\n    var options = [\r\n        'momentum',\r\n        'momentumLimitTime',\r\n        'momentumLimitDistance',\r\n        'deceleration',\r\n        'swipeBounceTime',\r\n        'swipeTime'\r\n    ].reduce(function (prev, cur) {\r\n        prev[cur] = bsOptions[cur];\r\n        return prev;\r\n    }, {});\r\n    // add extra property\r\n    options.scrollable = bsOptions[extraProp];\r\n    options.bounces = bounces;\r\n    options.rect = rect;\r\n    return options;\r\n}\n\nfunction bubbling(source, target, events) {\r\n    events.forEach(function (event) {\r\n        var sourceEvent;\r\n        var targetEvent;\r\n        if (typeof event === 'string') {\r\n            sourceEvent = targetEvent = event;\r\n        }\r\n        else {\r\n            sourceEvent = event.source;\r\n            targetEvent = event.target;\r\n        }\r\n        source.on(sourceEvent, function () {\r\n            var args = [];\r\n            for (var _i = 0; _i < arguments.length; _i++) {\r\n                args[_i] = arguments[_i];\r\n            }\r\n            return target.trigger.apply(target, [targetEvent].concat(args));\r\n        });\r\n    });\r\n}\n\nvar Scroller = /** @class */ (function () {\r\n    function Scroller(wrapper, options) {\r\n        this.hooks = new EventEmitter([\r\n            'beforeStart',\r\n            'beforeMove',\r\n            'beforeScrollStart',\r\n            'scrollStart',\r\n            'scroll',\r\n            'beforeEnd',\r\n            'scrollEnd',\r\n            'refresh',\r\n            'touchEnd',\r\n            'end',\r\n            'flick',\r\n            'scrollCancel',\r\n            'momentum',\r\n            'scrollTo',\r\n            'ignoreDisMoveForSamePos',\r\n            'scrollToElement',\r\n            'resize'\r\n        ]);\r\n        this.wrapper = wrapper;\r\n        this.content = wrapper.children[0];\r\n        this.options = options;\r\n        var _a = this\r\n            .options.bounce, _b = _a.left, left = _b === void 0 ? true : _b, _c = _a.right, right = _c === void 0 ? true : _c, _d = _a.top, top = _d === void 0 ? true : _d, _e = _a.bottom, bottom = _e === void 0 ? true : _e;\r\n        // direction X\r\n        this.scrollBehaviorX = new Behavior(wrapper, createBehaviorOptions(options, 'scrollX', [left, right], {\r\n            size: 'width',\r\n            position: 'left'\r\n        }));\r\n        // direction Y\r\n        this.scrollBehaviorY = new Behavior(wrapper, createBehaviorOptions(options, 'scrollY', [top, bottom], {\r\n            size: 'height',\r\n            position: 'top'\r\n        }));\r\n        this.translater = new Translater(this.content);\r\n        this.animater = createAnimater(this.content, this.translater, this.options);\r\n        this.actionsHandler = new ActionsHandler(wrapper, createActionsHandlerOptions(this.options));\r\n        this.actions = new ScrollerActions(this.scrollBehaviorX, this.scrollBehaviorY, this.actionsHandler, this.animater, this.options);\r\n        var resizeHandler = this.resize.bind(this);\r\n        this.resizeRegister = new EventRegister(window, [\r\n            {\r\n                name: 'orientationchange',\r\n                handler: resizeHandler\r\n            },\r\n            {\r\n                name: 'resize',\r\n                handler: resizeHandler\r\n            }\r\n        ]);\r\n        this.transitionEndRegister = new EventRegister(this.content, [\r\n            {\r\n                name: style.transitionEnd,\r\n                handler: this.transitionEnd.bind(this)\r\n            }\r\n        ]);\r\n        this.init();\r\n    }\r\n    Scroller.prototype.init = function () {\r\n        var _this = this;\r\n        this.bindTranslater();\r\n        this.bindAnimater();\r\n        this.bindActions();\r\n        // enable pointer events when scrolling ends\r\n        this.hooks.on(this.hooks.eventTypes.scrollEnd, function () {\r\n            _this.togglePointerEvents(true);\r\n        });\r\n    };\r\n    Scroller.prototype.bindTranslater = function () {\r\n        var _this = this;\r\n        var hooks = this.translater.hooks;\r\n        hooks.on(hooks.eventTypes.beforeTranslate, function (transformStyle) {\r\n            if (_this.options.translateZ) {\r\n                transformStyle.push(_this.options.translateZ);\r\n            }\r\n        });\r\n        // disable pointer events when scrolling\r\n        hooks.on(hooks.eventTypes.translate, function (pos) {\r\n            _this.updatePositions(pos);\r\n            _this.togglePointerEvents(false);\r\n        });\r\n    };\r\n    Scroller.prototype.bindAnimater = function () {\r\n        var _this = this;\r\n        // reset position\r\n        this.animater.hooks.on(this.animater.hooks.eventTypes.end, function (pos) {\r\n            if (!_this.resetPosition(_this.options.bounceTime)) {\r\n                _this.animater.setPending(false);\r\n                _this.hooks.trigger(_this.hooks.eventTypes.scrollEnd, pos);\r\n            }\r\n        });\r\n        bubbling(this.animater.hooks, this.hooks, [\r\n            {\r\n                source: this.animater.hooks.eventTypes.move,\r\n                target: this.hooks.eventTypes.scroll\r\n            },\r\n            {\r\n                source: this.animater.hooks.eventTypes.forceStop,\r\n                target: this.hooks.eventTypes.scrollEnd\r\n            }\r\n        ]);\r\n    };\r\n    Scroller.prototype.bindActions = function () {\r\n        var _this = this;\r\n        var actions = this.actions;\r\n        bubbling(actions.hooks, this.hooks, [\r\n            {\r\n                source: actions.hooks.eventTypes.start,\r\n                target: this.hooks.eventTypes.beforeStart\r\n            },\r\n            {\r\n                source: actions.hooks.eventTypes.start,\r\n                target: this.hooks.eventTypes.beforeScrollStart // just for event api\r\n            },\r\n            {\r\n                source: actions.hooks.eventTypes.beforeMove,\r\n                target: this.hooks.eventTypes.beforeMove\r\n            },\r\n            {\r\n                source: actions.hooks.eventTypes.scrollStart,\r\n                target: this.hooks.eventTypes.scrollStart\r\n            },\r\n            {\r\n                source: actions.hooks.eventTypes.scroll,\r\n                target: this.hooks.eventTypes.scroll\r\n            },\r\n            {\r\n                source: actions.hooks.eventTypes.beforeEnd,\r\n                target: this.hooks.eventTypes.beforeEnd\r\n            }\r\n        ]);\r\n        actions.hooks.on(actions.hooks.eventTypes.end, function (e, pos) {\r\n            _this.hooks.trigger(_this.hooks.eventTypes.touchEnd, pos);\r\n            if (_this.hooks.trigger(_this.hooks.eventTypes.end, pos)) {\r\n                return true;\r\n            }\r\n            // check if it is a click operation\r\n            if (!actions.moved && _this.checkClick(e)) {\r\n                _this.animater.setForceStopped(false);\r\n                _this.hooks.trigger(_this.hooks.eventTypes.scrollCancel);\r\n                return true;\r\n            }\r\n            _this.animater.setForceStopped(false);\r\n            // reset if we are outside of the boundaries\r\n            if (_this.resetPosition(_this.options.bounceTime, ease.bounce)) {\r\n                return true;\r\n            }\r\n        });\r\n        actions.hooks.on(actions.hooks.eventTypes.scrollEnd, function (pos, duration) {\r\n            var deltaX = Math.abs(pos.x - _this.scrollBehaviorX.startPos);\r\n            var deltaY = Math.abs(pos.y - _this.scrollBehaviorY.startPos);\r\n            if (_this.checkFlick(duration, deltaX, deltaY)) {\r\n                _this.hooks.trigger(_this.hooks.eventTypes.flick);\r\n                return;\r\n            }\r\n            if (_this.momentum(pos, duration)) {\r\n                return;\r\n            }\r\n            _this.hooks.trigger(_this.hooks.eventTypes.scrollEnd, pos);\r\n        });\r\n    };\r\n    Scroller.prototype.checkFlick = function (duration, deltaX, deltaY) {\r\n        // flick\r\n        if (this.hooks.events.flick.length > 1 &&\r\n            duration < this.options.flickLimitTime &&\r\n            deltaX < this.options.flickLimitDistance &&\r\n            deltaY < this.options.flickLimitDistance) {\r\n            return true;\r\n        }\r\n    };\r\n    Scroller.prototype.momentum = function (pos, duration) {\r\n        var meta = {\r\n            time: 0,\r\n            easing: ease.swiper,\r\n            newX: pos.x,\r\n            newY: pos.y\r\n        };\r\n        // start momentum animation if needed\r\n        var momentumX = this.scrollBehaviorX.end(duration);\r\n        var momentumY = this.scrollBehaviorY.end(duration);\r\n        meta.newX = isUndef(momentumX.destination)\r\n            ? meta.newX\r\n            : momentumX.destination;\r\n        meta.newY = isUndef(momentumY.destination)\r\n            ? meta.newY\r\n            : momentumY.destination;\r\n        meta.time = Math.max(momentumX.duration, momentumY.duration);\r\n        this.hooks.trigger(this.hooks.eventTypes.momentum, meta, this);\r\n        // when x or y changed, do momentum animation now!\r\n        if (meta.newX !== pos.x || meta.newY !== pos.y) {\r\n            // change easing function when scroller goes out of the boundaries\r\n            if (meta.newX > this.scrollBehaviorX.minScrollPos ||\r\n                meta.newX < this.scrollBehaviorX.maxScrollPos ||\r\n                meta.newY > this.scrollBehaviorY.minScrollPos ||\r\n                meta.newY < this.scrollBehaviorY.maxScrollPos) {\r\n                meta.easing = ease.swipeBounce;\r\n            }\r\n            this.scrollTo(meta.newX, meta.newY, meta.time, meta.easing);\r\n            return true;\r\n        }\r\n    };\r\n    Scroller.prototype.checkClick = function (e) {\r\n        // when in the process of pulling down, it should not prevent click\r\n        var cancelable = {\r\n            preventClick: this.animater.forceStopped\r\n        };\r\n        // we scrolled less than momentumLimitDistance pixels\r\n        if (this.hooks.trigger(this.hooks.eventTypes.checkClick))\r\n            return true;\r\n        if (!cancelable.preventClick) {\r\n            var _dblclick = this.options.dblclick;\r\n            var dblclickTrigged = false;\r\n            if (_dblclick && this.lastClickTime) {\r\n                var _a = _dblclick.delay, delay = _a === void 0 ? 300 : _a;\r\n                if (getNow() - this.lastClickTime < delay) {\r\n                    dblclickTrigged = true;\r\n                    dblclick(e);\r\n                }\r\n            }\r\n            if (this.options.tap) {\r\n                tap(e, this.options.tap);\r\n            }\r\n            if (this.options.click &&\r\n                !preventDefaultExceptionFn(e.target, this.options.preventDefaultException)) {\r\n                click(e);\r\n            }\r\n            this.lastClickTime = dblclickTrigged ? null : getNow();\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    Scroller.prototype.resize = function () {\r\n        var _this = this;\r\n        if (!this.actions.enabled) {\r\n            return;\r\n        }\r\n        // fix a scroll problem under Android condition\r\n        if (isAndroid) {\r\n            this.wrapper.scrollTop = 0;\r\n        }\r\n        if (!this.hooks.trigger(this.hooks.eventTypes.resize)) {\r\n            clearTimeout(this.resizeTimeout);\r\n            this.resizeTimeout = window.setTimeout(function () {\r\n                _this.refresh();\r\n            }, this.options.resizePolling);\r\n        }\r\n    };\r\n    Scroller.prototype.transitionEnd = function (e) {\r\n        if (e.target !== this.content || !this.animater.pending) {\r\n            return;\r\n        }\r\n        var animater = this.animater;\r\n        animater.transitionTime();\r\n        if (!this.resetPosition(this.options.bounceTime, ease.bounce)) {\r\n            this.animater.setPending(false);\r\n            if (this.options.probeType !== 3 /* Realtime */) {\r\n                this.hooks.trigger(this.hooks.eventTypes.scrollEnd, this.getCurrentPos());\r\n            }\r\n        }\r\n    };\r\n    Scroller.prototype.togglePointerEvents = function (enabled) {\r\n        if (enabled === void 0) { enabled = true; }\r\n        var el = this.content.children.length\r\n            ? this.content.children\r\n            : [this.content];\r\n        var pointerEvents = enabled ? 'auto' : 'none';\r\n        for (var i = 0; i < el.length; i++) {\r\n            var node = el[i];\r\n            // ignore BetterScroll instance's wrapper DOM\r\n            if (node.isBScrollContainer) {\r\n                continue;\r\n            }\r\n            node.style.pointerEvents = pointerEvents;\r\n        }\r\n    };\r\n    Scroller.prototype.refresh = function () {\r\n        this.scrollBehaviorX.refresh();\r\n        this.scrollBehaviorY.refresh();\r\n        this.actions.refresh();\r\n        this.wrapperOffset = offset(this.wrapper);\r\n    };\r\n    Scroller.prototype.scrollBy = function (deltaX, deltaY, time, easing) {\r\n        if (time === void 0) { time = 0; }\r\n        var _a = this.getCurrentPos(), x = _a.x, y = _a.y;\r\n        easing = !easing ? ease.bounce : easing;\r\n        deltaX += x;\r\n        deltaY += y;\r\n        this.scrollTo(deltaX, deltaY, time, easing);\r\n    };\r\n    Scroller.prototype.scrollTo = function (x, y, time, easing, extraTransform, isSilent) {\r\n        if (time === void 0) { time = 0; }\r\n        if (extraTransform === void 0) { extraTransform = {\r\n            start: {},\r\n            end: {}\r\n        }; }\r\n        easing = !easing ? ease.bounce : easing;\r\n        var easingFn = this.options.useTransition ? easing.style : easing.fn;\r\n        var currentPos = this.getCurrentPos();\r\n        var startPoint = __assign({ x: currentPos.x, y: currentPos.y }, extraTransform.start);\r\n        var endPoint = __assign({ x: x,\r\n            y: y }, extraTransform.end);\r\n        this.hooks.trigger(this.hooks.eventTypes.scrollTo, endPoint);\r\n        if (!this.hooks.trigger(this.hooks.eventTypes.ignoreDisMoveForSamePos)) {\r\n            // it is an useless move\r\n            if (startPoint.x === endPoint.x && startPoint.y === endPoint.y) {\r\n                return;\r\n            }\r\n        }\r\n        this.animater.move(startPoint, endPoint, time, easingFn, isSilent);\r\n    };\r\n    Scroller.prototype.scrollToElement = function (el, time, offsetX, offsetY, easing) {\r\n        var targetEle = getElement(el);\r\n        var pos = offset(targetEle);\r\n        var getOffset = function (offset, size, wrapperSize) {\r\n            if (typeof offset === 'number') {\r\n                return offset;\r\n            }\r\n            // if offsetX/Y are true we center the element to the screen\r\n            return offset ? Math.round(size / 2 - wrapperSize / 2) : 0;\r\n        };\r\n        offsetX = getOffset(offsetX, targetEle.offsetWidth, this.wrapper.offsetWidth);\r\n        offsetY = getOffset(offsetY, targetEle.offsetHeight, this.wrapper.offsetHeight);\r\n        var getPos = function (pos, wrapperPos, offset, scrollBehavior) {\r\n            pos -= wrapperPos;\r\n            pos = scrollBehavior.adjustPosition(pos - offset);\r\n            return pos;\r\n        };\r\n        pos.left = getPos(pos.left, this.wrapperOffset.left, offsetX, this.scrollBehaviorX);\r\n        pos.top = getPos(pos.top, this.wrapperOffset.top, offsetY, this.scrollBehaviorY);\r\n        if (this.hooks.trigger(this.hooks.eventTypes.scrollToElement, targetEle, pos)) {\r\n            return;\r\n        }\r\n        this.scrollTo(pos.left, pos.top, time, easing);\r\n    };\r\n    Scroller.prototype.resetPosition = function (time, easing) {\r\n        if (time === void 0) { time = 0; }\r\n        easing = !easing ? ease.bounce : easing;\r\n        var _a = this.scrollBehaviorX.checkInBoundary(), x = _a.position, xInBoundary = _a.inBoundary;\r\n        var _b = this.scrollBehaviorY.checkInBoundary(), y = _b.position, yInBoundary = _b.inBoundary;\r\n        if (xInBoundary && yInBoundary) {\r\n            return false;\r\n        }\r\n        // fix ios 13.4 bouncing\r\n        // see it in issues 982\r\n        this._reflow = this.content.offsetHeight;\r\n        // out of boundary\r\n        this.scrollTo(x, y, time, easing);\r\n        return true;\r\n    };\r\n    Scroller.prototype.updatePositions = function (pos) {\r\n        this.scrollBehaviorX.updatePosition(pos.x);\r\n        this.scrollBehaviorY.updatePosition(pos.y);\r\n    };\r\n    Scroller.prototype.getCurrentPos = function () {\r\n        return this.actions.getCurrentPos();\r\n    };\r\n    Scroller.prototype.enable = function () {\r\n        this.actions.enabled = true;\r\n    };\r\n    Scroller.prototype.disable = function () {\r\n        cancelAnimationFrame(this.animater.timer);\r\n        this.actions.enabled = false;\r\n    };\r\n    Scroller.prototype.destroy = function () {\r\n        var _this = this;\r\n        var keys = [\r\n            'resizeRegister',\r\n            'transitionEndRegister',\r\n            'actionsHandler',\r\n            'actions',\r\n            'hooks',\r\n            'animater',\r\n            'translater',\r\n            'scrollBehaviorX',\r\n            'scrollBehaviorY'\r\n        ];\r\n        keys.forEach(function (key) { return _this[key].destroy(); });\r\n    };\r\n    return Scroller;\r\n}());\n\nvar propertiesConfig = [\r\n    {\r\n        sourceKey: 'scroller.scrollBehaviorX.currentPos',\r\n        key: 'x'\r\n    },\r\n    {\r\n        sourceKey: 'scroller.scrollBehaviorY.currentPos',\r\n        key: 'y'\r\n    },\r\n    {\r\n        sourceKey: 'scroller.scrollBehaviorX.hasScroll',\r\n        key: 'hasHorizontalScroll'\r\n    },\r\n    {\r\n        sourceKey: 'scroller.scrollBehaviorY.hasScroll',\r\n        key: 'hasVerticalScroll'\r\n    },\r\n    {\r\n        sourceKey: 'scroller.scrollBehaviorX.contentSize',\r\n        key: 'scrollerWidth'\r\n    },\r\n    {\r\n        sourceKey: 'scroller.scrollBehaviorY.contentSize',\r\n        key: 'scrollerHeight'\r\n    },\r\n    {\r\n        sourceKey: 'scroller.scrollBehaviorX.maxScrollPos',\r\n        key: 'maxScrollX'\r\n    },\r\n    {\r\n        sourceKey: 'scroller.scrollBehaviorY.maxScrollPos',\r\n        key: 'maxScrollY'\r\n    },\r\n    {\r\n        sourceKey: 'scroller.scrollBehaviorX.minScrollPos',\r\n        key: 'minScrollX'\r\n    },\r\n    {\r\n        sourceKey: 'scroller.scrollBehaviorY.minScrollPos',\r\n        key: 'minScrollY'\r\n    },\r\n    {\r\n        sourceKey: 'scroller.scrollBehaviorX.movingDirection',\r\n        key: 'movingDirectionX'\r\n    },\r\n    {\r\n        sourceKey: 'scroller.scrollBehaviorY.movingDirection',\r\n        key: 'movingDirectionY'\r\n    },\r\n    {\r\n        sourceKey: 'scroller.scrollBehaviorX.direction',\r\n        key: 'directionX'\r\n    },\r\n    {\r\n        sourceKey: 'scroller.scrollBehaviorY.direction',\r\n        key: 'directionY'\r\n    },\r\n    {\r\n        sourceKey: 'scroller.actions.enabled',\r\n        key: 'enabled'\r\n    },\r\n    {\r\n        sourceKey: 'scroller.animater.pending',\r\n        key: 'pending'\r\n    },\r\n    {\r\n        sourceKey: 'scroller.animater.stop',\r\n        key: 'stop'\r\n    },\r\n    {\r\n        sourceKey: 'scroller.scrollTo',\r\n        key: 'scrollTo'\r\n    },\r\n    {\r\n        sourceKey: 'scroller.scrollBy',\r\n        key: 'scrollBy'\r\n    },\r\n    {\r\n        sourceKey: 'scroller.scrollToElement',\r\n        key: 'scrollToElement'\r\n    },\r\n    {\r\n        sourceKey: 'scroller.resetPosition',\r\n        key: 'resetPosition'\r\n    }\r\n];\n\nvar BScroll = /** @class */ (function (_super) {\r\n    __extends(BScroll, _super);\r\n    function BScroll(el, options) {\r\n        var _this = _super.call(this, [\r\n            'refresh',\r\n            'enable',\r\n            'disable',\r\n            'beforeScrollStart',\r\n            'scrollStart',\r\n            'scroll',\r\n            'scrollEnd',\r\n            'scrollCancel',\r\n            'touchEnd',\r\n            'flick',\r\n            'destroy'\r\n        ]) || this;\r\n        var wrapper = getElement(el);\r\n        if (!wrapper) {\r\n            warn('Can not resolve the wrapper DOM.');\r\n            return _this;\r\n        }\r\n        var content = wrapper.children[0];\r\n        if (!content) {\r\n            warn('The wrapper need at least one child element to be scroller.');\r\n            return _this;\r\n        }\r\n        _this.plugins = {};\r\n        _this.options = new Options().merge(options).process();\r\n        _this.hooks = new EventEmitter([\r\n            'init',\r\n            'refresh',\r\n            'enable',\r\n            'disable',\r\n            'destroy'\r\n        ]);\r\n        _this.init(wrapper);\r\n        return _this;\r\n    }\r\n    BScroll.use = function (ctor) {\r\n        var name = ctor.pluginName;\r\n        var installed = this.plugins.some(function (plugin) { return ctor === plugin.ctor; });\r\n        if (installed)\r\n            return this;\r\n        if (isUndef(name)) {\r\n            warn(\"Plugin Class must specify plugin's name in static property by 'pluginName' field.\");\r\n            return this;\r\n        }\r\n        if (this.pluginsMap[name]) {\r\n            warn(\"This plugin has been registered, maybe you need change plugin's name\");\r\n            return this;\r\n        }\r\n        this.pluginsMap[name] = true;\r\n        this.plugins.push({\r\n            name: name,\r\n            applyOrder: ctor.applyOrder,\r\n            ctor: ctor\r\n        });\r\n        return this;\r\n    };\r\n    BScroll.prototype.init = function (wrapper) {\r\n        this.wrapper = wrapper;\r\n        wrapper.isBScrollContainer = true;\r\n        this.scroller = new Scroller(wrapper, this.options);\r\n        this.eventBubbling();\r\n        this.handleAutoBlur();\r\n        this.innerRefresh();\r\n        this.scroller.scrollTo(this.options.startX, this.options.startY);\r\n        this.enable();\r\n        this.proxy(propertiesConfig);\r\n        this.applyPlugins();\r\n    };\r\n    BScroll.prototype.applyPlugins = function () {\r\n        var _this = this;\r\n        var options = this.options;\r\n        this.constructor.plugins\r\n            .sort(function (a, b) {\r\n            var _a;\r\n            var applyOrderMap = (_a = {},\r\n                _a[\"pre\" /* Pre */] = -1,\r\n                _a[\"post\" /* Post */] = 1,\r\n                _a);\r\n            var aOrder = a.applyOrder ? applyOrderMap[a.applyOrder] : 0;\r\n            var bOrder = b.applyOrder ? applyOrderMap[b.applyOrder] : 0;\r\n            return aOrder - bOrder;\r\n        })\r\n            .forEach(function (item) {\r\n            var ctor = item.ctor;\r\n            if (options[item.name] && typeof ctor === 'function') {\r\n                _this.plugins[item.name] = new ctor(_this);\r\n            }\r\n        });\r\n    };\r\n    BScroll.prototype.handleAutoBlur = function () {\r\n        if (this.options.autoBlur) {\r\n            this.on(this.eventTypes.beforeScrollStart, function () {\r\n                var activeElement = document.activeElement;\r\n                if (activeElement &&\r\n                    (activeElement.tagName === 'INPUT' ||\r\n                        activeElement.tagName === 'TEXTAREA')) {\r\n                    activeElement.blur();\r\n                }\r\n            });\r\n        }\r\n    };\r\n    BScroll.prototype.eventBubbling = function () {\r\n        bubbling(this.scroller.hooks, this, [\r\n            'beforeScrollStart',\r\n            'scrollStart',\r\n            'scroll',\r\n            'scrollEnd',\r\n            'scrollCancel',\r\n            'touchEnd',\r\n            'flick'\r\n        ]);\r\n    };\r\n    BScroll.prototype.innerRefresh = function () {\r\n        this.scroller.refresh();\r\n        this.hooks.trigger(this.hooks.eventTypes.refresh);\r\n        this.trigger(this.eventTypes.refresh);\r\n    };\r\n    BScroll.prototype.proxy = function (propertiesConfig) {\r\n        var _this = this;\r\n        propertiesConfig.forEach(function (_a) {\r\n            var key = _a.key, sourceKey = _a.sourceKey;\r\n            propertiesProxy(_this, sourceKey, key);\r\n        });\r\n    };\r\n    BScroll.prototype.refresh = function () {\r\n        this.innerRefresh();\r\n        this.scroller.resetPosition();\r\n    };\r\n    BScroll.prototype.enable = function () {\r\n        this.scroller.enable();\r\n        this.hooks.trigger(this.hooks.eventTypes.enable);\r\n        this.trigger(this.eventTypes.enable);\r\n    };\r\n    BScroll.prototype.disable = function () {\r\n        this.scroller.disable();\r\n        this.hooks.trigger(this.hooks.eventTypes.disable);\r\n        this.trigger(this.eventTypes.disable);\r\n    };\r\n    BScroll.prototype.destroy = function () {\r\n        this.hooks.trigger(this.hooks.eventTypes.destroy);\r\n        this.trigger(this.eventTypes.destroy);\r\n        this.scroller.destroy();\r\n    };\r\n    BScroll.prototype.eventRegister = function (names) {\r\n        this.registerType(names);\r\n    };\r\n    BScroll.plugins = [];\r\n    BScroll.pluginsMap = {};\r\n    return BScroll;\r\n}(EventEmitter));\n\nvar MouseWheel = /** @class */ (function () {\r\n    function MouseWheel(scroll) {\r\n        this.scroll = scroll;\r\n        this.wheelStart = false;\r\n        scroll.registerType(['mousewheelMove', 'mousewheelStart', 'mousewheelEnd']);\r\n        this.mouseWheelOpt = scroll.options.mouseWheel;\r\n        this.deltaCache = [];\r\n        this.registorEvent();\r\n        this.hooksFn = [];\r\n        this.registorHooks(scroll.hooks, 'destroy', this.destroy);\r\n    }\r\n    MouseWheel.prototype.destroy = function () {\r\n        this.eventRegistor.destroy();\r\n        window.clearTimeout(this.wheelEndTimer);\r\n        window.clearTimeout(this.wheelMoveTimer);\r\n        this.hooksFn.forEach(function (item) {\r\n            var hooks = item[0];\r\n            var hooksName = item[1];\r\n            var handlerFn = item[2];\r\n            hooks.off(hooksName, handlerFn);\r\n        });\r\n    };\r\n    MouseWheel.prototype.registorEvent = function () {\r\n        this.eventRegistor = new EventRegister(this.scroll.scroller.wrapper, [\r\n            {\r\n                name: 'wheel',\r\n                handler: this.wheelHandler.bind(this)\r\n            },\r\n            {\r\n                name: 'mousewheel',\r\n                handler: this.wheelHandler.bind(this)\r\n            },\r\n            {\r\n                name: 'DOMMouseScroll',\r\n                handler: this.wheelHandler.bind(this)\r\n            }\r\n        ]);\r\n    };\r\n    MouseWheel.prototype.wheelHandler = function (e) {\r\n        this.beforeHandler(e);\r\n        // start\r\n        if (!this.wheelStart) {\r\n            this.wheelStartHandler(e);\r\n            this.wheelStart = true;\r\n        }\r\n        // move\r\n        var delta = this.getWheelDelta(e);\r\n        this.wheelMove(delta);\r\n        // end\r\n        this.wheelStopDetactor(e, delta);\r\n    };\r\n    MouseWheel.prototype.wheelStartHandler = function (e) {\r\n        this.deltaCache = [];\r\n        this.scroll.trigger(this.scroll.eventTypes.mousewheelStart);\r\n    };\r\n    MouseWheel.prototype.wheelStopDetactor = function (e, delta) {\r\n        var _this = this;\r\n        window.clearTimeout(this.wheelEndTimer);\r\n        var delayTime = this.mouseWheelOpt.throttle || 400;\r\n        this.wheelEndTimer = window.setTimeout(function () {\r\n            _this.wheelStart = false;\r\n            window.clearTimeout(_this.wheelMoveTimer);\r\n            _this.wheelMoveTimer = 0;\r\n            _this.scroll.trigger(_this.scroll.eventTypes.mousewheelEnd, delta);\r\n        }, delayTime);\r\n    };\r\n    MouseWheel.prototype.getWheelDelta = function (e) {\r\n        var _a = this.mouseWheelOpt, _b = _a.speed, speed = _b === void 0 ? 20 : _b, _c = _a.invert, invert = _c === void 0 ? false : _c;\r\n        var wheelDeltaX = 0;\r\n        var wheelDeltaY = 0;\r\n        var direction = invert ? -1 /* Negative */ : 1 /* Positive */;\r\n        switch (true) {\r\n            case 'deltaX' in e:\r\n                if (e.deltaMode === 1) {\r\n                    wheelDeltaX = -e.deltaX * speed;\r\n                    wheelDeltaY = -e.deltaY * speed;\r\n                }\r\n                else {\r\n                    wheelDeltaX = -e.deltaX;\r\n                    wheelDeltaY = -e.deltaY;\r\n                }\r\n                break;\r\n            case 'wheelDeltaX' in e:\r\n                wheelDeltaX = (e.wheelDeltaX / 120) * speed;\r\n                wheelDeltaY = (e.wheelDeltaY / 120) * speed;\r\n                break;\r\n            case 'wheelDelta' in e:\r\n                wheelDeltaX = wheelDeltaY = (e.wheelDelta / 120) * speed;\r\n                break;\r\n            case 'detail' in e:\r\n                wheelDeltaX = wheelDeltaY = (-e.detail / 3) * speed;\r\n                break;\r\n        }\r\n        wheelDeltaX *= direction;\r\n        wheelDeltaY *= direction;\r\n        if (!this.scroll.scroller.scrollBehaviorY.hasScroll) {\r\n            wheelDeltaX = wheelDeltaY;\r\n            wheelDeltaY = 0;\r\n        }\r\n        if (!this.scroll.scroller.scrollBehaviorX.hasScroll) {\r\n            wheelDeltaX = 0;\r\n        }\r\n        var directionX = wheelDeltaX > 0\r\n            ? -1 /* Negative */\r\n            : wheelDeltaX < 0\r\n                ? 1 /* Positive */\r\n                : 0;\r\n        var directionY = wheelDeltaY > 0\r\n            ? -1 /* Negative */\r\n            : wheelDeltaY < 0\r\n                ? 1 /* Positive */\r\n                : 0;\r\n        return {\r\n            x: wheelDeltaX,\r\n            y: wheelDeltaY,\r\n            directionX: directionX,\r\n            directionY: directionY\r\n        };\r\n    };\r\n    MouseWheel.prototype.beforeHandler = function (e) {\r\n        var _a = this.scroll.options, preventDefault = _a.preventDefault, stopPropagation = _a.stopPropagation, preventDefaultException = _a.preventDefaultException;\r\n        if (preventDefault &&\r\n            !preventDefaultExceptionFn(e.target, preventDefaultException)) {\r\n            e.preventDefault();\r\n        }\r\n        if (stopPropagation) {\r\n            e.stopPropagation();\r\n        }\r\n    };\r\n    MouseWheel.prototype.wheelMove = function (delta) {\r\n        var _this = this;\r\n        if (this.mouseWheelOpt.debounce && this.wheelMoveTimer) {\r\n            this.deltaCache.push(delta);\r\n        }\r\n        else {\r\n            var cachedDelta = this.deltaCache.reduce(function (prev, current) {\r\n                return {\r\n                    x: prev.x + current.x,\r\n                    y: prev.y + current.y\r\n                };\r\n            }, { x: 0, y: 0 });\r\n            this.deltaCache = [];\r\n            var newX = this.scroll.x + Math.round(delta.x) + cachedDelta.x;\r\n            var newY = this.scroll.y + Math.round(delta.y) + cachedDelta.y;\r\n            var scrollBehaviorX = this.scroll.scroller.scrollBehaviorX;\r\n            var scrollBehaviorY = this.scroll.scroller.scrollBehaviorY;\r\n            newX = fixInboundValue(newX, scrollBehaviorX.maxScrollPos, scrollBehaviorX.minScrollPos);\r\n            newY = fixInboundValue(newY, scrollBehaviorY.maxScrollPos, scrollBehaviorY.minScrollPos);\r\n            if (!this.scroll.trigger(this.scroll.eventTypes.mousewheelMove, {\r\n                x: newX,\r\n                y: newY\r\n            })) {\r\n                var easeTime = this.getEaseTime();\r\n                if (newX !== this.scroll.x || newY !== this.scroll.y) {\r\n                    this.scroll.scrollTo(newX, newY, easeTime);\r\n                }\r\n            }\r\n            if (this.mouseWheelOpt.debounce) {\r\n                this.wheelMoveTimer = window.setTimeout(function () {\r\n                    _this.wheelMoveTimer = 0;\r\n                }, this.mouseWheelOpt.debounce);\r\n            }\r\n        }\r\n    };\r\n    MouseWheel.prototype.registorHooks = function (hooks, name, handler) {\r\n        hooks.on(name, handler, this);\r\n        this.hooksFn.push([hooks, name, handler]);\r\n    };\r\n    MouseWheel.prototype.getEaseTime = function () {\r\n        var DEFAULT_EASETIME = 300;\r\n        var SAFE_EASETIME = 100;\r\n        var easeTime = this.mouseWheelOpt.easeTime || DEFAULT_EASETIME;\r\n        // scrollEnd event will be triggered in every calling of scrollTo when easeTime is too small\r\n        // easeTime needs to be greater than 100\r\n        if (easeTime < SAFE_EASETIME) {\r\n            warn(\"easeTime should be greater than 100.\\n      If mouseWheel easeTime is too small, scrollEnd will be triggered many times.\");\r\n        }\r\n        return easeTime;\r\n    };\r\n    MouseWheel.pluginName = 'mouseWheel';\r\n    MouseWheel.applyOrder = \"pre\" /* Pre */;\r\n    return MouseWheel;\r\n}());\n\nvar ObserveDOM = /** @class */ (function () {\r\n    function ObserveDOM(scroll) {\r\n        var _this = this;\r\n        this.scroll = scroll;\r\n        this.stopObserver = false;\r\n        this.hooksFn = [];\r\n        this.init();\r\n        this.registorHooks(this.scroll.hooks, 'enable', function () {\r\n            if (_this.stopObserver) {\r\n                _this.init();\r\n            }\r\n        });\r\n        this.registorHooks(this.scroll.hooks, 'disable', function () {\r\n            _this.stopObserve();\r\n        });\r\n        this.registorHooks(this.scroll.hooks, 'destroy', function () {\r\n            _this.destroy();\r\n        });\r\n    }\r\n    ObserveDOM.prototype.init = function () {\r\n        var _this = this;\r\n        if (typeof MutationObserver !== 'undefined') {\r\n            var timer_1 = 0;\r\n            this.observer = new MutationObserver(function (mutations) {\r\n                _this.mutationObserverHandler(mutations, timer_1);\r\n            });\r\n            this.startObserve(this.observer);\r\n        }\r\n        else {\r\n            this.checkDOMUpdate();\r\n        }\r\n    };\r\n    ObserveDOM.prototype.destroy = function () {\r\n        this.stopObserve();\r\n        this.hooksFn.forEach(function (item) {\r\n            var hooks = item[0];\r\n            var hooksName = item[1];\r\n            var handlerFn = item[2];\r\n            hooks.off(hooksName, handlerFn);\r\n        });\r\n        this.hooksFn.length = 0;\r\n    };\r\n    ObserveDOM.prototype.mutationObserverHandler = function (mutations, timer) {\r\n        var _this = this;\r\n        if (this.shouldNotRefresh()) {\r\n            return;\r\n        }\r\n        var immediateRefresh = false;\r\n        var deferredRefresh = false;\r\n        for (var i = 0; i < mutations.length; i++) {\r\n            var mutation = mutations[i];\r\n            if (mutation.type !== 'attributes') {\r\n                immediateRefresh = true;\r\n                break;\r\n            }\r\n            else {\r\n                if (mutation.target !== this.scroll.scroller.content) {\r\n                    deferredRefresh = true;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        if (immediateRefresh) {\r\n            this.scroll.refresh();\r\n        }\r\n        else if (deferredRefresh) {\r\n            // attributes changes too often\r\n            clearTimeout(timer);\r\n            timer = window.setTimeout(function () {\r\n                if (!_this.shouldNotRefresh()) {\r\n                    _this.scroll.refresh();\r\n                }\r\n            }, 60);\r\n        }\r\n    };\r\n    ObserveDOM.prototype.startObserve = function (observer) {\r\n        var config = {\r\n            attributes: true,\r\n            childList: true,\r\n            subtree: true\r\n        };\r\n        observer.observe(this.scroll.scroller.content, config);\r\n    };\r\n    ObserveDOM.prototype.shouldNotRefresh = function () {\r\n        var scroller = this.scroll.scroller;\r\n        var scrollBehaviorX = scroller.scrollBehaviorX;\r\n        var scrollBehaviorY = scroller.scrollBehaviorY;\r\n        var outsideBoundaries = scrollBehaviorX.currentPos > scrollBehaviorX.minScrollPos ||\r\n            scrollBehaviorX.currentPos < scrollBehaviorX.maxScrollPos ||\r\n            scrollBehaviorY.currentPos > scrollBehaviorY.minScrollPos ||\r\n            scrollBehaviorY.currentPos < scrollBehaviorY.maxScrollPos;\r\n        return scroller.animater.pending || outsideBoundaries;\r\n    };\r\n    ObserveDOM.prototype.checkDOMUpdate = function () {\r\n        var me = this;\r\n        var scrollIns = this.scroll;\r\n        var scrollerEl = scrollIns.scroller.content;\r\n        var scrollerRect = getRect(scrollerEl);\r\n        var oldWidth = scrollerRect.width;\r\n        var oldHeight = scrollerRect.height;\r\n        function check() {\r\n            if (me.stopObserver) {\r\n                return;\r\n            }\r\n            scrollerRect = getRect(scrollerEl);\r\n            var newWidth = scrollerRect.width;\r\n            var newHeight = scrollerRect.height;\r\n            if (oldWidth !== newWidth || oldHeight !== newHeight) {\r\n                scrollIns.refresh();\r\n            }\r\n            oldWidth = newWidth;\r\n            oldHeight = newHeight;\r\n            next();\r\n        }\r\n        function next() {\r\n            setTimeout(function () {\r\n                check();\r\n            }, 1000);\r\n        }\r\n        next();\r\n    };\r\n    ObserveDOM.prototype.registorHooks = function (hooks, name, handler) {\r\n        hooks.on(name, handler, this);\r\n        this.hooksFn.push([hooks, name, handler]);\r\n    };\r\n    ObserveDOM.prototype.stopObserve = function () {\r\n        this.stopObserver = true;\r\n        if (this.observer) {\r\n            this.observer.disconnect();\r\n        }\r\n    };\r\n    ObserveDOM.pluginName = 'observeDOM';\r\n    return ObserveDOM;\r\n}());\n\nvar sourcePrefix = 'plugins.pullDownRefresh';\r\nvar propertiesMap = [\r\n    {\r\n        key: 'finishPullDown',\r\n        name: 'finish'\r\n    },\r\n    {\r\n        key: 'openPullDown',\r\n        name: 'open'\r\n    },\r\n    {\r\n        key: 'closePullDown',\r\n        name: 'close'\r\n    },\r\n    {\r\n        key: 'autoPullDownRefresh',\r\n        name: 'autoPull'\r\n    }\r\n];\r\nvar propertiesProxyConfig = propertiesMap.map(function (item) {\r\n    return {\r\n        key: item.key,\r\n        sourceKey: sourcePrefix + \".\" + item.name\r\n    };\r\n});\n\nvar PullDown = /** @class */ (function () {\r\n    function PullDown(scroll) {\r\n        this.scroll = scroll;\r\n        this.pulling = false;\r\n        if (scroll.options.pullDownRefresh) {\r\n            this._watch();\r\n        }\r\n        this.scroll.registerType(['pullingDown']);\r\n        this.scroll.proxy(propertiesProxyConfig);\r\n    }\r\n    PullDown.prototype._watch = function () {\r\n        // 需要设置 probe = 3 吗？\r\n        // must watch scroll in real time\r\n        this.scroll.options.probeType = 3 /* Realtime */;\r\n        this.scroll.scroller.hooks.on('end', this._checkPullDown, this);\r\n    };\r\n    PullDown.prototype._checkPullDown = function () {\r\n        if (!this.scroll.options.pullDownRefresh) {\r\n            return;\r\n        }\r\n        var _a = this.scroll.options\r\n            .pullDownRefresh, _b = _a.threshold, threshold = _b === void 0 ? 90 : _b, _c = _a.stop, stop = _c === void 0 ? 40 : _c;\r\n        // check if a real pull down action\r\n        if (this.scroll.directionY !== -1 /* Negative */ ||\r\n            this.scroll.y < threshold) {\r\n            return false;\r\n        }\r\n        if (!this.pulling) {\r\n            this.pulling = true;\r\n            this.scroll.trigger('pullingDown');\r\n            this.originalMinScrollY = this.scroll.minScrollY;\r\n            this.scroll.minScrollY = stop;\r\n        }\r\n        this.scroll.scrollTo(this.scroll.x, stop, this.scroll.options.bounceTime, ease.bounce);\r\n        return this.pulling;\r\n    };\r\n    PullDown.prototype.finish = function () {\r\n        this.pulling = false;\r\n        this.scroll.minScrollY = this.originalMinScrollY;\r\n        this.scroll.resetPosition(this.scroll.options.bounceTime, ease.bounce);\r\n    };\r\n    PullDown.prototype.open = function (config) {\r\n        if (config === void 0) { config = true; }\r\n        this.scroll.options.pullDownRefresh = config;\r\n        this._watch();\r\n    };\r\n    PullDown.prototype.close = function () {\r\n        this.scroll.options.pullDownRefresh = false;\r\n    };\r\n    PullDown.prototype.autoPull = function () {\r\n        var _a = this.scroll.options\r\n            .pullDownRefresh, _b = _a.threshold, threshold = _b === void 0 ? 90 : _b, _c = _a.stop, stop = _c === void 0 ? 40 : _c;\r\n        if (this.pulling) {\r\n            return;\r\n        }\r\n        this.pulling = true;\r\n        this.originalMinScrollY = this.scroll.minScrollY;\r\n        this.scroll.minScrollY = threshold;\r\n        this.scroll.scrollTo(this.scroll.x, threshold);\r\n        this.scroll.trigger('pullingDown');\r\n        this.scroll.scrollTo(this.scroll.x, stop, this.scroll.options.bounceTime, ease.bounce);\r\n    };\r\n    PullDown.pluginName = 'pullDownRefresh';\r\n    return PullDown;\r\n}());\n\nvar sourcePrefix$1 = 'plugins.pullUpLoad';\r\nvar propertiesMap$1 = [\r\n    {\r\n        key: 'finishPullUp',\r\n        name: 'finish'\r\n    },\r\n    {\r\n        key: 'openPullUp',\r\n        name: 'open'\r\n    },\r\n    {\r\n        key: 'closePullUp',\r\n        name: 'close'\r\n    }\r\n];\r\nvar propertiesProxyConfig$1 = propertiesMap$1.map(function (item) {\r\n    return {\r\n        key: item.key,\r\n        sourceKey: sourcePrefix$1 + \".\" + item.name\r\n    };\r\n});\n\nvar PullUp = /** @class */ (function () {\r\n    function PullUp(bscroll) {\r\n        this.bscroll = bscroll;\r\n        this.watching = false;\r\n        if (bscroll.options.pullUpLoad) {\r\n            this._watch();\r\n        }\r\n        this.bscroll.registerType(['pullingUp']);\r\n        this.bscroll.proxy(propertiesProxyConfig$1);\r\n    }\r\n    PullUp.prototype._watch = function () {\r\n        if (this.watching) {\r\n            return;\r\n        }\r\n        // must watch scroll in real time\r\n        this.bscroll.options.probeType = 3 /* Realtime */;\r\n        this.watching = true;\r\n        this.bscroll.on('scroll', this._checkToEnd, this);\r\n    };\r\n    PullUp.prototype._checkToEnd = function (pos) {\r\n        var _this = this;\r\n        if (!this.bscroll.options.pullUpLoad) {\r\n            return;\r\n        }\r\n        var _a = this.bscroll.options\r\n            .pullUpLoad.threshold, threshold = _a === void 0 ? 0 : _a;\r\n        if (this.bscroll.movingDirectionY === 1 /* Positive */ &&\r\n            pos.y <= this.bscroll.maxScrollY + threshold) {\r\n            // reset pullupWatching status after scroll end to promise that trigger 'pullingUp' only once when pulling up\r\n            this.bscroll.once('scrollEnd', function () {\r\n                _this.watching = false;\r\n            });\r\n            this.bscroll.trigger('pullingUp');\r\n            this.bscroll.off('scroll', this._checkToEnd);\r\n        }\r\n    };\r\n    PullUp.prototype.finish = function () {\r\n        if (this.watching) {\r\n            this.bscroll.once('scrollEnd', this._watch, this);\r\n        }\r\n        else {\r\n            this._watch();\r\n        }\r\n    };\r\n    PullUp.prototype.open = function (config) {\r\n        if (config === void 0) { config = true; }\r\n        this.bscroll.options.pullUpLoad = config;\r\n        this._watch();\r\n    };\r\n    PullUp.prototype.close = function () {\r\n        this.bscroll.options.pullUpLoad = false;\r\n        if (!this.watching) {\r\n            return;\r\n        }\r\n        this.watching = false;\r\n        this.bscroll.off('scroll', this._checkToEnd);\r\n    };\r\n    PullUp.pluginName = 'pullUpLoad';\r\n    return PullUp;\r\n}());\n\nvar EventHandler = /** @class */ (function () {\r\n    function EventHandler(indicator, options) {\r\n        this.indicator = indicator;\r\n        this.options = options;\r\n        this.bscroll = indicator.bscroll;\r\n        this.startEventRegister = new EventRegister(this.indicator.el, [\r\n            {\r\n                name: options.disableMouse ? 'touchstart' : 'mousedown',\r\n                handler: this._start.bind(this)\r\n            }\r\n        ]);\r\n        this.endEventRegister = new EventRegister(window, [\r\n            {\r\n                name: options.disableMouse ? 'touchend' : 'mouseup',\r\n                handler: this._end.bind(this)\r\n            }\r\n        ]);\r\n        this.hooks = new EventEmitter(['touchStart', 'touchMove', 'touchEnd']);\r\n    }\r\n    EventHandler.prototype._start = function (e) {\r\n        var point = (e.touches ? e.touches[0] : e);\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        this.initiated = true;\r\n        this.moved = false;\r\n        this.lastPoint = point[this.indicator.keysMap.pointPos];\r\n        var disableMouse = this.bscroll.options.disableMouse;\r\n        this.moveEventRegister = new EventRegister(window, [\r\n            {\r\n                name: disableMouse ? 'touchmove' : 'mousemove',\r\n                handler: this._move.bind(this)\r\n            }\r\n        ]);\r\n        this.hooks.trigger('touchStart');\r\n    };\r\n    EventHandler.prototype._move = function (e) {\r\n        var point = (e.touches ? e.touches[0] : e);\r\n        var pointPos = point[this.indicator.keysMap.pointPos];\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        var delta = pointPos - this.lastPoint;\r\n        this.lastPoint = pointPos;\r\n        if (!this.moved) {\r\n            this.hooks.trigger('touchMove', this.moved, delta);\r\n            this.moved = true;\r\n            return;\r\n        }\r\n        this.hooks.trigger('touchMove', this.moved, delta);\r\n    };\r\n    EventHandler.prototype._end = function (e) {\r\n        if (!this.initiated) {\r\n            return;\r\n        }\r\n        this.initiated = false;\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        this.moveEventRegister.destroy();\r\n        this.hooks.trigger('touchEnd', this.moved);\r\n    };\r\n    EventHandler.prototype.destroy = function () {\r\n        this.startEventRegister.destroy();\r\n        this.moveEventRegister && this.moveEventRegister.destroy();\r\n        this.endEventRegister.destroy();\r\n    };\r\n    return EventHandler;\r\n}());\n\nvar INDICATOR_MIN_LEN = 8;\r\nvar Indicator = /** @class */ (function () {\r\n    function Indicator(bscroll, options) {\r\n        this.bscroll = bscroll;\r\n        this.options = options;\r\n        this.keyVals = {\r\n            sizeRatio: 1,\r\n            maxPos: 0,\r\n            initialSize: 0\r\n        };\r\n        this.curPos = 0;\r\n        this.hooksHandlers = [];\r\n        this.wrapper = options.wrapper;\r\n        this.wrapperStyle = this.wrapper.style;\r\n        this.el = this.wrapper.children[0];\r\n        this.elStyle = this.el.style;\r\n        this.bscroll = bscroll;\r\n        this.direction = options.direction;\r\n        this.keysMap = this._getKeysMap();\r\n        if (options.fade) {\r\n            this.visible = 0;\r\n            this.wrapperStyle.opacity = '0';\r\n        }\r\n        else {\r\n            this.visible = 1;\r\n        }\r\n        this._listenHooks(options.fade, options.interactive);\r\n        this.refresh();\r\n    }\r\n    Indicator.prototype._listenHooks = function (fade, interactive) {\r\n        var _this = this;\r\n        var bscroll = this.bscroll;\r\n        var bscrollHooks = bscroll;\r\n        var translaterHooks = bscroll.scroller.translater.hooks;\r\n        var animaterHooks = bscroll.scroller.animater.hooks;\r\n        this._listen(bscrollHooks, 'refresh', this.refresh);\r\n        this._listen(translaterHooks, 'translate', this.updatePosAndSize);\r\n        this._listen(animaterHooks, 'time', function (time) {\r\n            _this.setTransitionTime(time);\r\n        });\r\n        this._listen(animaterHooks, 'timeFunction', function (ease) {\r\n            _this.setTransitionTimingFunction(ease);\r\n        });\r\n        if (fade) {\r\n            this._listen(bscrollHooks, 'scrollEnd', function () {\r\n                _this.fade();\r\n            });\r\n            this._listen(bscrollHooks, 'scrollStart', function () {\r\n                _this.fade(true);\r\n            });\r\n            // for mousewheel event\r\n            if (bscroll.eventTypes.mousewheelStart &&\r\n                bscroll.eventTypes.mousewheelEnd) {\r\n                this._listen(bscrollHooks, 'mousewheelStart', function () {\r\n                    _this.fade(true);\r\n                });\r\n                this._listen(bscrollHooks, 'mousewheelEnd', function () {\r\n                    _this.fade();\r\n                });\r\n            }\r\n        }\r\n        if (interactive) {\r\n            var disableMouse = this.bscroll.options.disableMouse;\r\n            this.eventHandler = new EventHandler(this, { disableMouse: disableMouse });\r\n            var eventHandlerHooks = this.eventHandler.hooks;\r\n            this._listen(eventHandlerHooks, 'touchStart', this.startHandler);\r\n            this._listen(eventHandlerHooks, 'touchMove', this.moveHandler);\r\n            this._listen(eventHandlerHooks, 'touchEnd', this.endHandler);\r\n        }\r\n    };\r\n    Indicator.prototype._getKeysMap = function () {\r\n        if (this.direction === \"vertical\" /* Vertical */) {\r\n            return {\r\n                hasScroll: 'hasVerticalScroll',\r\n                size: 'height',\r\n                wrapperSize: 'clientHeight',\r\n                scrollerSize: 'scrollerHeight',\r\n                maxScroll: 'maxScrollY',\r\n                pos: 'y',\r\n                pointPos: 'pageY',\r\n                translate: 'translateY'\r\n            };\r\n        }\r\n        return {\r\n            hasScroll: 'hasHorizontalScroll',\r\n            size: 'width',\r\n            wrapperSize: 'clientWidth',\r\n            scrollerSize: 'scrollerWidth',\r\n            maxScroll: 'maxScrollX',\r\n            pos: 'x',\r\n            pointPos: 'pageX',\r\n            translate: 'translateX'\r\n        };\r\n    };\r\n    Indicator.prototype.fade = function (visible) {\r\n        var time = visible ? 250 : 500;\r\n        this.wrapperStyle[style.transitionDuration] = time + 'ms';\r\n        this.wrapperStyle.opacity = visible ? '1' : '0';\r\n        this.visible = visible ? 1 : 0;\r\n    };\r\n    Indicator.prototype.refresh = function () {\r\n        var hasScroll = this.keysMap.hasScroll;\r\n        if (this._setShowBy(this.bscroll[hasScroll])) {\r\n            var _a = this.keysMap, wrapperSize = _a.wrapperSize, scrollerSize = _a.scrollerSize, maxScroll = _a.maxScroll;\r\n            this.keyVals = this._refreshKeyValues(this.wrapper[wrapperSize], this.bscroll[scrollerSize], this.bscroll[maxScroll]);\r\n            this.updatePosAndSize({\r\n                x: this.bscroll.x,\r\n                y: this.bscroll.y\r\n            });\r\n        }\r\n    };\r\n    Indicator.prototype._setShowBy = function (hasScroll) {\r\n        if (hasScroll) {\r\n            this.wrapper.style.display = '';\r\n            return true;\r\n        }\r\n        this.wrapper.style.display = 'none';\r\n        return false;\r\n    };\r\n    Indicator.prototype._refreshKeyValues = function (wrapperSize, scrollerSize, maxScroll) {\r\n        var initialSize = Math.max(Math.round((wrapperSize * wrapperSize) / (scrollerSize || wrapperSize || 1)), INDICATOR_MIN_LEN);\r\n        var maxPos = wrapperSize - initialSize;\r\n        // sizeRatio is negative\r\n        var sizeRatio = maxPos / maxScroll;\r\n        return {\r\n            initialSize: initialSize,\r\n            maxPos: maxPos,\r\n            sizeRatio: sizeRatio\r\n        };\r\n    };\r\n    Indicator.prototype.updatePosAndSize = function (endPoint) {\r\n        var _a = this._refreshPosAndSizeValue(endPoint, this.keyVals), pos = _a.pos, size = _a.size;\r\n        this.curPos = pos;\r\n        this._refreshPosAndSizeStyle(size, pos);\r\n    };\r\n    Indicator.prototype._refreshPosAndSizeValue = function (endPoint, keyVals) {\r\n        var posKey = this.keysMap.pos;\r\n        var sizeRatio = keyVals.sizeRatio, initialSize = keyVals.initialSize, maxPos = keyVals.maxPos;\r\n        var pos = Math.round(sizeRatio * endPoint[posKey]);\r\n        var size;\r\n        if (pos < 0) {\r\n            size = Math.max(initialSize + pos * 3, INDICATOR_MIN_LEN);\r\n            pos = 0;\r\n        }\r\n        else if (pos > maxPos) {\r\n            size = Math.max(initialSize - (pos - maxPos) * 3, INDICATOR_MIN_LEN);\r\n            pos = maxPos + initialSize - size;\r\n        }\r\n        else {\r\n            size = initialSize;\r\n        }\r\n        return {\r\n            pos: pos,\r\n            size: size\r\n        };\r\n    };\r\n    Indicator.prototype._refreshPosAndSizeStyle = function (size, pos) {\r\n        var _a = this.keysMap, translate = _a.translate, sizeKey = _a.size;\r\n        this.elStyle[sizeKey] = size + \"px\";\r\n        this.elStyle[style.transform] = translate + \"(\" + pos + \"px)\" + this.bscroll.options.translateZ;\r\n    };\r\n    Indicator.prototype.setTransitionTime = function (time) {\r\n        if (time === void 0) { time = 0; }\r\n        this.elStyle[style.transitionDuration] = time + 'ms';\r\n    };\r\n    Indicator.prototype.setTransitionTimingFunction = function (easing) {\r\n        this.elStyle[style.transitionTimingFunction] = easing;\r\n    };\r\n    Indicator.prototype.startHandler = function () {\r\n        this.setTransitionTime();\r\n        this.bscroll.trigger('beforeScrollStart');\r\n    };\r\n    Indicator.prototype.moveHandler = function (moved, delta) {\r\n        if (!moved) {\r\n            this.bscroll.trigger('scrollStart');\r\n        }\r\n        var newScrollPos = this._calScrollDesPos(this.curPos, delta, this.keyVals);\r\n        // TODO freeScroll ？\r\n        if (this.direction === \"vertical\" /* Vertical */) {\r\n            this.bscroll.scrollTo(this.bscroll.x, newScrollPos);\r\n        }\r\n        else {\r\n            this.bscroll.scrollTo(newScrollPos, this.bscroll.y);\r\n        }\r\n        this.bscroll.trigger('scroll', {\r\n            x: this.bscroll.x,\r\n            y: this.bscroll.y\r\n        });\r\n    };\r\n    Indicator.prototype._calScrollDesPos = function (curPos, delta, keyVals) {\r\n        var maxPos = keyVals.maxPos, sizeRatio = keyVals.sizeRatio;\r\n        var newPos = curPos + delta;\r\n        if (newPos < 0) {\r\n            newPos = 0;\r\n        }\r\n        else if (newPos > maxPos) {\r\n            newPos = maxPos;\r\n        }\r\n        return Math.round(newPos / sizeRatio);\r\n    };\r\n    Indicator.prototype.endHandler = function (moved) {\r\n        if (moved) {\r\n            this.bscroll.trigger('scrollEnd', {\r\n                x: this.bscroll.x,\r\n                y: this.bscroll.y\r\n            });\r\n        }\r\n    };\r\n    Indicator.prototype.destroy = function () {\r\n        if (this.options.interactive) {\r\n            this.eventHandler.destroy();\r\n        }\r\n        this.wrapper.parentNode.removeChild(this.wrapper);\r\n        this.hooksHandlers.forEach(function (item) {\r\n            var hooks = item[0];\r\n            var hooksName = item[1];\r\n            var handlerFn = item[2];\r\n            hooks.off(hooksName, handlerFn);\r\n        });\r\n        this.hooksHandlers.length = 0;\r\n    };\r\n    Indicator.prototype._listen = function (hooks, name, handler) {\r\n        hooks.on(name, handler, this);\r\n        this.hooksHandlers.push([hooks, name, handler]);\r\n    };\r\n    return Indicator;\r\n}());\n\nvar ScrollBar = /** @class */ (function () {\r\n    function ScrollBar(bscroll) {\r\n        this.indicators = [];\r\n        if (bscroll.options.scrollbar) {\r\n            this.indicators = this._initIndicators(bscroll);\r\n            bscroll.on('destroy', this.destroy, this);\r\n        }\r\n    }\r\n    ScrollBar.prototype._initIndicators = function (bscroll) {\r\n        var _this = this;\r\n        var _a = bscroll.options\r\n            .scrollbar, _b = _a.fade, fade = _b === void 0 ? true : _b, _c = _a.interactive, interactive = _c === void 0 ? false : _c;\r\n        var indicatorOption;\r\n        var scrolls = {\r\n            scrollX: \"horizontal\" /* Horizontal */,\r\n            scrollY: \"vertical\" /* Vertical */\r\n        };\r\n        var indicators = [];\r\n        Object.keys(scrolls).forEach(function (key) {\r\n            var direction = scrolls[key];\r\n            if (bscroll.options[key]) {\r\n                indicatorOption = {\r\n                    wrapper: _this._createIndicatorElement(direction),\r\n                    direction: direction,\r\n                    fade: fade,\r\n                    interactive: interactive\r\n                };\r\n                bscroll.wrapper.appendChild(indicatorOption.wrapper);\r\n                indicators.push(new Indicator(bscroll, indicatorOption));\r\n            }\r\n        });\r\n        return indicators;\r\n    };\r\n    ScrollBar.prototype._createIndicatorElement = function (direction) {\r\n        var scrollbarEl = document.createElement('div');\r\n        var indicatorEl = document.createElement('div');\r\n        scrollbarEl.style.cssText =\r\n            'position:absolute;z-index:9999;pointerEvents:none';\r\n        indicatorEl.style.cssText =\r\n            'box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px;';\r\n        indicatorEl.className = 'bscroll-indicator';\r\n        if (direction === 'horizontal') {\r\n            scrollbarEl.style.cssText += ';height:7px;left:2px;right:2px;bottom:0';\r\n            indicatorEl.style.height = '100%';\r\n            scrollbarEl.className = 'bscroll-horizontal-scrollbar';\r\n        }\r\n        else {\r\n            scrollbarEl.style.cssText += ';width:7px;bottom:2px;top:2px;right:1px';\r\n            indicatorEl.style.width = '100%';\r\n            scrollbarEl.className = 'bscroll-vertical-scrollbar';\r\n        }\r\n        scrollbarEl.style.cssText += ';overflow:hidden';\r\n        scrollbarEl.appendChild(indicatorEl);\r\n        return scrollbarEl;\r\n    };\r\n    ScrollBar.prototype.destroy = function () {\r\n        for (var _i = 0, _a = this.indicators; _i < _a.length; _i++) {\r\n            var indicator = _a[_i];\r\n            indicator.destroy();\r\n        }\r\n    };\r\n    ScrollBar.pluginName = 'scrollbar';\r\n    return ScrollBar;\r\n}());\n\nvar PagesPos = /** @class */ (function () {\r\n    function PagesPos(scroll, slideOpt) {\r\n        this.scroll = scroll;\r\n        this.slideOpt = slideOpt;\r\n        this.slideEl = null;\r\n        this.init();\r\n    }\r\n    PagesPos.prototype.init = function () {\r\n        var scrollerIns = this.scroll.scroller;\r\n        var scrollBehaviorX = scrollerIns.scrollBehaviorX;\r\n        var scrollBehaviorY = scrollerIns.scrollBehaviorY;\r\n        var wrapper = getRect(scrollerIns.wrapper);\r\n        var scroller = getRect(scrollerIns.content);\r\n        this.wrapperWidth = wrapper.width;\r\n        this.wrapperHeight = wrapper.height;\r\n        this.scrollerHeight = scrollBehaviorY.hasScroll\r\n            ? scroller.height\r\n            : wrapper.height;\r\n        this.scrollerWidth = scrollBehaviorX.hasScroll\r\n            ? scroller.width\r\n            : wrapper.width;\r\n        var stepX = this.slideOpt.stepX || this.wrapperWidth;\r\n        var stepY = this.slideOpt.stepY || this.wrapperHeight;\r\n        var slideEls = scrollerIns.content;\r\n        var el = this.slideOpt.el;\r\n        if (typeof el === 'string') {\r\n            this.slideEl = slideEls.querySelectorAll(el);\r\n        }\r\n        this.pages = this.slideEl\r\n            ? this.computePagePosInfoByEl(this.slideEl)\r\n            : this.computePagePosInfo(stepX, stepY);\r\n        this.xLen = this.pages ? this.pages.length : 0;\r\n        this.yLen = this.pages && this.pages[0] ? this.pages[0].length : 0;\r\n    };\r\n    PagesPos.prototype.hasInfo = function () {\r\n        if (!this.pages || !this.pages.length) {\r\n            return false;\r\n        }\r\n        return true;\r\n    };\r\n    PagesPos.prototype.getPos = function (x, y) {\r\n        return this.pages[x][y];\r\n    };\r\n    PagesPos.prototype.getNearestPage = function (x, y) {\r\n        if (!this.hasInfo()) {\r\n            return;\r\n        }\r\n        var pageX = 0;\r\n        var pageY = 0;\r\n        var l = this.pages.length;\r\n        for (; pageX < l - 1; pageX++) {\r\n            if (x >= this.pages[pageX][0].cx) {\r\n                break;\r\n            }\r\n        }\r\n        l = this.pages[pageX].length;\r\n        for (; pageY < l - 1; pageY++) {\r\n            if (y >= this.pages[0][pageY].cy) {\r\n                break;\r\n            }\r\n        }\r\n        return {\r\n            pageX: pageX,\r\n            pageY: pageY\r\n        };\r\n    };\r\n    PagesPos.prototype.computePagePosInfo = function (stepX, stepY) {\r\n        var pages = [];\r\n        var x = 0;\r\n        var y;\r\n        var cx;\r\n        var cy;\r\n        var i = 0;\r\n        var l;\r\n        var maxScrollPosX = this.scroll.scroller.scrollBehaviorX.maxScrollPos;\r\n        var maxScrollPosY = this.scroll.scroller.scrollBehaviorY.maxScrollPos;\r\n        cx = Math.round(stepX / 2);\r\n        cy = Math.round(stepY / 2);\r\n        while (x > -this.scrollerWidth) {\r\n            pages[i] = [];\r\n            l = 0;\r\n            y = 0;\r\n            while (y > -this.scrollerHeight) {\r\n                pages[i][l] = {\r\n                    x: Math.max(x, maxScrollPosX),\r\n                    y: Math.max(y, maxScrollPosY),\r\n                    width: stepX,\r\n                    height: stepY,\r\n                    cx: x - cx,\r\n                    cy: y - cy\r\n                };\r\n                y -= stepY;\r\n                l++;\r\n            }\r\n            x -= stepX;\r\n            i++;\r\n        }\r\n        return pages;\r\n    };\r\n    PagesPos.prototype.computePagePosInfoByEl = function (el) {\r\n        var pages = [];\r\n        var x = 0;\r\n        var y = 0;\r\n        var cx;\r\n        var cy;\r\n        var i = 0;\r\n        var l = el.length;\r\n        var m = 0;\r\n        var n = -1;\r\n        var rect;\r\n        var maxScrollX = this.scroll.scroller.scrollBehaviorX.maxScrollPos;\r\n        var maxScrollY = this.scroll.scroller.scrollBehaviorY.maxScrollPos;\r\n        for (; i < l; i++) {\r\n            rect = getRect(el[i]);\r\n            if (i === 0 || rect.left <= getRect(el[i - 1]).left) {\r\n                m = 0;\r\n                n++;\r\n            }\r\n            if (!pages[m]) {\r\n                pages[m] = [];\r\n            }\r\n            x = Math.max(-rect.left, maxScrollX);\r\n            y = Math.max(-rect.top, maxScrollY);\r\n            cx = x - Math.round(rect.width / 2);\r\n            cy = y - Math.round(rect.height / 2);\r\n            pages[m][n] = {\r\n                x: x,\r\n                y: y,\r\n                width: rect.width,\r\n                height: rect.height,\r\n                cx: cx,\r\n                cy: cy\r\n            };\r\n            if (x > maxScrollX) {\r\n                m++;\r\n            }\r\n        }\r\n        return pages;\r\n    };\r\n    return PagesPos;\r\n}());\n\nvar PageInfo = /** @class */ (function () {\r\n    function PageInfo(scroll, slideOpt) {\r\n        this.scroll = scroll;\r\n        this.slideOpt = slideOpt;\r\n    }\r\n    PageInfo.prototype.init = function () {\r\n        this.currentPage = this.currentPage || {\r\n            x: 0,\r\n            y: 0,\r\n            pageX: 0,\r\n            pageY: 0\r\n        };\r\n        this.pagesPos = new PagesPos(this.scroll, this.slideOpt);\r\n        this.checkSlideLoop();\r\n    };\r\n    PageInfo.prototype.changeCurrentPage = function (newPage) {\r\n        this.currentPage = newPage;\r\n    };\r\n    PageInfo.prototype.change2safePage = function (pageX, pageY) {\r\n        if (!this.pagesPos.hasInfo()) {\r\n            return;\r\n        }\r\n        if (pageX >= this.pagesPos.xLen) {\r\n            pageX = this.pagesPos.xLen - 1;\r\n        }\r\n        else if (pageX < 0) {\r\n            pageX = 0;\r\n        }\r\n        if (pageY >= this.pagesPos.yLen) {\r\n            pageY = this.pagesPos.yLen - 1;\r\n        }\r\n        else if (pageY < 0) {\r\n            pageY = 0;\r\n        }\r\n        var _a = this.pagesPos.getPos(pageX, pageY), x = _a.x, y = _a.y;\r\n        return {\r\n            pageX: pageX,\r\n            pageY: pageY,\r\n            x: x,\r\n            y: y\r\n        };\r\n    };\r\n    PageInfo.prototype.getInitPage = function () {\r\n        var initPageX = this.loopX ? 1 : 0;\r\n        var initPageY = this.loopY ? 1 : 0;\r\n        return {\r\n            pageX: this.currentPage.pageX || initPageX,\r\n            pageY: this.currentPage.pageY || initPageY\r\n        };\r\n    };\r\n    PageInfo.prototype.getRealPage = function (page) {\r\n        var fixedPage = function (page, realPageLen) {\r\n            var pageIndex = [];\r\n            for (var i = 0; i < realPageLen; i++) {\r\n                pageIndex.push(i);\r\n            }\r\n            pageIndex.unshift(realPageLen - 1);\r\n            pageIndex.push(0);\r\n            return pageIndex[page];\r\n        };\r\n        var currentPage = page\r\n            ? extend({}, page)\r\n            : extend({}, this.currentPage);\r\n        if (this.loopX) {\r\n            currentPage.pageX = fixedPage(currentPage.pageX, this.pagesPos.xLen - 2);\r\n        }\r\n        if (this.loopY) {\r\n            currentPage.pageY = fixedPage(currentPage.pageY, this.pagesPos.yLen - 2);\r\n        }\r\n        return {\r\n            pageX: currentPage.pageX,\r\n            pageY: currentPage.pageY\r\n        };\r\n    };\r\n    PageInfo.prototype.getPageSize = function () {\r\n        return this.pagesPos.getPos(this.currentPage.pageX, this.currentPage.pageY);\r\n    };\r\n    PageInfo.prototype.realPage2Page = function (x, y) {\r\n        if (!this.pagesPos.hasInfo()) {\r\n            return;\r\n        }\r\n        var lastX = this.pagesPos.xLen - 1;\r\n        var lastY = this.pagesPos.yLen - 1;\r\n        var firstX = 0;\r\n        var firstY = 0;\r\n        if (this.loopX) {\r\n            x += 1;\r\n            firstX = firstX + 1;\r\n            lastX = lastX - 1;\r\n        }\r\n        if (this.loopY) {\r\n            y += 1;\r\n            firstY = firstY + 1;\r\n            lastY = lastY - 1;\r\n        }\r\n        x = fixInboundValue(x, firstX, lastX);\r\n        y = fixInboundValue(y, firstY, lastY);\r\n        return {\r\n            realX: x,\r\n            realY: y\r\n        };\r\n    };\r\n    PageInfo.prototype.nextPage = function () {\r\n        return this.changedPageNum(\"positive\" /* Positive */);\r\n    };\r\n    PageInfo.prototype.prevPage = function () {\r\n        return this.changedPageNum(\"negative\" /* Negative */);\r\n    };\r\n    PageInfo.prototype.nearestPage = function (x, y, directionX, directionY) {\r\n        var pageInfo = this.pagesPos.getNearestPage(x, y);\r\n        if (!pageInfo) {\r\n            return {\r\n                x: 0,\r\n                y: 0,\r\n                pageX: 0,\r\n                pageY: 0\r\n            };\r\n        }\r\n        var pageX = pageInfo.pageX;\r\n        var pageY = pageInfo.pageY;\r\n        var newX;\r\n        var newY;\r\n        if (pageX === this.currentPage.pageX) {\r\n            pageX += directionX;\r\n            pageX = fixInboundValue(pageX, 0, this.pagesPos.xLen - 1);\r\n        }\r\n        if (pageY === this.currentPage.pageY) {\r\n            pageY += directionY;\r\n            pageY = fixInboundValue(pageInfo.pageY, 0, this.pagesPos.yLen - 1);\r\n        }\r\n        newX = this.pagesPos.getPos(pageX, 0).x;\r\n        newY = this.pagesPos.getPos(0, pageY).y;\r\n        return {\r\n            x: newX,\r\n            y: newY,\r\n            pageX: pageX,\r\n            pageY: pageY\r\n        };\r\n    };\r\n    PageInfo.prototype.getLoopStage = function () {\r\n        if (!this.needLoop) {\r\n            return \"middle\" /* Middle */;\r\n        }\r\n        if (this.loopX) {\r\n            if (this.currentPage.pageX === 0) {\r\n                return \"head\" /* Head */;\r\n            }\r\n            if (this.currentPage.pageX === this.pagesPos.xLen - 1) {\r\n                return \"tail\" /* Tail */;\r\n            }\r\n        }\r\n        if (this.loopY) {\r\n            if (this.currentPage.pageY === 0) {\r\n                return \"head\" /* Head */;\r\n            }\r\n            if (this.currentPage.pageY === this.pagesPos.yLen - 1) {\r\n                return \"tail\" /* Tail */;\r\n            }\r\n        }\r\n        return \"middle\" /* Middle */;\r\n    };\r\n    PageInfo.prototype.resetLoopPage = function () {\r\n        if (this.loopX) {\r\n            if (this.currentPage.pageX === 0) {\r\n                return {\r\n                    pageX: this.pagesPos.xLen - 2,\r\n                    pageY: this.currentPage.pageY\r\n                };\r\n            }\r\n            if (this.currentPage.pageX === this.pagesPos.xLen - 1) {\r\n                return {\r\n                    pageX: 1,\r\n                    pageY: this.currentPage.pageY\r\n                };\r\n            }\r\n        }\r\n        if (this.loopY) {\r\n            if (this.currentPage.pageY === 0) {\r\n                return {\r\n                    pageX: this.currentPage.pageX,\r\n                    pageY: this.pagesPos.yLen - 2\r\n                };\r\n            }\r\n            if (this.currentPage.pageY === this.pagesPos.yLen - 1) {\r\n                return {\r\n                    pageX: this.currentPage.pageX,\r\n                    pageY: 1\r\n                };\r\n            }\r\n        }\r\n    };\r\n    PageInfo.prototype.isSameWithCurrent = function (page) {\r\n        if (page.pageX !== this.currentPage.pageX ||\r\n            page.pageY !== this.currentPage.pageY) {\r\n            return false;\r\n        }\r\n        return true;\r\n    };\r\n    PageInfo.prototype.changedPageNum = function (direction) {\r\n        var x = this.currentPage.pageX;\r\n        var y = this.currentPage.pageY;\r\n        if (this.slideX) {\r\n            x = direction === \"negative\" /* Negative */ ? x - 1 : x + 1;\r\n        }\r\n        if (this.slideY) {\r\n            y = direction === \"negative\" /* Negative */ ? y - 1 : y + 1;\r\n        }\r\n        return {\r\n            pageX: x,\r\n            pageY: y\r\n        };\r\n    };\r\n    PageInfo.prototype.checkSlideLoop = function () {\r\n        this.needLoop = this.slideOpt.loop;\r\n        if (this.pagesPos.xLen > 1) {\r\n            this.slideX = true;\r\n        }\r\n        if (this.pagesPos.pages[0] && this.pagesPos.yLen > 1) {\r\n            this.slideY = true;\r\n        }\r\n        this.loopX = this.needLoop && this.slideX;\r\n        this.loopY = this.needLoop && this.slideY;\r\n        if (this.slideX && this.slideY) {\r\n            warn('slide does not support two direction at the same time.');\r\n        }\r\n    };\r\n    return PageInfo;\r\n}());\n\nvar sourcePrefix$2 = 'plugins.slide';\r\nvar propertiesMap$2 = [\r\n    {\r\n        key: 'next',\r\n        name: 'next'\r\n    },\r\n    {\r\n        key: 'prev',\r\n        name: 'prev'\r\n    },\r\n    {\r\n        key: 'goToPage',\r\n        name: 'goToPage'\r\n    },\r\n    {\r\n        key: 'getCurrentPage',\r\n        name: 'getCurrentPage'\r\n    }\r\n];\r\nvar propertiesConfig$1 = propertiesMap$2.map(function (item) {\r\n    return {\r\n        key: item.key,\r\n        sourceKey: sourcePrefix$2 + \".\" + item.name\r\n    };\r\n});\n\nvar Slide = /** @class */ (function () {\r\n    function Slide(scroll) {\r\n        this.scroll = scroll;\r\n        this.resetLooping = false;\r\n        this.isTouching = false;\r\n        this.scroll.proxy(propertiesConfig$1);\r\n        this.scroll.registerType(['slideWillChange']);\r\n        this.slideOpt = this.scroll.options.slide;\r\n        this.page = new PageInfo(scroll, this.slideOpt);\r\n        this.hooksFn = [];\r\n        this.willChangeToPage = {\r\n            pageX: 0,\r\n            pageY: 0\r\n        };\r\n        this.init();\r\n    }\r\n    Slide.prototype.init = function () {\r\n        var _this = this;\r\n        var slide = this.slideOpt;\r\n        var slideEls = this.scroll.scroller.content;\r\n        var lazyInitByRefresh = false;\r\n        if (slide.loop) {\r\n            var children = slideEls.children;\r\n            if (children.length > 1) {\r\n                this.cloneSlideEleForLoop(slideEls);\r\n                lazyInitByRefresh = true;\r\n            }\r\n            else {\r\n                // Loop does not make any sense if there is only one child.\r\n                slide.loop = false;\r\n            }\r\n        }\r\n        var shouldRefreshByWidth = this.setSlideWidth(slideEls);\r\n        var shouldRefreshByHeight = this.setSlideHeight(this.scroll.scroller.wrapper, slideEls);\r\n        var shouldRefresh = shouldRefreshByWidth || shouldRefreshByHeight;\r\n        var scrollHooks = this.scroll.hooks;\r\n        var scrollerHooks = this.scroll.scroller.hooks;\r\n        this.registorHooks(scrollHooks, 'refresh', this.initSlideState);\r\n        this.registorHooks(scrollHooks, 'destroy', this.destroy);\r\n        this.registorHooks(scrollerHooks, 'momentum', this.modifyScrollMetaHandler);\r\n        // scrollEnd handler should be called before customized handlers\r\n        this.registorHooks(this.scroll, 'scrollEnd', this.amendCurrentPage);\r\n        this.registorHooks(scrollerHooks, 'beforeStart', this.setTouchFlag);\r\n        this.registorHooks(scrollerHooks, 'scroll', this.scrollMoving);\r\n        this.registorHooks(scrollerHooks, 'resize', this.resize);\r\n        // for mousewheel event\r\n        if (this.scroll.eventTypes.mousewheelMove &&\r\n            this.scroll.eventTypes.mousewheelEnd) {\r\n            this.registorHooks(this.scroll, 'mousewheelMove', function () {\r\n                // prevent default action of mousewheelMove\r\n                return true;\r\n            });\r\n            this.registorHooks(this.scroll, 'mousewheelEnd', function (delta) {\r\n                if (delta.directionX === 1 /* Positive */ ||\r\n                    delta.directionY === 1 /* Positive */) {\r\n                    _this.next();\r\n                }\r\n                if (delta.directionX === -1 /* Negative */ ||\r\n                    delta.directionY === -1 /* Negative */) {\r\n                    _this.prev();\r\n                }\r\n            });\r\n        }\r\n        if (slide.listenFlick !== false) {\r\n            this.registorHooks(scrollerHooks, 'flick', this.flickHandler);\r\n        }\r\n        if (!lazyInitByRefresh && !shouldRefresh) {\r\n            this.initSlideState();\r\n        }\r\n        else {\r\n            this.scroll.refresh();\r\n        }\r\n    };\r\n    Slide.prototype.resize = function () {\r\n        var _this = this;\r\n        var slideEls = this.scroll.scroller.content;\r\n        var slideWrapper = this.scroll.scroller.wrapper;\r\n        clearTimeout(this.resizeTimeout);\r\n        this.resizeTimeout = window.setTimeout(function () {\r\n            _this.clearSlideWidth(slideEls);\r\n            _this.clearSlideHeight(slideEls);\r\n            _this.setSlideWidth(slideEls);\r\n            _this.setSlideHeight(slideWrapper, slideEls);\r\n            _this.scroll.refresh();\r\n        }, this.scroll.options.resizePolling);\r\n        return true;\r\n    };\r\n    Slide.prototype.next = function (time, easing) {\r\n        var _a = this.page.nextPage(), pageX = _a.pageX, pageY = _a.pageY;\r\n        this.goTo(pageX, pageY, time, easing);\r\n    };\r\n    Slide.prototype.prev = function (time, easing) {\r\n        var _a = this.page.prevPage(), pageX = _a.pageX, pageY = _a.pageY;\r\n        this.goTo(pageX, pageY, time, easing);\r\n    };\r\n    Slide.prototype.goToPage = function (x, y, time, easing) {\r\n        var pageInfo = this.page.realPage2Page(x, y);\r\n        if (!pageInfo) {\r\n            return;\r\n        }\r\n        this.goTo(pageInfo.realX, pageInfo.realY, time, easing);\r\n    };\r\n    Slide.prototype.getCurrentPage = function () {\r\n        return this.page.getRealPage();\r\n    };\r\n    Slide.prototype.nearestPage = function (x, y) {\r\n        var scrollBehaviorX = this.scroll.scroller.scrollBehaviorX;\r\n        var scrollBehaviorY = this.scroll.scroller.scrollBehaviorY;\r\n        var triggerThreshold = true;\r\n        if (Math.abs(x - scrollBehaviorX.absStartPos) <= this.thresholdX &&\r\n            Math.abs(y - scrollBehaviorY.absStartPos) <= this.thresholdY) {\r\n            triggerThreshold = false;\r\n        }\r\n        if (!triggerThreshold) {\r\n            return this.page.currentPage;\r\n        }\r\n        return this.page.nearestPage(fixInboundValue(x, scrollBehaviorX.maxScrollPos, scrollBehaviorX.minScrollPos), fixInboundValue(y, scrollBehaviorY.maxScrollPos, scrollBehaviorY.minScrollPos), scrollBehaviorX.direction, scrollBehaviorY.direction);\r\n    };\r\n    Slide.prototype.destroy = function () {\r\n        var slideEls = this.scroll.scroller.content;\r\n        if (this.slideOpt.loop) {\r\n            var children = slideEls.children;\r\n            if (children.length > 2) {\r\n                removeChild(slideEls, children[children.length - 1]);\r\n                removeChild(slideEls, children[0]);\r\n            }\r\n        }\r\n        this.hooksFn.forEach(function (item) {\r\n            var hooks = item[0];\r\n            var hooksName = item[1];\r\n            var handlerFn = item[2];\r\n            if (hooks.eventTypes[hooksName]) {\r\n                hooks.off(hooksName, handlerFn);\r\n            }\r\n        });\r\n        this.hooksFn.length = 0;\r\n    };\r\n    Slide.prototype.initSlideState = function () {\r\n        this.page.init();\r\n        this.initThreshold();\r\n        var initPage = this.page.getInitPage();\r\n        this.goTo(initPage.pageX, initPage.pageY, 0);\r\n    };\r\n    Slide.prototype.initThreshold = function () {\r\n        var slideThreshold = this.slideOpt.threshold || 0.1;\r\n        if (slideThreshold % 1 === 0) {\r\n            this.thresholdX = slideThreshold;\r\n            this.thresholdY = slideThreshold;\r\n        }\r\n        else {\r\n            var pageSize = this.page.getPageSize();\r\n            this.thresholdX = Math.round(pageSize.width * slideThreshold);\r\n            this.thresholdY = Math.round(pageSize.height * slideThreshold);\r\n        }\r\n    };\r\n    Slide.prototype.cloneSlideEleForLoop = function (slideEls) {\r\n        var children = slideEls.children;\r\n        prepend(children[children.length - 1].cloneNode(true), slideEls);\r\n        slideEls.appendChild(children[1].cloneNode(true));\r\n    };\r\n    Slide.prototype.amendCurrentPage = function () {\r\n        this.isTouching = false;\r\n        if (!this.slideOpt.loop) {\r\n            return;\r\n        }\r\n        // triggered by resetLoop\r\n        if (this.resetLooping) {\r\n            this.resetLooping = false;\r\n            return;\r\n        }\r\n        // fix bug: scroll two page or even more page at once and fetch the boundary.\r\n        // In this case, momentum won't be trigger, so the pageIndex will be wrong and won't be trigger reset.\r\n        var isScrollToBoundary = false;\r\n        if (this.page.loopX &&\r\n            (this.scroll.x === this.scroll.scroller.scrollBehaviorX.minScrollPos ||\r\n                this.scroll.x === this.scroll.scroller.scrollBehaviorX.maxScrollPos)) {\r\n            isScrollToBoundary = true;\r\n        }\r\n        if (this.page.loopY &&\r\n            (this.scroll.y === this.scroll.scroller.scrollBehaviorY.minScrollPos ||\r\n                this.scroll.y === this.scroll.scroller.scrollBehaviorY.maxScrollPos)) {\r\n            isScrollToBoundary = true;\r\n        }\r\n        if (isScrollToBoundary) {\r\n            var scrollBehaviorX = this.scroll.scroller.scrollBehaviorX;\r\n            var scrollBehaviorY = this.scroll.scroller.scrollBehaviorY;\r\n            var newPos = this.page.nearestPage(fixInboundValue(this.scroll.x, scrollBehaviorX.maxScrollPos, scrollBehaviorX.minScrollPos), fixInboundValue(this.scroll.y, scrollBehaviorY.maxScrollPos, scrollBehaviorY.minScrollPos), 0, 0);\r\n            var newPage = {\r\n                x: newPos.x,\r\n                y: newPos.y,\r\n                pageX: newPos.pageX,\r\n                pageY: newPos.pageY\r\n            };\r\n            if (!this.page.isSameWithCurrent(newPage)) {\r\n                this.page.changeCurrentPage(newPage);\r\n            }\r\n        }\r\n        var changePage = this.page.resetLoopPage();\r\n        if (changePage) {\r\n            this.resetLooping = true;\r\n            this.goTo(changePage.pageX, changePage.pageY, 0);\r\n            return true; // stop trigger chain\r\n        }\r\n        // amend willChangeToPage, because willChangeToPage maybe wrong when sliding quickly\r\n        this.pageWillChangeTo(this.page.currentPage);\r\n    };\r\n    Slide.prototype.shouldSetWidthHeight = function (checkType) {\r\n        var checkMap = {\r\n            width: ['scrollX', 'disableSetWidth'],\r\n            height: ['scrollY', 'disableSetHeight']\r\n        };\r\n        var checkOption = checkMap[checkType];\r\n        if (!this.scroll.options[checkOption[0]]) {\r\n            return false;\r\n        }\r\n        if (this.slideOpt[checkOption[1]]) {\r\n            return false;\r\n        }\r\n        return true;\r\n    };\r\n    Slide.prototype.clearSlideWidth = function (slideEls) {\r\n        if (!this.shouldSetWidthHeight('width')) {\r\n            return;\r\n        }\r\n        var children = slideEls.children;\r\n        for (var i = 0; i < children.length; i++) {\r\n            var slideItemDom = children[i];\r\n            slideItemDom.removeAttribute('style');\r\n        }\r\n        slideEls.removeAttribute('style');\r\n    };\r\n    Slide.prototype.setSlideWidth = function (slideEls) {\r\n        if (!this.shouldSetWidthHeight('width')) {\r\n            return false;\r\n        }\r\n        var children = slideEls.children;\r\n        var slideItemWidth = children[0].clientWidth;\r\n        for (var i = 0; i < children.length; i++) {\r\n            var slideItemDom = children[i];\r\n            slideItemDom.style.width = slideItemWidth + 'px';\r\n        }\r\n        slideEls.style.width = slideItemWidth * children.length + 'px';\r\n        return true;\r\n    };\r\n    Slide.prototype.clearSlideHeight = function (slideEls) {\r\n        if (!this.shouldSetWidthHeight('height')) {\r\n            return;\r\n        }\r\n        var children = slideEls.children;\r\n        for (var i = 0; i < children.length; i++) {\r\n            var slideItemDom = children[i];\r\n            slideItemDom.removeAttribute('style');\r\n        }\r\n        slideEls.removeAttribute('style');\r\n    };\r\n    // height change will not effect minScrollY & maxScrollY\r\n    Slide.prototype.setSlideHeight = function (slideWrapper, slideEls) {\r\n        if (!this.shouldSetWidthHeight('height')) {\r\n            return false;\r\n        }\r\n        var wrapperHeight = slideWrapper.clientHeight;\r\n        var children = slideEls.children;\r\n        for (var i = 0; i < children.length; i++) {\r\n            var slideItemDom = children[i];\r\n            slideItemDom.style.height = wrapperHeight + 'px';\r\n        }\r\n        slideEls.style.height = wrapperHeight * children.length + 'px';\r\n        return true;\r\n    };\r\n    Slide.prototype.goTo = function (pageX, pageY, time, easing) {\r\n        if (pageY === void 0) { pageY = 0; }\r\n        var newPageInfo = this.page.change2safePage(pageX, pageY);\r\n        if (!newPageInfo) {\r\n            return;\r\n        }\r\n        var scrollEasing = easing || this.slideOpt.easing || ease.bounce;\r\n        var posX = newPageInfo.x;\r\n        var posY = newPageInfo.y;\r\n        var deltaX = posX - this.scroll.scroller.scrollBehaviorX.currentPos;\r\n        var deltaY = posY - this.scroll.scroller.scrollBehaviorY.currentPos;\r\n        if (!deltaX && !deltaY) {\r\n            return;\r\n        }\r\n        time = time === undefined ? this.getAnimateTime(deltaX, deltaY) : time;\r\n        this.page.changeCurrentPage({\r\n            x: posX,\r\n            y: posY,\r\n            pageX: newPageInfo.pageX,\r\n            pageY: newPageInfo.pageY\r\n        });\r\n        this.pageWillChangeTo(this.page.currentPage);\r\n        this.scroll.scroller.scrollTo(posX, posY, time, scrollEasing);\r\n    };\r\n    Slide.prototype.flickHandler = function () {\r\n        var scrollBehaviorX = this.scroll.scroller.scrollBehaviorX;\r\n        var scrollBehaviorY = this.scroll.scroller.scrollBehaviorY;\r\n        var deltaX = scrollBehaviorX.currentPos - scrollBehaviorX.startPos;\r\n        var deltaY = scrollBehaviorY.currentPos - scrollBehaviorY.startPos;\r\n        var time = this.getAnimateTime(deltaX, deltaY);\r\n        this.goTo(this.page.currentPage.pageX + scrollBehaviorX.direction, this.page.currentPage.pageY + scrollBehaviorY.direction, time);\r\n    };\r\n    Slide.prototype.getAnimateTime = function (deltaX, deltaY) {\r\n        if (this.slideOpt.speed) {\r\n            return this.slideOpt.speed;\r\n        }\r\n        return Math.max(Math.max(Math.min(Math.abs(deltaX), 1000), Math.min(Math.abs(deltaY), 1000)), 300);\r\n    };\r\n    Slide.prototype.modifyScrollMetaHandler = function (scrollMeta) {\r\n        var newPos = this.nearestPage(scrollMeta.newX, scrollMeta.newY);\r\n        scrollMeta.time = this.getAnimateTime(scrollMeta.newX - newPos.x, scrollMeta.newY - newPos.y);\r\n        scrollMeta.newX = newPos.x;\r\n        scrollMeta.newY = newPos.y;\r\n        scrollMeta.easing = this.slideOpt.easing || ease.bounce;\r\n        this.page.changeCurrentPage({\r\n            x: scrollMeta.newX,\r\n            y: scrollMeta.newY,\r\n            pageX: newPos.pageX,\r\n            pageY: newPos.pageY\r\n        });\r\n        this.pageWillChangeTo(this.page.currentPage);\r\n    };\r\n    Slide.prototype.scrollMoving = function (point) {\r\n        if (this.isTouching) {\r\n            var newPos = this.nearestPage(point.x, point.y);\r\n            this.pageWillChangeTo(newPos);\r\n        }\r\n    };\r\n    Slide.prototype.pageWillChangeTo = function (newPage) {\r\n        var changeToPage = this.page.getRealPage(newPage);\r\n        if (changeToPage.pageX === this.willChangeToPage.pageX &&\r\n            changeToPage.pageY === this.willChangeToPage.pageY) {\r\n            return;\r\n        }\r\n        this.willChangeToPage = changeToPage;\r\n        this.scroll.trigger('slideWillChange', this.willChangeToPage);\r\n    };\r\n    Slide.prototype.setTouchFlag = function () {\r\n        this.isTouching = true;\r\n    };\r\n    Slide.prototype.registorHooks = function (hooks, name, handler) {\r\n        hooks.on(name, handler, this);\r\n        this.hooksFn.push([hooks, name, handler]);\r\n    };\r\n    Slide.pluginName = 'slide';\r\n    return Slide;\r\n}());\n\nvar sourcePrefix$3 = 'plugins.wheel';\r\nvar propertiesMap$3 = [\r\n    {\r\n        key: 'wheelTo',\r\n        name: 'wheelTo'\r\n    },\r\n    {\r\n        key: 'getSelectedIndex',\r\n        name: 'getSelectedIndex'\r\n    }\r\n];\r\nvar propertiesConfig$2 = propertiesMap$3.map(function (item) {\r\n    return {\r\n        key: item.key,\r\n        sourceKey: sourcePrefix$3 + \".\" + item.name\r\n    };\r\n});\n\nvar CONSTANTS = {\r\n    rate: 4\r\n};\r\nvar Wheel = /** @class */ (function () {\r\n    function Wheel(scroll) {\r\n        this.scroll = scroll;\r\n        this.options = this.scroll.options.wheel;\r\n        this.init();\r\n    }\r\n    Wheel.prototype.init = function () {\r\n        if (this.options) {\r\n            this.normalizeOptions();\r\n            this.refresh();\r\n            this.tapIntoHooks();\r\n            this.wheelTo(this.selectedIndex);\r\n            this.scroll.proxy(propertiesConfig$2);\r\n        }\r\n    };\r\n    Wheel.prototype.tapIntoHooks = function () {\r\n        var _this = this;\r\n        var scroller = this.scroll.scroller;\r\n        var actionsHandler = scroller.actionsHandler;\r\n        var scrollBehaviorY = scroller.scrollBehaviorY;\r\n        var animater = scroller.animater;\r\n        // BScroll\r\n        this.scroll.on(this.scroll.hooks.eventTypes.refresh, function () {\r\n            _this.refresh();\r\n        });\r\n        // Scroller\r\n        scroller.hooks.on(scroller.hooks.eventTypes.checkClick, function () {\r\n            var index = Array.from(_this.items).indexOf(_this.target);\r\n            if (index === -1)\r\n                return true;\r\n            _this.wheelTo(index, _this.options.adjustTime, ease.swipe);\r\n            return true;\r\n        });\r\n        scroller.hooks.on(scroller.hooks.eventTypes.scrollTo, function (endPoint) {\r\n            endPoint.y = _this.findNearestValidWheel(endPoint.y).y;\r\n        });\r\n        scroller.hooks.on(scroller.hooks.eventTypes.scrollToElement, function (el, pos) {\r\n            if (!hasClass(el, _this.options.wheelItemClass)) {\r\n                return true;\r\n            }\r\n            else {\r\n                pos.top = _this.findNearestValidWheel(pos.top).y;\r\n            }\r\n        });\r\n        scroller.hooks.on(scroller.hooks.eventTypes.ignoreDisMoveForSamePos, function () {\r\n            return true;\r\n        });\r\n        // ActionsHandler\r\n        actionsHandler.hooks.on(actionsHandler.hooks.eventTypes.beforeStart, function (e) {\r\n            _this.target = e.target;\r\n        });\r\n        // ScrollBehaviorY\r\n        scrollBehaviorY.hooks.on(scrollBehaviorY.hooks.eventTypes.momentum, function (momentumInfo, distance) {\r\n            momentumInfo.rate = CONSTANTS.rate;\r\n            momentumInfo.destination = _this.findNearestValidWheel(momentumInfo.destination).y;\r\n            var maxDistance = 1000;\r\n            var minDuration = 800;\r\n            if (distance < maxDistance) {\r\n                momentumInfo.duration = Math.max(minDuration, (distance / maxDistance) * _this.scroll.options.swipeTime);\r\n            }\r\n        });\r\n        scrollBehaviorY.hooks.on(scrollBehaviorY.hooks.eventTypes.end, function (momentumInfo) {\r\n            var validWheel = _this.findNearestValidWheel(scrollBehaviorY.currentPos);\r\n            momentumInfo.destination = validWheel.y;\r\n            momentumInfo.duration = _this.options.adjustTime;\r\n            _this.selectedIndex = validWheel.index;\r\n        });\r\n        // Animater\r\n        animater.hooks.on(animater.hooks.eventTypes.time, function (time) {\r\n            _this.transitionDuration(time);\r\n        });\r\n        animater.hooks.on(animater.hooks.eventTypes.timeFunction, function (easing) {\r\n            _this.timeFunction(easing);\r\n        });\r\n        animater.hooks.on(animater.hooks.eventTypes.beforeForceStop, function (_a) {\r\n            var y = _a.y;\r\n            _this.target = _this.items[_this.findNearestValidWheel(y).index];\r\n            // don't dispatch scrollEnd when it is a click operation\r\n            return true;\r\n        });\r\n        // Translater\r\n        animater.translater.hooks.on(animater.translater.hooks.eventTypes.translate, function (endPoint) {\r\n            _this.rotateX(endPoint.y);\r\n            _this.selectedIndex = _this.findNearestValidWheel(endPoint.y).index;\r\n        });\r\n    };\r\n    Wheel.prototype.refresh = function () {\r\n        var scroller = this.scroll.scroller;\r\n        var scrollBehaviorY = scroller.scrollBehaviorY;\r\n        // adjust contentSize\r\n        var contentRect = getRect(scroller.content);\r\n        scrollBehaviorY.contentSize = contentRect.height;\r\n        this.items = scroller.content.children;\r\n        this.checkWheelAllDisabled();\r\n        this.itemHeight = this.items.length\r\n            ? scrollBehaviorY.contentSize / this.items.length\r\n            : 0;\r\n        if (this.selectedIndex === undefined) {\r\n            this.selectedIndex = this.options.selectedIndex || 0;\r\n        }\r\n        this.scroll.maxScrollX = 0;\r\n        this.scroll.maxScrollY = -this.itemHeight * (this.items.length - 1);\r\n        this.scroll.minScrollX = 0;\r\n        this.scroll.minScrollY = 0;\r\n        scrollBehaviorY.hasScroll =\r\n            scrollBehaviorY.options && this.scroll.maxScrollY < this.scroll.minScrollY;\r\n    };\r\n    Wheel.prototype.getSelectedIndex = function () {\r\n        return this.selectedIndex;\r\n    };\r\n    Wheel.prototype.wheelTo = function (index, time, ease, isSlient) {\r\n        if (index === void 0) { index = 0; }\r\n        if (time === void 0) { time = 0; }\r\n        var y = -index * this.itemHeight;\r\n        this.scroll.scrollTo(0, y, time, ease, isSlient);\r\n    };\r\n    Wheel.prototype.transitionDuration = function (time) {\r\n        for (var i = 0; i < this.items.length; i++) {\r\n            this.items[i].style[style.transitionDuration] =\r\n                time + 'ms';\r\n        }\r\n    };\r\n    Wheel.prototype.timeFunction = function (easing) {\r\n        for (var i = 0; i < this.items.length; i++) {\r\n            this.items[i].style[style.transitionTimingFunction] = easing;\r\n        }\r\n    };\r\n    Wheel.prototype.rotateX = function (y) {\r\n        var _a = this.options.rotate, rotate = _a === void 0 ? 25 : _a;\r\n        for (var i = 0; i < this.items.length; i++) {\r\n            var deg = rotate * (y / this.itemHeight + i);\r\n            this.items[i].style[style.transform] = \"rotateX(\" + deg + \"deg)\";\r\n        }\r\n    };\r\n    Wheel.prototype.findNearestValidWheel = function (y) {\r\n        y = y > 0 ? 0 : y < this.scroll.maxScrollY ? this.scroll.maxScrollY : y;\r\n        var currentIndex = Math.abs(Math.round(-y / this.itemHeight));\r\n        var cacheIndex = currentIndex;\r\n        var items = this.items;\r\n        var wheelDisabledItemClassName = this.options\r\n            .wheelDisabledItemClass;\r\n        // Impersonation web native select\r\n        // first, check whether there is a enable item whose index is smaller than currentIndex\r\n        // then, check whether there is a enable item whose index is bigger than currentIndex\r\n        // otherwise, there are all disabled items, just keep currentIndex unchange\r\n        while (currentIndex >= 0) {\r\n            if (!hasClass(items[currentIndex], wheelDisabledItemClassName)) {\r\n                break;\r\n            }\r\n            currentIndex--;\r\n        }\r\n        if (currentIndex < 0) {\r\n            currentIndex = cacheIndex;\r\n            while (currentIndex <= items.length - 1) {\r\n                if (!hasClass(items[currentIndex], wheelDisabledItemClassName)) {\r\n                    break;\r\n                }\r\n                currentIndex++;\r\n            }\r\n        }\r\n        // keep it unchange when all the items are disabled\r\n        if (currentIndex === items.length) {\r\n            currentIndex = cacheIndex;\r\n        }\r\n        // when all the items are disabled, this.selectedIndex should always be -1\r\n        return {\r\n            index: this.wheelItemsAllDisabled ? -1 : currentIndex,\r\n            y: -currentIndex * this.itemHeight\r\n        };\r\n    };\r\n    Wheel.prototype.normalizeOptions = function () {\r\n        var options = (this.options = isPlainObject(this.options)\r\n            ? this.options\r\n            : {});\r\n        if (!options.wheelWrapperClass) {\r\n            options.wheelWrapperClass = 'wheel-scroll';\r\n        }\r\n        if (!options.wheelItemClass) {\r\n            options.wheelItemClass = 'wheel-item';\r\n        }\r\n        if (!options.rotate) {\r\n            options.rotate = 25;\r\n        }\r\n        if (!options.adjustTime) {\r\n            options.adjustTime = 400;\r\n        }\r\n        if (!options.wheelDisabledItemClass) {\r\n            options.wheelDisabledItemClass = 'wheel-disabled-item';\r\n        }\r\n    };\r\n    Wheel.prototype.checkWheelAllDisabled = function () {\r\n        var wheelDisabledItemClassName = this.options\r\n            .wheelDisabledItemClass;\r\n        var items = this.items;\r\n        this.wheelItemsAllDisabled = true;\r\n        for (var i = 0; i < items.length; i++) {\r\n            if (!hasClass(items[i], wheelDisabledItemClassName)) {\r\n                this.wheelItemsAllDisabled = false;\r\n                break;\r\n            }\r\n        }\r\n    };\r\n    Wheel.pluginName = 'wheel';\r\n    return Wheel;\r\n}());\n\nvar sourcePrefix$4 = 'plugins.zoom';\r\nvar propertiesMap$4 = [\r\n    {\r\n        key: 'zoomTo',\r\n        name: 'zoomTo'\r\n    }\r\n];\r\nvar propertiesConfig$3 = propertiesMap$4.map(function (item) {\r\n    return {\r\n        key: item.key,\r\n        sourceKey: sourcePrefix$4 + \".\" + item.name\r\n    };\r\n});\n\nvar Zoom = /** @class */ (function () {\r\n    function Zoom(scroll) {\r\n        this.scroll = scroll;\r\n        this.scale = 1;\r\n        this.scroll.proxy(propertiesConfig$3);\r\n        this.scroll.registerType(['zoomStart', 'zoomEnd']);\r\n        this.zoomOpt = this.scroll.options.zoom;\r\n        this.lastTransformScale = this.scale;\r\n        this.hooksFn = [];\r\n        this.init();\r\n    }\r\n    Zoom.prototype.init = function () {\r\n        var _this = this;\r\n        var scrollerIns = this.scroll.scroller;\r\n        this.wrapper = this.scroll.scroller.wrapper;\r\n        this.scaleElement = this.scroll.scroller.content;\r\n        this.scaleElement.style[style.transformOrigin] = '0 0';\r\n        this.scaleElementInitSize = getRect(this.scaleElement);\r\n        var scrollBehaviorX = scrollerIns.scrollBehaviorX;\r\n        var scrollBehaviorY = scrollerIns.scrollBehaviorY;\r\n        this.initScrollBoundary = {\r\n            x: [scrollBehaviorX.minScrollPos, scrollBehaviorX.maxScrollPos],\r\n            y: [scrollBehaviorY.minScrollPos, scrollBehaviorY.maxScrollPos]\r\n        };\r\n        this.registorHooks(scrollerIns.actions.hooks, 'start', function (e) {\r\n            if (e.touches && e.touches.length > 1) {\r\n                _this.zoomStart(e);\r\n            }\r\n        });\r\n        this.registorHooks(scrollerIns.actions.hooks, 'beforeMove', function (e) {\r\n            if (!e.touches || e.touches.length < 2) {\r\n                return false;\r\n            }\r\n            _this.zoom(e);\r\n            return true;\r\n        });\r\n        this.registorHooks(scrollerIns.actions.hooks, 'beforeEnd', function (e) {\r\n            if (!_this.zooming) {\r\n                return false;\r\n            }\r\n            _this.zoomEnd();\r\n            return true;\r\n        });\r\n        this.registorHooks(scrollerIns.translater.hooks, 'beforeTranslate', function (transformStyle, point) {\r\n            var scale = point.scale ? point.scale : _this.lastTransformScale;\r\n            _this.lastTransformScale = scale;\r\n            transformStyle.push(\"scale(\" + scale + \")\");\r\n        });\r\n        this.registorHooks(scrollerIns.hooks, 'ignoreDisMoveForSamePos', function () {\r\n            return true;\r\n        });\r\n        this.registorHooks(this.scroll.hooks, 'destroy', this.destroy);\r\n    };\r\n    Zoom.prototype.zoomTo = function (scale, x, y) {\r\n        var _a = offsetToBody(this.wrapper), left = _a.left, top = _a.top;\r\n        var originX = x + left - this.scroll.x;\r\n        var originY = y + top - this.scroll.y;\r\n        this.zooming = true;\r\n        this._zoomTo(scale, { x: originX, y: originY }, this.scale);\r\n        this.zooming = false;\r\n    };\r\n    Zoom.prototype.zoomStart = function (e) {\r\n        this.zooming = true;\r\n        var firstFinger = e.touches[0];\r\n        var secondFinger = e.touches[1];\r\n        this.startDistance = this.getFingerDistance(e);\r\n        this.startScale = this.scale;\r\n        var _a = offsetToBody(this.wrapper), left = _a.left, top = _a.top;\r\n        this.origin = {\r\n            x: Math.abs(firstFinger.pageX + secondFinger.pageX) / 2 +\r\n                left -\r\n                this.scroll.x,\r\n            y: Math.abs(firstFinger.pageY + secondFinger.pageY) / 2 +\r\n                top -\r\n                this.scroll.y\r\n        };\r\n        this.scroll.trigger(this.scroll.eventTypes.zoomStart);\r\n    };\r\n    Zoom.prototype.zoom = function (e) {\r\n        var scrollerIns = this.scroll.scroller;\r\n        var currentDistance = this.getFingerDistance(e);\r\n        var currentScale = (currentDistance / this.startDistance) * this.startScale;\r\n        this.scale = this.scaleCure(currentScale);\r\n        var lastScale = this.scale / this.startScale;\r\n        var scrollBehaviorX = scrollerIns.scrollBehaviorX;\r\n        var scrollBehaviorY = scrollerIns.scrollBehaviorY;\r\n        var x = this.getNewPos(this.origin.x, lastScale, scrollBehaviorX);\r\n        var y = this.getNewPos(this.origin.y, lastScale, scrollBehaviorY);\r\n        this.resetBoundaries(this.scale, scrollBehaviorX, 'x', x);\r\n        this.resetBoundaries(this.scale, scrollBehaviorY, 'y', y);\r\n        scrollerIns.scrollTo(x, y, 0, undefined, {\r\n            start: {\r\n                scale: this.lastTransformScale\r\n            },\r\n            end: {\r\n                scale: this.scale\r\n            }\r\n        });\r\n    };\r\n    Zoom.prototype.getFingerDistance = function (e) {\r\n        var firstFinger = e.touches[0];\r\n        var secondFinger = e.touches[1];\r\n        var deltaX = Math.abs(firstFinger.pageX - secondFinger.pageX);\r\n        var deltaY = Math.abs(firstFinger.pageY - secondFinger.pageY);\r\n        return getDistance(deltaX, deltaY);\r\n    };\r\n    Zoom.prototype.zoomEnd = function () {\r\n        this._zoomTo(this.scale, this.origin, this.startScale || this.scale);\r\n        this.zooming = false;\r\n        this.scroll.trigger(this.scroll.eventTypes.zoomEnd);\r\n    };\r\n    Zoom.prototype.destroy = function () {\r\n        this.hooksFn.forEach(function (item) {\r\n            var hooks = item[0];\r\n            var hooksName = item[1];\r\n            var handlerFn = item[2];\r\n            hooks.off(hooksName, handlerFn);\r\n        });\r\n        this.hooksFn.length = 0;\r\n    };\r\n    Zoom.prototype._zoomTo = function (scale, origin, startScale) {\r\n        this.scale = this.fixInScaleLimit(scale);\r\n        var lastScale = this.scale / startScale;\r\n        var scrollerIns = this.scroll.scroller;\r\n        var scrollBehaviorX = scrollerIns.scrollBehaviorX;\r\n        var scrollBehaviorY = scrollerIns.scrollBehaviorY;\r\n        this.resetBoundaries(this.scale, scrollBehaviorX, 'x');\r\n        this.resetBoundaries(this.scale, scrollBehaviorY, 'y');\r\n        // resetPosition\r\n        var newX = this.getNewPos(origin.x, lastScale, scrollBehaviorX, true);\r\n        var newY = this.getNewPos(origin.y, lastScale, scrollBehaviorY, true);\r\n        if (scrollBehaviorX.currentPos !== Math.round(newX) ||\r\n            scrollBehaviorY.currentPos !== Math.round(newY) ||\r\n            this.scale !== this.lastTransformScale) {\r\n            scrollerIns.scrollTo(newX, newY, this.scroll.options.bounceTime, undefined, {\r\n                start: {\r\n                    scale: this.lastTransformScale\r\n                },\r\n                end: {\r\n                    scale: this.scale\r\n                }\r\n            });\r\n        }\r\n    };\r\n    Zoom.prototype.resetBoundaries = function (scale, scrollBehavior, direction, extendValue) {\r\n        var min = this.initScrollBoundary[direction][0];\r\n        var max = this.initScrollBoundary[direction][1];\r\n        var hasScroll = false;\r\n        if (scale > 1) {\r\n            var sideName = direction === 'x' ? 'width' : 'height';\r\n            max =\r\n                -this.scaleElementInitSize[sideName] * (scale - 1) -\r\n                    this.initScrollBoundary[direction][1];\r\n            hasScroll = true;\r\n        }\r\n        if (!isUndef(extendValue)) {\r\n            max = Math.min(extendValue, max);\r\n            min = Math.max(extendValue, min); // max & min & curValue is negative value\r\n            hasScroll = !!(min || max);\r\n        }\r\n        scrollBehavior.minScrollPos = Math.floor(min);\r\n        scrollBehavior.maxScrollPos = Math.floor(max);\r\n        scrollBehavior.hasScroll = hasScroll;\r\n    };\r\n    Zoom.prototype.getNewPos = function (origin, lastScale, scrollBehavior, fixInBound) {\r\n        var newPos = origin - origin * lastScale + scrollBehavior.startPos;\r\n        if (fixInBound) {\r\n            newPos = fixInboundValue(newPos, scrollBehavior.maxScrollPos, 0);\r\n        }\r\n        return Math.floor(newPos);\r\n    };\r\n    Zoom.prototype.scaleCure = function (scale) {\r\n        var _a = this.zoomOpt, _b = _a.min, min = _b === void 0 ? 1 : _b, _c = _a.max, max = _c === void 0 ? 4 : _c;\r\n        if (scale < min) {\r\n            scale = 0.5 * min * Math.pow(2.0, scale / min);\r\n        }\r\n        else if (scale > max) {\r\n            scale = 2.0 * max * Math.pow(0.5, max / scale);\r\n        }\r\n        return scale;\r\n    };\r\n    Zoom.prototype.fixInScaleLimit = function (scale) {\r\n        var _a = this.zoomOpt, _b = _a.min, min = _b === void 0 ? 1 : _b, _c = _a.max, max = _c === void 0 ? 4 : _c;\r\n        if (scale > max) {\r\n            scale = max;\r\n        }\r\n        else if (scale < min) {\r\n            scale = min;\r\n        }\r\n        return scale;\r\n    };\r\n    Zoom.prototype.registorHooks = function (hooks, name, handler) {\r\n        hooks.on(name, handler, this);\r\n        this.hooksFn.push([hooks, name, handler]);\r\n    };\r\n    Zoom.pluginName = 'zoom';\r\n    return Zoom;\r\n}());\n\nvar compatibleFeatures = {\r\n    duplicateClick: function (_a) {\r\n        var parentScroll = _a[0], childScroll = _a[1];\r\n        // no need to make childScroll's click true\r\n        if (parentScroll.options.click && childScroll.options.click) {\r\n            childScroll.options.click = false;\r\n        }\r\n    },\r\n    nestedScroll: function (scrollsPair) {\r\n        var parentScroll = scrollsPair[0], childScroll = scrollsPair[1];\r\n        var parentScrollX = parentScroll.options.scrollX;\r\n        var parentScrollY = parentScroll.options.scrollY;\r\n        var childScrollX = childScroll.options.scrollX;\r\n        var childScrollY = childScroll.options.scrollY;\r\n        // vertical nested in vertical scroll and horizontal nested in horizontal\r\n        // otherwise, no need to handle.\r\n        if (parentScrollX === childScrollX || parentScrollY === childScrollY) {\r\n            scrollsPair.forEach(function (scroll, index) {\r\n                var oppositeScroll = scrollsPair[(index + 1) % 2];\r\n                scroll.on('beforeScrollStart', function () {\r\n                    if (oppositeScroll.pending) {\r\n                        oppositeScroll.stop();\r\n                        oppositeScroll.resetPosition();\r\n                    }\r\n                    setupData(oppositeScroll);\r\n                    oppositeScroll.disable();\r\n                });\r\n                scroll.on('touchEnd', function () {\r\n                    oppositeScroll.enable();\r\n                });\r\n            });\r\n            childScroll.on('scrollStart', function () {\r\n                if (checkBeyondBoundary(childScroll)) {\r\n                    childScroll.disable();\r\n                    parentScroll.enable();\r\n                }\r\n            });\r\n        }\r\n    }\r\n};\r\nvar NestedScroll = /** @class */ (function () {\r\n    function NestedScroll(scroll) {\r\n        var singleton = NestedScroll.nestedScroll;\r\n        if (!(singleton instanceof NestedScroll)) {\r\n            singleton = NestedScroll.nestedScroll = this;\r\n            singleton.stores = [];\r\n        }\r\n        singleton.setup(scroll);\r\n        singleton.addHooks(scroll);\r\n        return singleton;\r\n    }\r\n    NestedScroll.prototype.setup = function (scroll) {\r\n        this.appendBScroll(scroll);\r\n        this.handleContainRelationship();\r\n        this.handleCompatible();\r\n    };\r\n    NestedScroll.prototype.addHooks = function (scroll) {\r\n        var _this = this;\r\n        scroll.on('destroy', function () {\r\n            _this.teardown(scroll);\r\n        });\r\n    };\r\n    NestedScroll.prototype.teardown = function (scroll) {\r\n        this.removeBScroll(scroll);\r\n        this.handleContainRelationship();\r\n        this.handleCompatible();\r\n    };\r\n    NestedScroll.prototype.appendBScroll = function (scroll) {\r\n        this.stores.push(scroll);\r\n    };\r\n    NestedScroll.prototype.removeBScroll = function (scroll) {\r\n        var index = this.stores.indexOf(scroll);\r\n        if (index === -1)\r\n            return;\r\n        scroll.wrapper.isBScrollContainer = undefined;\r\n        this.stores.splice(index, 1);\r\n    };\r\n    NestedScroll.prototype.handleContainRelationship = function () {\r\n        // bs's length <= 1\r\n        var stores = this.stores;\r\n        if (stores.length <= 1) {\r\n            // there is only a childBScroll left.\r\n            if (stores[0] && stores[0].__parentInfo) {\r\n                stores[0].__parentInfo = undefined;\r\n            }\r\n            return;\r\n        }\r\n        var outerBS;\r\n        var outerBSWrapper;\r\n        var innerBS;\r\n        var innerBSWrapper;\r\n        // Need two layers of \"For loop\" to calculate parent-child relationship\r\n        for (var i = 0; i < stores.length; i++) {\r\n            outerBS = stores[i];\r\n            outerBSWrapper = outerBS.wrapper;\r\n            for (var j = 0; j < stores.length; j++) {\r\n                innerBS = stores[j];\r\n                innerBSWrapper = innerBS.wrapper;\r\n                // same bs\r\n                if (outerBS === innerBS)\r\n                    continue;\r\n                // now start calculating\r\n                if (!innerBSWrapper.contains(outerBSWrapper))\r\n                    continue;\r\n                // now innerBS contains outerBS\r\n                // no parentInfo yet\r\n                if (!outerBS.__parentInfo) {\r\n                    outerBS.__parentInfo = {\r\n                        parent: innerBS,\r\n                        depth: calculateDepths(outerBSWrapper, innerBSWrapper)\r\n                    };\r\n                }\r\n                else {\r\n                    // has parentInfo already!\r\n                    // just judge the \"true\" parent by depth\r\n                    // we regard the latest node as parent, not the furthest\r\n                    var currentDepths = calculateDepths(outerBSWrapper, innerBSWrapper);\r\n                    var prevDepths = outerBS.__parentInfo.depth;\r\n                    // refresh currentBS as parentScroll\r\n                    if (prevDepths > currentDepths) {\r\n                        outerBS.__parentInfo = {\r\n                            parent: innerBS,\r\n                            depth: currentDepths\r\n                        };\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    };\r\n    NestedScroll.prototype.handleCompatible = function () {\r\n        var pairs = this.availableBScrolls();\r\n        var keys = ['duplicateClick', 'nestedScroll'];\r\n        pairs.forEach(function (pair) {\r\n            keys.forEach(function (key) {\r\n                compatibleFeatures[key](pair);\r\n            });\r\n        });\r\n    };\r\n    NestedScroll.prototype.availableBScrolls = function () {\r\n        var ret = [];\r\n        ret = this.stores\r\n            .filter(function (bs) { return !!bs.__parentInfo; })\r\n            .map(function (bs) { return [bs.__parentInfo.parent, bs]; });\r\n        return ret;\r\n    };\r\n    NestedScroll.pluginName = 'nestedScroll';\r\n    return NestedScroll;\r\n}());\r\nfunction calculateDepths(childNode, parentNode) {\r\n    var depth = 0;\r\n    var parent = childNode.parentNode;\r\n    while (parent && parent !== parentNode) {\r\n        depth++;\r\n        parent = parent.parentNode;\r\n    }\r\n    return depth;\r\n}\r\nfunction checkBeyondBoundary(scroll) {\r\n    var _a = hasScroll(scroll), hasHorizontalScroll = _a.hasHorizontalScroll, hasVerticalScroll = _a.hasVerticalScroll;\r\n    var _b = scroll.scroller, scrollBehaviorX = _b.scrollBehaviorX, scrollBehaviorY = _b.scrollBehaviorY;\r\n    var hasReachLeft = scroll.x >= scroll.minScrollX && scrollBehaviorX.movingDirection === -1;\r\n    var hasReachRight = scroll.x <= scroll.maxScrollX && scrollBehaviorX.movingDirection === 1;\r\n    var hasReachTop = scroll.y >= scroll.minScrollY && scrollBehaviorY.movingDirection === -1;\r\n    var hasReachBottom = scroll.y <= scroll.maxScrollY && scrollBehaviorY.movingDirection === 1;\r\n    if (hasVerticalScroll) {\r\n        return hasReachTop || hasReachBottom;\r\n    }\r\n    else if (hasHorizontalScroll) {\r\n        return hasReachLeft || hasReachRight;\r\n    }\r\n    return false;\r\n}\r\nfunction setupData(scroll) {\r\n    var _a = hasScroll(scroll), hasHorizontalScroll = _a.hasHorizontalScroll, hasVerticalScroll = _a.hasVerticalScroll;\r\n    var _b = scroll.scroller, actions = _b.actions, scrollBehaviorX = _b.scrollBehaviorX, scrollBehaviorY = _b.scrollBehaviorY;\r\n    actions.startTime = +new Date();\r\n    if (hasVerticalScroll) {\r\n        scrollBehaviorY.startPos = scrollBehaviorY.currentPos;\r\n    }\r\n    else if (hasHorizontalScroll) {\r\n        scrollBehaviorX.startPos = scrollBehaviorX.currentPos;\r\n    }\r\n}\r\nfunction hasScroll(scroll) {\r\n    return {\r\n        hasHorizontalScroll: scroll.scroller.scrollBehaviorX.hasScroll,\r\n        hasVerticalScroll: scroll.scroller.scrollBehaviorY.hasScroll\r\n    };\r\n}\n\nvar PRE_NUM = 10;\r\nvar POST_NUM = 30;\r\nvar IndexCalculator = /** @class */ (function () {\r\n    function IndexCalculator(wrapperHeight, tombstoneHeight) {\r\n        this.wrapperHeight = wrapperHeight;\r\n        this.tombstoneHeight = tombstoneHeight;\r\n        this.lastDirection = 1 /* DOWN */;\r\n        this.lastPos = 0;\r\n    }\r\n    IndexCalculator.prototype.calculate = function (pos, list) {\r\n        var offset = pos - this.lastPos;\r\n        this.lastPos = pos;\r\n        var direction = this.getDirection(offset);\r\n        // important! start index is much more important than end index.\r\n        var start = this.calculateIndex(0, pos, list);\r\n        var end = this.calculateIndex(start, pos + this.wrapperHeight, list);\r\n        if (direction === 1 /* DOWN */) {\r\n            start -= PRE_NUM;\r\n            end += POST_NUM;\r\n        }\r\n        else {\r\n            start -= POST_NUM;\r\n            end += PRE_NUM;\r\n        }\r\n        if (start < 0) {\r\n            start = 0;\r\n        }\r\n        return {\r\n            start: start,\r\n            end: end\r\n        };\r\n    };\r\n    IndexCalculator.prototype.getDirection = function (offset) {\r\n        var direction;\r\n        if (offset > 0) {\r\n            direction = 1 /* DOWN */;\r\n        }\r\n        else if (offset < 0) {\r\n            direction = 0 /* UP */;\r\n        }\r\n        else {\r\n            return this.lastDirection;\r\n        }\r\n        this.lastDirection = direction;\r\n        return direction;\r\n    };\r\n    IndexCalculator.prototype.calculateIndex = function (start, offset, list) {\r\n        if (offset <= 0) {\r\n            return start;\r\n        }\r\n        var i = start;\r\n        var startPos = list[i] && list[i].pos !== -1 ? list[i].pos : 0;\r\n        var lastPos = startPos;\r\n        var tombstone = 0;\r\n        while (i < list.length && list[i].pos < offset) {\r\n            lastPos = list[i].pos;\r\n            i++;\r\n        }\r\n        if (i === list.length) {\r\n            tombstone = Math.floor((offset - lastPos) / this.tombstoneHeight);\r\n        }\r\n        i += tombstone;\r\n        return i;\r\n    };\r\n    return IndexCalculator;\r\n}());\n\nvar ListItem = /** @class */ (function () {\r\n    function ListItem() {\r\n        this.data = null;\r\n        this.dom = null;\r\n        this.tombstone = null;\r\n        this.width = 0;\r\n        this.height = 0;\r\n        this.pos = 0;\r\n    }\r\n    return ListItem;\r\n}());\r\nvar DataManager = /** @class */ (function () {\r\n    function DataManager(list, fetchFn, onFetchFinish) {\r\n        this.fetchFn = fetchFn;\r\n        this.onFetchFinish = onFetchFinish;\r\n        this.loadedNum = 0;\r\n        this.fetching = false;\r\n        this.hasMore = true;\r\n        this.list = list || [];\r\n    }\r\n    DataManager.prototype.update = function (end) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var len;\r\n            return __generator(this, function (_a) {\r\n                if (!this.hasMore) {\r\n                    end = Math.min(end, this.list.length);\r\n                }\r\n                // add data placeholder\r\n                if (end > this.list.length) {\r\n                    len = end - this.list.length;\r\n                    this.addEmptyData(len);\r\n                }\r\n                // tslint:disable-next-line: no-floating-promises\r\n                return [2 /*return*/, this.checkToFetch(end)];\r\n            });\r\n        });\r\n    };\r\n    DataManager.prototype.add = function (data) {\r\n        for (var i = 0; i < data.length; i++) {\r\n            if (!this.list[this.loadedNum]) {\r\n                this.list[this.loadedNum] = { data: data[i] };\r\n            }\r\n            else {\r\n                this.list[this.loadedNum] = __assign({}, this.list[this.loadedNum], { data: data[i] });\r\n            }\r\n            this.loadedNum++;\r\n        }\r\n        return this.list;\r\n    };\r\n    DataManager.prototype.addEmptyData = function (len) {\r\n        for (var i = 0; i < len; i++) {\r\n            this.list.push(new ListItem());\r\n        }\r\n        return this.list;\r\n    };\r\n    DataManager.prototype.fetch = function (len) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var data;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (this.fetching) {\r\n                            return [2 /*return*/, []];\r\n                        }\r\n                        this.fetching = true;\r\n                        return [4 /*yield*/, this.fetchFn(len)];\r\n                    case 1:\r\n                        data = _a.sent();\r\n                        this.fetching = false;\r\n                        return [2 /*return*/, data];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    DataManager.prototype.checkToFetch = function (end) {\r\n        return __awaiter(this, void 0, void 0, function () {\r\n            var min, newData, currentEnd;\r\n            return __generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        if (!this.hasMore) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        if (end <= this.loadedNum) {\r\n                            return [2 /*return*/];\r\n                        }\r\n                        min = end - this.loadedNum;\r\n                        return [4 /*yield*/, this.fetch(min)];\r\n                    case 1:\r\n                        newData = _a.sent();\r\n                        if (newData instanceof Array && newData.length) {\r\n                            this.add(newData);\r\n                            currentEnd = this.onFetchFinish(this.list, true);\r\n                            return [2 /*return*/, this.checkToFetch(currentEnd)];\r\n                        }\r\n                        else if (typeof newData === 'boolean' && newData === false) {\r\n                            this.hasMore = false;\r\n                            this.list.splice(this.loadedNum);\r\n                            this.onFetchFinish(this.list, false);\r\n                        }\r\n                        return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    DataManager.prototype.getList = function () {\r\n        return this.list;\r\n    };\r\n    return DataManager;\r\n}());\n\nvar Tombstone = /** @class */ (function () {\r\n    function Tombstone(create) {\r\n        this.create = create;\r\n        this.cached = [];\r\n        this.width = 0;\r\n        this.height = 0;\r\n        this.initialed = false;\r\n        this.getSize();\r\n    }\r\n    Tombstone.isTombstone = function (el) {\r\n        if (el && el.classList) {\r\n            return el.classList.contains('tombstone');\r\n        }\r\n        return false;\r\n    };\r\n    Tombstone.prototype.getSize = function () {\r\n        if (!this.initialed) {\r\n            var tombstone = this.create();\r\n            tombstone.style.position = 'absolute';\r\n            document.body.appendChild(tombstone);\r\n            tombstone.style.display = '';\r\n            this.height = tombstone.offsetHeight;\r\n            this.width = tombstone.offsetWidth;\r\n            document.body.removeChild(tombstone);\r\n            this.cached.push(tombstone);\r\n        }\r\n    };\r\n    Tombstone.prototype.getOne = function () {\r\n        var tombstone = this.cached.pop();\r\n        if (tombstone) {\r\n            var tombstoneStyle = tombstone.style;\r\n            tombstoneStyle.display = '';\r\n            tombstoneStyle.opacity = '1';\r\n            tombstoneStyle[style.transform] = '';\r\n            tombstoneStyle[style.transition] = '';\r\n            return tombstone;\r\n        }\r\n        return this.create();\r\n    };\r\n    Tombstone.prototype.recycle = function (tombstones) {\r\n        for (var _i = 0, tombstones_1 = tombstones; _i < tombstones_1.length; _i++) {\r\n            var tombstone = tombstones_1[_i];\r\n            tombstone.style.display = 'none';\r\n            this.cached.push(tombstone);\r\n        }\r\n        return this.cached;\r\n    };\r\n    Tombstone.prototype.recycleOne = function (tombstone) {\r\n        this.cached.push(tombstone);\r\n        return this.cached;\r\n    };\r\n    return Tombstone;\r\n}());\n\nvar ANIMATION_DURATION_MS = 200;\r\nvar DomManager = /** @class */ (function () {\r\n    function DomManager(content, renderFn, tombstone) {\r\n        this.content = content;\r\n        this.renderFn = renderFn;\r\n        this.tombstone = tombstone;\r\n        this.unusedDom = [];\r\n        this.timers = [];\r\n    }\r\n    DomManager.prototype.update = function (list, start, end) {\r\n        if (start >= list.length) {\r\n            start = list.length - 1;\r\n        }\r\n        if (end > list.length) {\r\n            end = list.length;\r\n        }\r\n        this.collectUnusedDom(list, start, end);\r\n        this.createDom(list, start, end);\r\n        this.cacheHeight(list, start, end);\r\n        var _a = this.positionDom(list, start, end), startPos = _a.startPos, startDelta = _a.startDelta, endPos = _a.endPos;\r\n        return {\r\n            start: start,\r\n            startPos: startPos,\r\n            startDelta: startDelta,\r\n            end: end,\r\n            endPos: endPos\r\n        };\r\n    };\r\n    DomManager.prototype.collectUnusedDom = function (list, start, end) {\r\n        // TODO optimise\r\n        for (var i = 0; i < list.length; i++) {\r\n            if (i === start) {\r\n                i = end - 1;\r\n                continue;\r\n            }\r\n            if (list[i].dom) {\r\n                var dom = list[i].dom;\r\n                if (Tombstone.isTombstone(dom)) {\r\n                    this.tombstone.recycleOne(dom);\r\n                    dom.style.display = 'none';\r\n                }\r\n                else {\r\n                    this.unusedDom.push(dom);\r\n                }\r\n                list[i].dom = null;\r\n            }\r\n        }\r\n        return list;\r\n    };\r\n    DomManager.prototype.createDom = function (list, start, end) {\r\n        for (var i = start; i < end; i++) {\r\n            var dom = list[i].dom;\r\n            var data = list[i].data;\r\n            if (dom) {\r\n                if (Tombstone.isTombstone(dom) && data) {\r\n                    list[i].tombstone = dom;\r\n                    list[i].dom = null;\r\n                }\r\n                else {\r\n                    continue;\r\n                }\r\n            }\r\n            dom = data\r\n                ? this.renderFn(data, this.unusedDom.pop())\r\n                : this.tombstone.getOne();\r\n            dom.style.position = 'absolute';\r\n            list[i].dom = dom;\r\n            list[i].pos = -1;\r\n            this.content.appendChild(dom);\r\n        }\r\n    };\r\n    DomManager.prototype.cacheHeight = function (list, start, end) {\r\n        for (var i = start; i < end; i++) {\r\n            if (list[i].data && !list[i].height) {\r\n                list[i].height = list[i].dom.offsetHeight;\r\n            }\r\n        }\r\n    };\r\n    DomManager.prototype.positionDom = function (list, start, end) {\r\n        var _this = this;\r\n        var tombstoneEles = [];\r\n        var _a = this.getStartPos(list, start, end), startPos = _a.start, startDelta = _a.delta;\r\n        var pos = startPos;\r\n        // TODO transition\r\n        for (var i = start; i < end; i++) {\r\n            var tombstone = list[i].tombstone;\r\n            if (tombstone) {\r\n                var tombstoneStyle = tombstone.style;\r\n                tombstoneStyle[style.transition] = cssVendor + \"transform \" + ANIMATION_DURATION_MS + \"ms, opacity \" + ANIMATION_DURATION_MS + \"ms\";\r\n                tombstoneStyle[style.transform] = \"translateY(\" + pos + \"px)\";\r\n                tombstoneStyle.opacity = '0';\r\n                list[i].tombstone = null;\r\n                tombstoneEles.push(tombstone);\r\n            }\r\n            if (list[i].dom && list[i].pos !== pos) {\r\n                list[i].dom.style[style.transform] = \"translateY(\" + pos + \"px)\";\r\n                list[i].pos = pos;\r\n            }\r\n            pos += list[i].height || this.tombstone.height;\r\n        }\r\n        var timerId = window.setTimeout(function () {\r\n            _this.tombstone.recycle(tombstoneEles);\r\n        }, ANIMATION_DURATION_MS);\r\n        this.timers.push(timerId);\r\n        return {\r\n            startPos: startPos,\r\n            startDelta: startDelta,\r\n            endPos: pos\r\n        };\r\n    };\r\n    DomManager.prototype.getStartPos = function (list, start, end) {\r\n        if (list[start] && list[start].pos !== -1) {\r\n            return {\r\n                start: list[start].pos,\r\n                delta: 0\r\n            };\r\n        }\r\n        // TODO optimise\r\n        var pos = list[0].pos === -1 ? 0 : list[0].pos;\r\n        for (var i_1 = 0; i_1 < start; i_1++) {\r\n            pos += list[i_1].height || this.tombstone.height;\r\n        }\r\n        var originPos = pos;\r\n        var i;\r\n        for (i = start; i < end; i++) {\r\n            if (!Tombstone.isTombstone(list[i].dom) && list[i].pos !== -1) {\r\n                pos = list[i].pos;\r\n                break;\r\n            }\r\n        }\r\n        var x = i;\r\n        if (x < end) {\r\n            while (x > start) {\r\n                pos -= list[x - 1].height;\r\n                x--;\r\n            }\r\n        }\r\n        var delta = originPos - pos;\r\n        return {\r\n            start: pos,\r\n            delta: delta\r\n        };\r\n    };\r\n    DomManager.prototype.removeTombstone = function () {\r\n        var tombstones = this.content.querySelectorAll('.tombstone');\r\n        for (var i = tombstones.length - 1; i >= 0; i--) {\r\n            this.content.removeChild(tombstones[i]);\r\n        }\r\n    };\r\n    DomManager.prototype.destroy = function () {\r\n        this.removeTombstone();\r\n        this.timers.forEach(function (id) {\r\n            clearTimeout(id);\r\n        });\r\n    };\r\n    return DomManager;\r\n}());\n\nvar EXTRA_SCROLL_Y = -2000;\r\nvar InfinityScroll = /** @class */ (function () {\r\n    function InfinityScroll(bscroll) {\r\n        this.bscroll = bscroll;\r\n        this.start = 0;\r\n        this.end = 0;\r\n        if (bscroll.options.infinity) {\r\n            this.bscroll.options.probeType = 3 /* Realtime */;\r\n            this.bscroll.scroller.scrollBehaviorY.hasScroll = true;\r\n            this.bscroll.scroller.scrollBehaviorY.maxScrollPos = EXTRA_SCROLL_Y;\r\n            this.init(bscroll.options.infinity);\r\n        }\r\n    }\r\n    InfinityScroll.prototype.init = function (options) {\r\n        var fetchFn = options.fetch, renderFn = options.render, createTombstoneFn = options.createTombstone;\r\n        this.tombstone = new Tombstone(createTombstoneFn);\r\n        this.indexCalculator = new IndexCalculator(this.bscroll.scroller.scrollBehaviorY.wrapperSize, this.tombstone.height);\r\n        this.domManager = new DomManager(this.bscroll.scroller.content, renderFn, this.tombstone);\r\n        this.dataManager = new DataManager([], fetchFn, this.onFetchFinish.bind(this));\r\n        this.bscroll.on('destroy', this.destroy, this);\r\n        this.bscroll.on('scroll', this.update, this);\r\n        this.update({ y: 0 });\r\n    };\r\n    InfinityScroll.prototype.update = function (pos) {\r\n        var position = Math.round(-pos.y);\r\n        // important! calculate start/end index to render\r\n        var _a = this.indexCalculator.calculate(position, this.dataManager.getList()), start = _a.start, end = _a.end;\r\n        this.start = start;\r\n        this.end = end;\r\n        // tslint:disable-next-line: no-floating-promises\r\n        this.dataManager.update(end);\r\n        this.updateDom(this.dataManager.getList());\r\n    };\r\n    InfinityScroll.prototype.onFetchFinish = function (list, hasMore) {\r\n        var end = this.updateDom(list).end;\r\n        if (!hasMore) {\r\n            this.domManager.removeTombstone();\r\n            this.bscroll.scroller.animater.stop();\r\n            this.bscroll.resetPosition();\r\n        }\r\n        // tslint:disable-next-line: no-floating-promises\r\n        return end;\r\n    };\r\n    InfinityScroll.prototype.updateDom = function (list) {\r\n        var _a = this.domManager.update(list, this.start, this.end), end = _a.end, startPos = _a.startPos, endPos = _a.endPos, startDelta = _a.startDelta;\r\n        if (startDelta) {\r\n            this.bscroll.minScrollY = startDelta;\r\n        }\r\n        if (endPos > this.bscroll.maxScrollY) {\r\n            this.bscroll.maxScrollY = -(endPos - this.bscroll.scroller.scrollBehaviorY.wrapperSize);\r\n        }\r\n        return {\r\n            end: end,\r\n            startPos: startPos,\r\n            endPos: endPos\r\n        };\r\n    };\r\n    InfinityScroll.prototype.destroy = function () {\r\n        var content = this.bscroll.scroller.content;\r\n        while (content.firstChild) {\r\n            content.removeChild(content.firstChild);\r\n        }\r\n        this.domManager.destroy();\r\n        this.bscroll.off('scroll', this.update);\r\n        this.bscroll.off('destroy', this.destroy);\r\n    };\r\n    InfinityScroll.pluginName = 'infinity';\r\n    return InfinityScroll;\r\n}());\n\nBScroll.use(MouseWheel)\r\n    .use(ObserveDOM)\r\n    .use(PullDown)\r\n    .use(PullUp)\r\n    .use(ScrollBar)\r\n    .use(Slide)\r\n    .use(Wheel)\r\n    .use(Zoom)\r\n    .use(NestedScroll)\r\n    .use(InfinityScroll);\n\nexport default BScroll;\n"],"sourceRoot":""}