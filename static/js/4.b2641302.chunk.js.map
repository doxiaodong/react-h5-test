{"version":3,"sources":["layouts/RouteLayout/index.tsx","hooks/useMountedState.ts","hooks/useAsyncFn.ts","hooks/useAsync.ts","hooks/useAsyncRetry.ts","components/OrderList/OrderItem.tsx","components/OrderList/index.tsx","components/Loading/index.tsx","utils/tool.ts","layouts/ScrollLayout/index.tsx","pages/OrderList/TabContent.tsx","pages/OrderList/index.tsx"],"names":["RouteLayout","props","location","useLocation","routeCls","classNames","pathname","className","children","useMountedState","mountedRef","useRef","get","useCallback","current","useEffect","useAsyncFn","fn","deps","initialState","loading","lastCallId","useState","state","set","isMounted","callback","callId","then","value","error","useAsync","useAsyncRetry","attempt","setAttempt","stateLoading","retry","currentAttempt","OrderItem","wrapperClass","classnames","status","onClick","dataItem","title","subTitle","extra","subExtra","List","dataSource","length","style","showLoadMore","map","item","idx","key","defaultProps","Loading","type","color","height","width","timeout","debounce","func","delay","timer","args","clearTimeout","setTimeout","apply","Scroll","forwardRef","ref","bScroll","setBScroll","scrollContaninerRef","direction","click","refresh","pullUpLoading","pullDownLoading","bounceTop","bounceBottom","pullUp","pullDown","onScroll","pullUpDebounce","useMemo","pullDownDebounce","scroll","BScroll","scrollX","scrollY","probeType","bounce","top","bottom","on","off","handlePullUp","y","maxScrollY","handlePullDown","pos","useImperativeHandle","scrollTo","getBScroll","PullUpdisplayStyle","display","PullDowndisplayStyle","containerCls","TabContent","useHistory","listRef","renderSubTitle","a","approver","Http","url","response","items","from_msg","updated","Api","orderList","ScrollLayout","forceCheck","position","overflow","id","OrderList","queryString","parse","search","orderMyList"],"mappings":"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","file":"static/js/4.b2641302.chunk.js","sourcesContent":["import React from 'react';\nimport { useLocation } from 'react-router-dom';\nimport classNames from 'classnames';\nimport './style.less';\n\ninterface IRouteProps {\n  pathname: string;\n  children?: React.ReactNode;\n}\n\nconst RouteLayout = (props: IRouteProps) => {\n  const location = useLocation();\n  const routeCls = classNames({\n    'l-route-layout': true,\n    'l-route-layout-hide': props.pathname !== location.pathname,\n  });\n  return <div className={routeCls}>{props.children}</div>;\n};\n\nexport default RouteLayout;\n","import { useCallback, useEffect, useRef } from 'react';\n\nexport default function useMountedState(): () => boolean {\n  const mountedRef = useRef<boolean>(false);\n  const get = useCallback(() => mountedRef.current, []);\n\n  useEffect(() => {\n    mountedRef.current = true;\n\n    return () => {\n      mountedRef.current = false;\n    };\n  });\n\n  return get;\n}\n","/* eslint-disable */\nimport { DependencyList, useCallback, useState, useRef } from 'react';\nimport { Toast } from 'antd-mobile';\nimport useMountedState from './useMountedState';\n\nexport type AsyncState<T> =\n  | {\n      loading: boolean;\n      error?: undefined;\n      value?: undefined;\n    }\n  | {\n      loading: false;\n      error: Error;\n      value?: undefined;\n    }\n  | {\n      loading: false;\n      error?: undefined;\n      value: T;\n    };\n\nexport type AsyncFn<Result = any, Args extends any[] = any[]> = [\n  AsyncState<Result>,\n  (...args: Args | []) => Promise<Result>\n];\n\nexport default function useAsyncFn<Result = any, Args extends any[] = any[]>(\n  fn: (...args: Args | []) => Promise<Result>,\n  deps: DependencyList = [],\n  initialState: AsyncState<Result> = { loading: false }\n): AsyncFn<Result, Args> {\n  const lastCallId = useRef(0);\n  const [state, set] = useState<AsyncState<Result>>(initialState);\n  \n  const isMounted = useMountedState();\n\n  const callback = useCallback((...args: Args | []) => {\n    const callId = ++lastCallId.current;\n    set({ loading: true });\n\n    return fn(...args).then(\n      value => {\n        isMounted() && callId === lastCallId.current && set({ value, loading: false });\n\n        return value;\n      },\n      error => {\n        isMounted() && callId === lastCallId.current && set({ error, loading: false });\n\n        return error;\n      }\n    );\n  }, deps);\n\n  return [state, callback];\n}\n","import { DependencyList, useEffect } from 'react';\nimport useAsyncFn from './useAsyncFn';\n\nexport default function useAsync<Result = any, Args extends any[] = any[]>(\n  fn: (...args: Args | []) => Promise<Result>,\n  deps: DependencyList = [],\n) {\n  const [state, callback] = useAsyncFn<Result, Args>(fn, deps, {\n    loading: true,\n  });\n\n  useEffect(() => {\n    callback();\n  }, [callback]);\n\n  return state;\n}\n","/* eslint-disable */\nimport { DependencyList, useCallback, useState } from 'react';\nimport {AsyncState} from './useAsyncFn';\nimport useAsync from './useAsync';\n\nexport type AsyncStateRetry<T> = AsyncState<T> & {\n  retry(): void;\n};\n\nconst useAsyncRetry = <T>(fn: () => Promise<T>, deps: DependencyList = []) => {\n  const [attempt, setAttempt] = useState<number>(0);\n  const state = useAsync(fn, [...deps, attempt]);\n\n  const stateLoading = state.loading;\n  const retry = useCallback(() => {\n    if (stateLoading) {\n      if (process.env.NODE_ENV === 'development') {\n        console.log('You are calling useAsyncRetry hook retry() method while loading in progress, this is a no-op.');\n      }\n\n      return;\n    }\n\n    setAttempt(currentAttempt => currentAttempt + 1);\n  }, [...deps, stateLoading]);\n\n  return { ...state, retry };\n};\n\nexport default useAsyncRetry;\n","import React from 'react';\nimport classnames from 'classnames';\nimport './style.less';\nexport interface IOrderItemProps {\n  title: string | React.ReactNode;\n  subTitle: string | React.ReactNode;\n  extra: string | React.ReactNode;\n  subExtra: string | React.ReactNode;\n  dataItem: any;\n  onClick?: (any) => void;\n  status?: 'success' | 'info' | 'error' | 'warning';\n  className?: string;\n  style?: React.CSSProperties;\n}\n\nconst OrderItem = (props: IOrderItemProps) => {\n  // console.info(props.status);\n  const wrapperClass = classnames('c-orderItem', props.status && `c-orderItem-${props.status}`);\n\n  const handleClick = () => {\n    if (props.onClick) {\n      props.onClick(props.dataItem);\n    }\n  };\n\n  return (\n    <div onClick={handleClick} className={wrapperClass}>\n      <div className=\"c-orderItem-title\">\n        <div className=\"c-orderItem-title-main\">{props.title}</div>\n        <div className=\"c-orderItem-title-sub\">{props.subTitle}</div>\n      </div>\n      <div className=\"c-orderItem-extra\">\n        <div className=\"c-orderItem-extra-main\">{props.extra}</div>\n        <div className=\"c-orderItem-extra-sub\">{props.subExtra}</div>\n      </div>\n    </div>\n  );\n};\n\nexport default OrderItem;\n","import React, { forwardRef, ElementRef } from 'react';\nimport classnames from 'classnames';\nimport OrderItem, { IOrderItemProps } from './OrderItem';\nimport './style.less';\n\ninterface IListProps {\n  dataSource: IOrderItemProps[];\n  className?: string;\n  showLoadMore?: boolean;\n  style?: React.CSSProperties;\n  onClick?: (any) => void;\n}\n\nconst List = (props: IListProps) => {\n  const wrapperClass = classnames('c-orderList', props.className);\n\n  if (props.dataSource.length === 0) {\n    return <div className=\"c-orderList-empty\">暂无数据</div>;\n  }\n\n  return (\n    <div className={wrapperClass} style={props.style}>\n      {props.showLoadMore && <div className=\"c-orderList-down-text\"> 下拉刷新加载更多 </div>}\n      {props.dataSource.map((item, idx) => {\n        return <OrderItem onClick={props.onClick} key={`orderItem-${idx}`} {...item} />;\n      })}\n    </div>\n  );\n};\n\nList.defaultProps = {\n  dataSource: [],\n};\n\nexport default List;\n","import React from 'react';\nimport Loader from 'react-loader-spinner';\nimport './style.less';\n\nexport default function Loading() {\n  return (\n    <div className=\"c-loading\">\n      <div className=\"c-loading-content\">\n        <Loader\n          type=\"Oval\"\n          color=\"#ee764e\"\n          height={10}\n          width={10}\n          timeout={30000} //3 secs\n        />\n        <div className=\"c-loading-text\">加载中...</div>\n      </div>\n    </div>\n  );\n}\n","//防抖函数\n\nexport const debounce = (func, delay) => {\n  let timer;\n  return function(...args) {\n    if (timer) {\n      clearTimeout(timer);\n    }\n    timer = setTimeout(() => {\n      func.apply(this, args);\n      clearTimeout(timer);\n    }, delay);\n  };\n};\n","import React, {\n  forwardRef,\n  useState,\n  useEffect,\n  useRef,\n  useImperativeHandle,\n  useMemo,\n  ElementRef,\n} from 'react';\nimport BScroll from 'better-scroll';\nimport classnames from 'classnames';\n// import { useDebounceFn } from '@umijs/hooks';\nimport { Loading } from 'components';\nimport { debounce } from 'utils/tool';\n\nimport './style.less';\n\ninterface IScrollProps {\n  direction?: 'vertical' | 'horizental';\n  click?: boolean;\n  refresh?: boolean;\n  onScroll?: any;\n  ref?: any;\n  pullUpLoading?: boolean;\n  pullDownLoading?: boolean;\n  pullUp?: () => void;\n  pullDown?: () => void;\n  bounceTop?: boolean;\n  bounceBottom?: boolean;\n  children?: React.ReactNode;\n}\n\nconst defaultProps: IScrollProps = {\n  direction: 'vertical',\n  click: true,\n  refresh: true,\n  pullUpLoading: false,\n  pullDownLoading: false,\n  bounceTop: true,\n  bounceBottom: true,\n};\n\nconst Scroll: React.SFC<IScrollProps> = forwardRef((props: IScrollProps, ref: ElementRef<any>) => {\n  const [bScroll, setBScroll] = useState<any>();\n\n  const scrollContaninerRef = useRef<any>();\n\n  const {\n    direction,\n    click,\n    refresh,\n    pullUpLoading,\n    pullDownLoading,\n    bounceTop,\n    bounceBottom,\n    pullUp,\n    pullDown,\n    onScroll,\n  } = props;\n\n  let pullUpDebounce = useMemo(() => {\n    return debounce(pullUp, 50);\n  }, [pullUp]);\n\n  let pullDownDebounce = useMemo(() => {\n    return debounce(pullDown, 50);\n  }, [pullDown]);\n\n  useEffect(() => {\n    const scroll = new BScroll(scrollContaninerRef.current, {\n      scrollX: direction === 'horizental',\n      scrollY: direction === 'vertical',\n      probeType: 3,\n      click: click,\n      bounce: {\n        top: bounceTop,\n        bottom: bounceBottom,\n      },\n    });\n    setBScroll(scroll);\n    return () => {\n      setBScroll(null);\n    };\n    // eslint-disable-next-line\n  }, []);\n\n  useEffect(() => {\n    if (!bScroll || !onScroll) return;\n    bScroll.on('scroll', onScroll);\n    return () => {\n      bScroll.off('scroll', onScroll);\n    };\n  }, [onScroll, bScroll]);\n\n  useEffect(() => {\n    if (!bScroll || !pullUp) return;\n    const handlePullUp = () => {\n      //判断是否滑动到了底部\n      if (bScroll.y <= bScroll.maxScrollY + 100) {\n        pullUpDebounce();\n      }\n    };\n    bScroll.on('scrollEnd', handlePullUp);\n    return () => {\n      bScroll.off('scrollEnd', handlePullUp);\n    };\n  }, [pullUp, pullUpDebounce, bScroll]);\n\n  useEffect(() => {\n    if (!bScroll || !pullDown) return;\n    const handlePullDown = pos => {\n      //判断用户的下拉动作\n      if (pos.y > 30) {\n        pullDownDebounce();\n      }\n    };\n    bScroll.on('touchEnd', handlePullDown);\n    return () => {\n      bScroll.off('touchEnd', handlePullDown);\n    };\n  }, [pullDown, pullDownDebounce, bScroll]);\n\n  useEffect(() => {\n    if (refresh && bScroll) {\n      bScroll.refresh();\n    }\n  });\n\n  useImperativeHandle(ref, () => ({\n    refresh() {\n      if (bScroll) {\n        bScroll.refresh();\n        bScroll.scrollTo(0, 0);\n      }\n    },\n    getBScroll() {\n      if (bScroll) {\n        return bScroll;\n      }\n    },\n  }));\n\n  const PullUpdisplayStyle = pullUpLoading ? { display: '' } : { display: 'none' };\n  const PullDowndisplayStyle = pullDownLoading ? { display: '' } : { display: 'none' };\n\n  const containerCls = classnames({\n    'l-scroll': true,\n    'l-scroll-up': pullUpLoading,\n    'l-scroll-down': pullDownLoading,\n  });\n\n  return (\n    <div className={containerCls} ref={scrollContaninerRef}>\n      {props.children}\n      {/* 滑到底部加载动画 */}\n      <div style={PullUpdisplayStyle} className=\"l-scroll-loading-up\">\n        <Loading />\n      </div>\n      {/* 顶部下拉刷新动画 */}\n      <div style={PullDowndisplayStyle} className=\"l-scroll-loading-down\">\n        <Loading />\n      </div>\n    </div>\n  );\n});\n\nScroll.defaultProps = defaultProps;\n\nexport default Scroll;\n","import React, { useRef } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { PullToRefresh } from 'antd-mobile';\nimport { useSessionStorageState } from '@umijs/hooks';\nimport LazyLoad, { forceCheck } from 'react-lazyload';\nimport useAsyncRetry from 'hooks/useAsyncRetry';\nimport ScrollLayout from 'layouts/ScrollLayout';\nimport queryString from 'query-string';\nimport { OrderList } from 'components';\nimport Api from 'utils/api';\nimport Http, { getCookieByName } from 'utils/http';\n\ninterface ITabContentProps {\n  url: string;\n}\n\nconst statusMap = {\n  init: 'info',\n  approving: 'info',\n  rejected: 'error',\n  approved: 'success',\n  building: 'info',\n  deploying: 'info',\n  done: 'success',\n};\n\nconst TabContent = (props: ITabContentProps) => {\n  const history = useHistory();\n  const listRef = useRef<any>(null);\n  const state = useAsyncRetry(async () => {\n    // const response = await Http.get(Api.orderList);\n    const response = await Http.get(props.url);\n    const items = (response as any) || [];\n\n    function renderSubTitle(item) {\n      return <span>审批人：{item.approver}</span>;\n    }\n\n    return items.map(item => {\n      return {\n        dataItem: item,\n        title: item.title,\n        subTitle: renderSubTitle(item),\n        // status: statusMap[item.status] || 'info',\n        status: item.status,\n        extra: (\n          <span>\n            来自 <b style={{ color: '#ee764e' }}>{item.from_msg}</b>\n          </span>\n        ),\n        subExtra: item.updated,\n      };\n    });\n  }, [Api.orderList]);\n\n  // const wrapperStyle = {\n  //   height: `calc(100vh - ${46.5}px)`,\n  // };\n\n  const handleListClick = dataItem => {\n    const pathname = `/order/${dataItem.id}`;\n\n    // history.push({\n    //   pathname,\n    //   search: queryString.stringify({\n    //     from: dataItem.from,\n    //     type: props.type,\n    //   }),\n    // });\n  };\n  // console.info('TabContent==>', Api.orderList, state);\n  return (\n    <div>\n      <ScrollLayout\n        ref={listRef}\n        onScroll={forceCheck}\n        pullUp={state.retry}\n        pullDown={state.retry}\n        // pullUpLoading={state.loading}\n        pullDownLoading={state.loading}\n      >\n        <OrderList\n          style={{\n            position: 'fixed',\n            overflow: 'hidden',\n            top: -80,\n          }}\n          showLoadMore\n          onClick={handleListClick}\n          dataSource={state.value || []}\n        />\n      </ScrollLayout>\n    </div>\n  );\n};\n\nexport default TabContent;\n","import React, { useState } from 'react';\nimport { useLocation, useHistory } from 'react-router-dom';\nimport queryString from 'query-string';\nimport Api from 'utils/api';\nimport RouteLayout from 'layouts/RouteLayout';\nimport TabContent from './TabContent';\n\nconst OrderList = props => {\n  const location = useLocation();\n  const history = useHistory();\n  const search = queryString.parse(location.search);\n  return (\n    <div>\n      <RouteLayout pathname=\"/custom\">\n        <TabContent url={Api.orderMyList} />\n      </RouteLayout>\n    </div>\n  );\n};\n\nexport default OrderList;\n"],"sourceRoot":""}